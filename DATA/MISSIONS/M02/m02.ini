[Mission]
npc_ship_file = missions\m02\npcships.ini

[NPC] 
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

[ObjList] 
nickname = force_stop
Idle = no_params

[ObjList] 
nickname = unform
Break_formation = no_params

[ObjList] 
nickname = unform_n_stop
Break_formation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

[Trigger]
nickname = Wilham_Armor
Cnd_Timer = 1
Act_Invulnerable = Wilham, true, false, 0.590000

[Trigger]
nickname = Jacobo_Armor
Cnd_Timer = 1
Act_Invulnerable = Jacobo, true, false, 0.200000


[;
;-------------------------------------
;waypoints

;unique
;init part
m2_dock_on_battleship = 021851
m2_find_wilham_in_bar = 021852
;bizmark first part
m2_goto_om15_jumpgate = 021853
m2_jumpto_om15 = 021854
;om15 search part
m2_tlr_to_miners = 021872
m2_find_jacobo_on_miner = 021855
m2_goto_waypoint = 021856
m2_scan_objects = 021857
m2_destroy_junkers = 021858
m2_get_blackbox = 021873
m2_go_back_to_wilham = 021859
;om15 killbase part
m2_find_corsair_depot = 021860
m2_find_corsair_base = 021861
m2_destroy_platforms = 021862
m2_destroy_corsairs = 021863
;om15 reichman part
m2_goto_biz_jumpgate = 021864
m2_jumpto_bizmark = 021865
m2_goto_battleship = 021866
m2_find_reichman_in_battleship = 021867

;generic
m2_launch_to_space = 021871

[NNObjective]
nickname = m2_dock_on_battleship
state = HIDDEN
type = rep_inst, rh_biz, 092003, 092003, -25800, -9000, 18500, rh_biz_03

[NNObjective]
nickname = m2_find_wilham_in_bar
state = HIDDEN
type = ids, 092004

[NNObjective]
nickname = m2_goto_om15_jumpgate
state = HIDDEN
type = rep_inst, rh_biz, 092005, 092005, 5000, -7000, 38000, BIZ_TO_OM15

[NNObjective]
nickname = m2_jumpto_om15
state = HIDDEN
type = rep_inst, rh_biz, 092006, 092006, 5000, -7000, 38000, BIZ_TO_OM15

[NNObjective]
nickname = m2_tlr_to_miners
state = HIDDEN
type = rep_inst, om15, 092007, 092007, 23793, -156, -23766, OM15_F_Trade_Lane_Ring_A01

[NNObjective]
nickname = m2_dock_on_miner
state = HIDDEN
type = rep_inst, om15, 092008, 092008, 20000, 0, 16000, om15_Roid_Miner_03

[NNObjective]
nickname = m2_find_jacobo_on_miner
state = HIDDEN
type = ids, 092009

[NNObjective]
nickname = m2_goto_waypoint_1
state = HIDDEN
type = navmarker, om15, 092010, 092010, 17000, 0, 40000

[NNObjective]
nickname = m2_goto_waypoint_2
state = HIDDEN
type = navmarker, om15, 092010, 092010, 28000, 0, 42000

[NNObjective]
nickname = m2_goto_waypoint_3
state = HIDDEN
type = navmarker, om15, 092010, 092010, 24000, 0, 30000

[NNObjective]
nickname = m2_scan_objects
state = HIDDEN
type = ids, 092011

[NNObjective]
nickname = m2_destroy_junkers
state = HIDDEN
type = ids, 092012

[NNObjective]
nickname = m2_get_blackbox
state = HIDDEN
type = ids, 092013

[NNObjective]
nickname = m2_go_back_to_wilham
state = HIDDEN
type = ids, 092014
;Act_NNPath = 021858, 021858, om15_to_biz, om15

[NNObjective]
nickname = m2_find_corsair_depot
state = HIDDEN
type = navmarker, om15, 092015, 092015, 25000, 0, -52500

[NNObjective]
nickname = m2_find_corsair_base
state = HIDDEN
type = navmarker, om15, 092016, 092016, 15000, 0, -65000

[NNObjective]
nickname = m2_destroy_platforms
state = HIDDEN
type = ids, 092017

[NNObjective]
nickname = m2_destroy_corsairs
state = HIDDEN
type = ids, 092018

[NNObjective]
nickname = m2_goto_biz_jumpgate
state = HIDDEN
type = rep_inst, om15, 092019, 092019, 25000, 0, -25000, OM15_to_BIZ

[NNObjective]
nickname = m2_jumpto_bizmark
state = HIDDEN
type = rep_inst, om15, 092020, 092020, 25000, 0, -25000, OM15_to_BIZ

[NNObjective]
nickname = m2_goto_battleship
state = HIDDEN
type = rep_inst, rh_biz, 092021, 092021, -25800, -9000, 18500, rh_biz_03

[NNObjective]
nickname = m2_find_reichman_in_battleship
state = HIDDEN
type = ids, 092022


;wp1
;17000, 0, 40000
;wp2
;28000, 0, 42000
;wp3
;24000, 0, 30000

;GENERIC

[NNObjective]
nickname = m2_launch_to_space
state = HIDDEN
type = ids, 092023


;INIT MSN - MEET VENDOR

[Trigger]
nickname = init_ms2
Cnd_True = no_params
InitState = ACTIVE
Act_ActTrig = init_objective
Act_ActTrig = dock_on_vendor_station
Act_ActTrig = wilham_vendor

Act_ActTrig = first_message_not_in_space
Act_ActTrig = first_message_in_space
Act_ActTrig = first_message_on_planet
Act_ActTrig = vendorbase_open_forever


[Trigger]
nickname = first_message_not_in_space
Cnd_InSpace = false
Act_DeActTrig = first_message_in_space

[Trigger]
nickname = first_message_in_space
Cnd_InSpace = true
Act_ActTrig = first_message_init_message
Act_DeActTrig = first_message_on_planet

[Trigger]
nickname = first_message_on_planet
Cnd_LaunchComplete = Player
Act_ActTrig = first_message_wait_and_call

[Trigger]
nickname = first_message_wait_and_call
Cnd_Timer = 1
Act_ActTrig = first_message_init_message

[Trigger]
nickname = first_message_init_message
Cnd_True = no_params
Act_ActTrig = vendor_popup

[Trigger]
nickname = vendorbase_open_forever
Cnd_True = no_params
repeatable = true
Act_SetVibeOfferBaseHack = rh_biz_03

[Trigger]
nickname = vendor_popup
Cnd_Timer = 2
Act_Popupdialog = 216034, 092401, CLOSE
Act_ActTrig = vendor_popup_CLOSE_action

[Trigger]
nickname = vendor_popup_CLOSE_action
Cnd_PopUpDialog = CLOSE
Act_ActTrig = init_vendor

[Trigger]
nickname = init_objective
Cnd_True = no_params
Act_NNPath = 092003, 092003, rh_biz_03, rh_biz

[Trigger]
nickname = dock_on_vendor_station
Cnd_LocEnter = Deck, rh_biz_03_base
Act_SetNNObj = m2_find_wilham_in_bar
Act_ActTrig = ms2_create_wilham_vendor

;---msn02_vendor

[Trigger]
nickname = wilham_vendor
system = rh_biz
Cnd_LocEnter = Bar, rh_biz_03_base
Act_SetNNObj = m2_find_wilham_in_bar
Act_RemoveRTC = missions\m02\wilham_msn.ini
Act_AddRTC = missions\m02\wilham_msn.ini
Act_ActTrig = ms2_do_accept
repeatable = true

[Trigger]
nickname = ms2_do_accept
system = rh_biz
Cnd_MsnResponse = accept
Act_DeactTrig = ms2_create_wilham_vendor
Act_RemoveRTC = missions\m02\wilham_msn.ini
Act_PlayerCanDock = false
Act_ActTrig = fortran_in_space
Act_ActTrig = fortran_launch_complete
Act_SetNNObj = m2_launch_to_space

Act_SetTitle = 092301
Act_SetOffer = 092302

Act_DeActTrig = first_message_in_space
Act_DeActTrig = first_message_not_in_space
Act_DeActTrig = first_message_on_planet
Act_DeActTrig = vendorbase_open_forever
Act_DeActTrig = wilham_vendor

Act_ActTrig = MSN_REP_BEFORE

;debug
;Act_SetShipAndLoadout = bw_fighter, lod_m02_player

;-WILHAM NPC

[NPC] 
nickname = npc_wilham
affiliation = fc_uk_grp
npc_ship_arch = ms2_wilham
space_costume = rh_wilham_head, rh_wilham_body, comm_rh_wilham
individual_name = 216033

[MsnShip]
nickname = wilham
NPC = npc_wilham
jumper = true
label = friend
position = 
orientation = 

;-BEGIN MISSION



[Trigger]
nickname = fortran_in_space
Cnd_InSpace = true
Act_SpawnShip = wilham, no_ol, -25488, -9049, 18650, 1, 0, 0.55, 0
Act_StaticCam = -25463, -9047, 18654, 1, 0, 0.60, 0
Act_ActTrig = fortran_space_formation
Act_PlayerCanDock = false, BIZ_To_OM15
Act_EnableManeuver = formation, false

[Trigger]
nickname = fortran_space_formation
Cnd_Timer = 4
Act_GiveObjList = wilham, follow_player

[Trigger]
nickname = fortran_launch_complete
Cnd_LaunchComplete = Player
Act_ActTrig = Wilham_Armor
Act_ActTrig = Wilham_Triggers
Act_ActTrig = dialog_FirstSpace

[Trigger]
nickname = Wilham_Triggers
Cnd_True = no_params
Act_MarkObj = wilham, 1
Act_SetVibeLblToShip = friend, Player, REP_FRIEND_THRESHOLD
Act_SetVibeShipToLbl = Player, friend, REP_FRIEND_THRESHOLD

[Trigger]
nickname = dialog_FirstSpace
Cnd_Timer = 1
;Wilham: we need to go
Act_EtherComm = echo_m02, 092560, Player, DX_M02_1010_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_ActTrig = dialog_FirstSpace_COMPLETE

[Trigger]
nickname = dialog_FirstSpace_COMPLETE
Cnd_CommComplete = DX_M02_1010_wilham
Act_SetNNObj = m2_goto_om15_jumpgate
Act_ActTrig = around_om15_jumpgate
Act_ActTrig = dialog_after_firstSpace
Act_SpawnShip = nag_voice
Act_NagDistTowards = OBJ, goto_om15_jump, nag_voice, BIZ_TO_OM15, 090001, 3000, NAG_ALWAYS

[Trigger]
nickname = dialog_after_firstSpace
Cnd_Timer = 7

;Player: I have question
Act_EtherComm = echo_player, 092501, Player, DX_M02_0010_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Wilham: Yes, go on
Act_EtherComm = echo_m02, 092502, Player, DX_M02_0020_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Player: Can you do it without me?
Act_EtherComm = echo_player, 092503, Player, DX_M02_0030_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Wilham: That's becouse of... (1)
Act_EtherComm = echo_m02, 092504, Player, DX_M02_0040_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Wilham: That's becouse of... (2)
Act_EtherComm = echo_m02, 092505, Player, DX_M02_0045_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Wilham: That's becouse of... (3)
Act_EtherComm = echo_m02, 092506, Player, DX_M02_0050_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Wilham: That's becouse of... (4)
Act_EtherComm = echo_m02, 092507, Player, DX_M02_0055_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Player: Ok, got it
Act_EtherComm = echo_player, 092508, Player, DX_M02_0060_trent, -1, pi_pirate5_head, player_body, player_commhelmet






[Trigger]
nickname = around_om15_jumpgate
Cnd_DistShip = inside, Player, BIZ_TO_OM15, 5000
Act_NagOff = goto_om15_jump
Act_NagDistLeaving = jumpin_om15, nag_voice, BIZ_TO_OM15, 090003, 1, 10, NAG_ALWAYS
Act_SetNNObj = m2_jumpto_om15
Act_ActTrig = welcome_to_om15

;OM15 SYSTEM



[Trigger]
nickname = welcome_to_om15
Cnd_SystemEnter = om15
Act_NagOff = jumpin_om15
Act_ActTrig = om15_welcome_wait_for_wilham

[Trigger]
nickname = om15_welcome_wait_for_wilham
Cnd_DistShip = inside, Player, Wilham, 5000
Act_ActTrig = dialog_welcome_om15
Act_EnableManeuvers = formation, false

[ObjList]
nickname = wilham_go_away
BreakFormation = no_params
GotoShip = goto_cruise, om15_04, 2000, true

[Trigger]
nickname = wilham_go_away
Cnd_True = no_params
Act_MarkObj = Wilham, 0
Act_GiveObjList = Wilham, wilham_go_away
Act_ActTrig = om15_hide_wilham

[Trigger]
nickname = om15_hide_wilham
Cnd_DistShip = outside, Player, Wilham, 8000
Act_Destroy = Wilham, SILENT

[Trigger]
nickname = dialog_welcome_om15
Cnd_Timer = 2
;Wilham: Go to miner
Act_EtherComm = echo_m02, 092509, Player, DX_M02_0070_wilham, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_ActTrig = dialog_welcome_om15_COMPLETE

[Trigger]
nickname = dialog_welcome_om15_COMPLETE
Cnd_CommComplete = DX_M02_0070_wilham
Act_ActTrig = wilham_go_away
Act_SetNNObj = m2_tlr_to_miners
Act_SpawnShip = nag_voice
Act_NagDistLeaving = TLRnag, nag_voice, OM15_F_Trade_Lane_Ring_A01, 090000, 100, NAG_ALWAYS
Act_ActTrig = om15_in_TLR

[Trigger]
nickname = om15_in_TLR
Cnd_TLEntered = Player, OM15_F_Trade_Lane_Ring_A01, OM15_F_Trade_Lane_Ring_A02
Act_NagOff = TLRnag
Act_LockManeuvers = true
Act_SetNNObj = null, OBJECTIVE_HISTORY
Act_ActTrig = om15_leave_TLR

[Trigger]
nickname = om15_leave_TLR
Cnd_TLExited = Player, OM15_F_Trade_Lane_Ring_A05
Act_LockManeuvers = false
Act_ActTrig = INIT_MINER_MISSION

;024910

[Trigger]
nickname = INIT_MINER_MISSION
Cnd_True = no_params
Act_ActTrig = vendor_jacobo
Act_SetNNObj = m2_dock_on_miner
Act_NagDistLeaving = miner_nag, nag_voice, om15_miner_03, 090001, 100, NAG_ALWAYS
Act_PlayerCanDock = false, om15_Roid_Miner_03

[Trigger]
nickname = vendor_jacobo
Cnd_LocEnter = Deck, om15_miner_03
Act_NagOff = miner_nag
Act_SetNNObj = m2_find_jacobo_on_miner
Act_AddRTC = missions\m02\jacobo_msn.ini
Act_ActTrig = vendor_jacobo_done
repeatable = true


[Trigger]
nickname = vendor_jacobo_done
Cnd_RTCDone = missions\m02\jacobo_msn.ini
Act_RemoveRTC = missions\m02\jacobo_msn.ini
Act_DeActTrig = vendor_jacobo

Act_ActTrig = jacoboMSN_inSpace
Act_ActTrig = jacoboMSN_launchComplete

Act_PlayerCanDock = false
Act_SetNNObj = m2_launch_to_space
Act_RandomPop = false

[Trigger]
nickname = disable_suprise_randomPop
Cnd_True = no_params
Act_RandomPopSphere = 26000, 0, 42000, 25000, OFF

[NPC] 
nickname = npc_jacobo
affiliation = fc_uk_grp
npc_ship_arch = ms2_jacobo
space_costume = pl_male1_head, pi_pirate2_body, comm_rh_guard
individual_name = 216047
voice = pilot_f_mil_m01

[MsnShip]
nickname = jacobo
NPC = npc_jacobo
jumper = true
label = outcast
rel_pos = 20, Player, 300



[Trigger]
nickname = jacoboMSN_inSpace
Cnd_InSpace = true
Act_SpawnShip = jacobo

[Trigger]
nickname = jacoboMSN_launchComplete
Cnd_LaunchComplete = Player
Act_ActTrig = Jacobo_Armor
Act_ActTrig = Jacobo_Triggers
Act_ActTrig = dialog_jacoboMSN
Act_ActTrig = spawn_suprises
Act_ActTrig = disable_suprise_randomPop
;reset nag_voice
Act_Destroy = nag_voice, SILENT

[Trigger]
nickname = Jacobo_Triggers
Cnd_True = no_params
Act_MarkObj = Jacobo, 1
Act_SetVibeLblToShip = outcast, Player, REP_FRIEND_MAXIMUM
Act_SetVibeShipToLbl = Player, outcast, REP_FRIEND_MAXIMUM

[Trigger]
nickname = dialog_jacoboMSN
Cnd_Timer = 2
;Jacobo: Objectives loaded
Act_EtherComm = echo_m02, 092511, Player, DX_M02_1030_jacobo, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard

Act_ActTrig = dialog_jacoboMSN_COMPLETE
Act_GiveObjList = Jacobo, follow_player

[Trigger]
nickname = dialog_jacoboMSN_COMPLETE
Cnd_CommComplete = DX_M02_1030_jacobo
Act_ActTrig = init_SUPRISE_MSN

[Trigger]
nickname = spawn_suprises
Cnd_True = no_params
Act_SpawnShip = suprise_waypoint01_ship01
Act_SpawnShip = suprise_waypoint01_ship02
Act_SpawnShip = suprise_waypoint02_ship01
Act_SpawnShip = suprise_waypoint02_ship02
Act_SpawnShip = suprise_waypoint02_ship03


;SUPRISES 

[NPC] 
nickname = npc_suprise
affiliation = fc_uk_grp
npc_ship_arch = ms2_suprise_ship
individual_name = 092201

[MsnShip]
nickname = suprise_waypoint01_ship01
NPC = npc_suprise
position = 17080, 0, 40000
orientation = 1, 0.33, 0.33, 0
label = suprise

[MsnShip]
nickname = suprise_waypoint01_ship02
NPC = npc_suprise
position = 17000, 10, 40060
orientation = 1, -0.66, -1, 0.33
label = suprise

[MsnShip]
nickname = suprise_waypoint02_ship01
NPC = npc_suprise
position = 28000, -30, 42080
orientation = 1, 1, -1, 1
label = suprise

[MsnShip]
nickname = suprise_waypoint02_ship02
NPC = npc_suprise
position = 28120, 0, 42020
orientation = 1, 0.33, 0.33, 0
label = suprise

[MsnShip]
nickname = suprise_waypoint02_ship03
NPC = npc_suprise
position = 27980, 40, 42000
orientation = 1, 1, 0, 0
label = suprise




;END

[Trigger]
nickname = init_SUPRISE_MSN
Cnd_True = no_params
Act_SetNNObj = m2_goto_waypoint_1
Act_SpawnShip = nag_voice
Act_NagDistTowards = POS, waypoint1, nag_voice, 17000, 0, 40000, 090001, 1000
Act_ActTrig = around_WAYPOINT1
Act_ActTrig = dialog_jacobo_afterStart
Act_ActTrig = start_reveal_music

[Trigger]
nickname = start_reveal_music
Cnd_DistVec = inside, Player, 17000, 0, 40000, 1000
Act_PlayMusic = music_reveal_and_exposition, none, none, none

[Trigger]
nickname = dialog_jacobo_afterStart
Cnd_Timer = 10
;Player: What is junkers?
Act_EtherComm = echo_player, 092512, Player, DX_M02_0100_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Jacobo: Is a badguys
Act_EtherComm = echo_m02, 092513, Player, DX_M02_0110_jacobo, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard

[Trigger]
nickname = around_WAYPOINT1
Cnd_DistVec = inside, Player, 17000, 0, 40000, 1000
Act_GiveObjList = Player, force_stop
;Jacobo: Badguys
Act_EtherComm = echo_m02, 092514, Player, DX_M01_0000_ECHO, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
Act_SetNNObj = m2_scan_objects
Act_MarkObj = suprise_waypoint01_ship01, 1
Act_MarkObj = suprise_waypoint01_ship02, 1
Act_ActTrig = WP1_scanned_LEFT
Act_ActTrig = WP1_scanned_RIGHT

[Trigger]
nickname = WP1_scanned_LEFT
Cnd_CargoScanned = Player, suprise_waypoint01_ship01
Act_ActTrig = WP1_scanned_RIGHT_after_LEFT
Act_MarkObj = suprise_waypoint01_ship01, 0
Act_DeActTrig = WP1_scanned_RIGHT

[Trigger]
nickname = WP1_scanned_RIGHT_after_LEFT
Cnd_CargoScanned = Player, suprise_waypoint01_ship02
Act_ActTrig = WP1_nothing_is_found

[Trigger]
nickname = WP1_scanned_RIGHT
Cnd_CargoScanned = Player, suprise_waypoint01_ship02
Act_ActTrig = WP1_scanned_LEFT_after_RIGHT
Act_MarkObj = suprise_waypoint01_ship02, 0
Act_DeActTrig = WP1_scanned_LEFT

[Trigger]
nickname = WP1_scanned_LEFT_after_RIGHT
Cnd_CargoScanned = Player, suprise_waypoint01_ship01
Act_ActTrig = WP1_nothing_is_found

[Trigger]
nickname = WP1_nothing_is_found
Cnd_True = no_params
;Player: Nothing is found
Act_EtherComm = echo_player, 092515, Player, DX_M01_0000_ECHO, -1, pi_pirate5_head, player_body, player_commhelmet
Act_ActTrig = init_WP2
Act_ActTrig = clear_WP1_MSN

[Trigger]
nickname = clear_WP1_MSN
Cnd_Timer = 2
Act_MarkObj = suprise_waypoint01_ship01, 0
Act_MarkObj = suprise_waypoint01_ship02, 0
Act_NagOff = waypoint1

;WP2 NPC

[NPC] 
nickname = npc_csv
affiliation = junk_grp
npc_ship_arch = ms2_moric

[NPC]  ; FIGHTER
nickname = npc_pirate_A
affiliation = junk_grp
npc_ship_arch = ms2_billy

[NPC]  ; SABRE
nickname = npc_pirate_B
affiliation = junk_grp
npc_ship_arch = ms2_colman

[MsnShip]
nickname = junker1
NPC = npc_csv
jumper = false
label = junker
random_name = true
rel_pos = 15, Player, 1200

[MsnShip]
nickname = junker2
NPC = npc_pirate_A
jumper = false
label = junker
random_name = true
rel_pos = 45, Player, 1250

[MsnShip]
nickname = junker3
NPC = npc_pirate_A
jumper = false
label = junker
random_name = true
rel_pos = 150, Player, 1250

[MsnShip]
nickname = junker4
NPC = npc_pirate_B
jumper = false
label = junker
random_name = true
rel_pos = 250, Player, 1250

[MsnShip]
nickname = junker5
NPC = npc_pirate_B
jumper = false
label = junker
random_name = true
rel_pos = 90, Player, 1250

[MsnShip]
nickname = junker6
NPC = npc_pirate_B
jumper = false
label = junker
random_name = true
rel_pos = 320, Player, 750


;-->end



[Trigger]
nickname = init_WP2
Cnd_CommComplete = DX_M01_0000_ECHO
Act_SetNNObj = m2_goto_waypoint_2
;Jacobo: 
Act_EtherComm = echo_m02, 092516, Player, DX_M01_0000_ECHO, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
Act_NagDistTowards = POS, waypoint2, nag_voice, 28000, 0, 42000, 090001, 1000
Act_ActTrig = around_WAYPOINT2

[Trigger]
nickname = spawn_junkers
Cnd_True = no_params
Act_SpawnShip = junker1
Act_SpawnShip = junker2
Act_SpawnShip = junker3
Act_SpawnShip = junker4
Act_SpawnShip = junker5
Act_SpawnShip = junker6

[Trigger]
nickname = mark_junkers
Cnd_True = no_params
Act_MarkObj = junker1, 1
Act_MarkObj = junker2, 1
Act_MarkObj = junker3, 1
Act_MarkObj = junker4, 1
Act_MarkObj = junker5, 1
Act_MarkObj = junker6, 1

[Trigger]
nickname = junker_good_setrep
Cnd_True = no_params
Act_SetVibeLbl = outcast, junker, REP_NEUTRAL
Act_SetVibeLbl = junker, outcast, REP_NEUTRAL
Act_SetVibeLblToShip = junker, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, junker, REP_NEUTRAL

[Trigger]
nickname = junker_fight_setrep
Cnd_True = no_params
Act_SetVibeLbl = outcast, junker, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = junker, outcast, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = junker, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, junker, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = around_WAYPOINT2
Cnd_DistVec = inside, Player, 28000, 0, 42000, 1000
Act_PlayMusic = music_stab_danger, none, none, none
Act_GiveObjList = Player, force_stop
Act_GiveObjList = Jacobo, jacobo_fighting
Act_ActTrig = init_Junker_Scene
Act_ActTrig = spawn_junkers
Act_ActTrig = junker_good_setrep

[Trigger]
nickname = init_Junker_Scene
Cnd_Timer = 0.5
;Junker: Go away
Act_EtherComm = echo_m02, 092517, Player, DX_M01_0000_SHORT, -1,  sh_male2_head, sh_male1_body, comm_pi_pirate
;Player: No
Act_EtherComm = echo_player, 092518, Player, DX_M01_1111_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
Act_ActTrig = junker_dialog_ends

[Trigger]
nickname = junker_dialog_ends
Cnd_CommComplete = DX_M01_1111_SHORT
Act_ActTrig = init_junker_battle
Act_Save = junker_battle_save, 040009
Act_ActTrig = INIT_JUNK_BATTLE

[Trigger]
nickname = junker_battle_save
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = INIT_JUNK_SAVE






[Trigger]
nickname = INIT_JUNK_SAVE
Cnd_Timer = 0.3
Act_RelocateShip = Player, 28000, 0, 42000, 1, 0, 0, 0
Act_SpawnShip = jacobo, no_ol, 28050, 150, 42050
Act_SpawnShip = nag_voice
Act_ActTrig = spawn_junkers
Act_ActTrig = spawn_suprises
Act_ActTrig = INIT_JUNK_BATTLE_wait

[Trigger]
nickname = INIT_JUNK_BATTLE_wait
Cnd_Timer = 0.2
Act_ActTrig = Jacobo_Armor
Act_ActTrig = Jacobo_Triggers
Act_ActTrig = INIT_JUNK_BATTLE


[Trigger]
nickname = INIT_JUNK_BATTLE
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_omega_battle
Act_SetNNObj = m2_destroy_junkers
Act_ActTrig = mark_junkers
Act_ActTrig = junker_fight_setrep
Act_ActTrig = junkers_destroyed
Act_NagOff = waypoint2
Act_NagDistLeaving = JunkerBattle, nag_voice, Jacobo, 090002, 5000, NAG_ALWAYS
;Junker: You are idiot?
Act_EtherComm = echo_m02, 092519, Player, DX_M01_0000_SHORT, -1,  sh_male2_head, sh_male1_body, comm_pi_pirate

[Trigger]
nickname = junkers_destroyed
Cnd_Destroyed = junker, -1, ALL_IGNORE_LANDING
Act_PlayMusic = none, none, none, music_anticipation_light
Act_NagOff = JunkerBattle
Act_NagDistTowards = POS, waypoint2x, nag_voice, 28000, 0, 42000, 090001, 1000
;Jacobo: Let's search
Act_EtherComm = echo_m02, 092520, Player, DX_M01_1111_SHORT, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
Act_GiveObjList = Jacobo, follow_player
Act_ActTrig = init_WP2_SEARCH

[Trigger]
nickname = init_WP2_SEARCH
Cnd_Timer = 2
Act_MarkObj = suprise_waypoint02_ship01, 1
Act_MarkObj = suprise_waypoint02_ship02, 1
Act_MarkObj = suprise_waypoint02_ship03, 1
Act_SetNNObj = m2_scan_objects
Act_ActTrig = IS_FINDED

[Trigger]
nickname = IS_FINDED
Cnd_CargoScanned = Player, suprise_waypoint02_ship02
;Player: Finded!
Act_EtherComm = echo_player, 092521, Player, DX_M01_1111_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
Act_SetNNObj = m2_get_blackbox
Act_SetVibe = suprise_waypoint02_ship02, Player, REP_HOSTILE_MAXIMUM
Act_SetVibe = Player, suprise_waypoint02_ship02, REP_HOSTILE_MAXIMUM
Act_ActTrig = Spawn_BlackBox

Act_MarkObj = suprise_waypoint02_ship01, 0
Act_MarkObj = suprise_waypoint02_ship03, 0

[Trigger]
nickname = Spawn_BlackBox
Cnd_HealthDec = suprise_waypoint02_ship02, 0.50000
Act_SpawnLoot = black_box
Act_MarkObj = suprise_waypoint02_ship02, 0
Act_MarkObj = black_box, 1
Act_ActTrig = Player_GetBlackBox

[Trigger]
nickname = Player_GetBlackBox
Cnd_LootAcquired = black_box, Player 
;Jacobo: All clear?
Act_EtherComm = echo_m02, 092522, Player, DX_M01_0000_SHORT, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
Act_ActTrig = init_WP3
Act_ActTrig = remove_WP2
Act_NagOff = waypoint2x

[Trigger]
nickname = remove_WP2
Cnd_DistVec = outside, Player, 28000, 0, 42000, 5000
Act_PlayMusic = no_params

[Trigger]
nickname = init_WP3
Cnd_CommComplete = DX_M01_0000_SHORT
Act_SetNNObj = m2_goto_waypoint_3
Act_NagDistTowards = POS, waypoint3, nag_voice, 24000, 0, 30000, 090001, 1000
Act_ActTrig = dialog_route_to_WP3
Act_ActTrig = around_WP3

[Trigger]
nickname = dialog_route_to_WP3
Cnd_Timer = 3
;Jacobo: Are you from Sig22?
Act_EtherComm = echo_m02, 092523, Player, DX_M01_0000_SHORT, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
;Player: Yes
Act_EtherComm = echo_player, 092524, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
;Jacobo: Why you here?
Act_EtherComm = echo_m02, 092525, Player, DX_M01_0000_SHORT, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
;Player: Becouse I am Freelancer
Act_EtherComm = echo_player, 092526, Player, DX_M01_1111_echo_m02, -1, pi_pirate5_head, player_body, player_commhelmet

[Trigger]
nickname = around_WP3
Cnd_DistVec = inside, Player, 24000, 0, 30000, 1000
Act_GiveObjList = Player, force_stop 
Act_GiveObjList = jacobo, jacobo_goes_home
;Jacobo: I go home
Act_EtherComm = echo_m02, 092527, Player, DX_M01_0000_ECHO, -1,  pl_male1_head, pi_pirate2_body, comm_rh_guard
Act_NagOff = waypoint3
Act_ActTrig = MINER_MSN_COMPLETE


[MsnLoot] 
nickname = black_box 
archetype = ms2_black_box 
string_id = 217112 
rel_pos_obj = suprise_waypoint02_ship02
rel_pos_offset = 0, -10, 0
velocity = 0, -10, 0
equip_amount = 1 
health = 1.000000 
Can_Jettison = true 

[ObjList]
nickname = jacobo_fighting
BreakFormation = no_params
GotoShip = goto_no_cruise, junker1, 5000, true

[ObjList]
nickname = jacobo_goes_home
SetPriority = ALWAYS_EXECUTE
BreakFormation = no_params
Dock = om15_roid_miner_03

[Trigger]
nickname = MINER_MSN_COMPLETE
Cnd_CommComplete = DX_M01_0000_ECHO
;Player: Wilham, blackbox is mine
Act_EtherComm = echo_player, 092528, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
Act_ActTrig = BACK_TO_WILHAM

[Trigger]
nickname = BACK_TO_WILHAM
Cnd_CommComplete = DX_M01_0000_SHORT
;Wilham: Well done! Punishers waiting for you
Act_EtherComm = echo_m02, 092529, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Player: Punishers?
Act_EtherComm = echo_player, 092530, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
Act_SetNNObj = m2_go_back_to_wilham
Act_NNPath = 092014, 092014, om15_to_biz, om15
Act_PlayerCanDock = false
Act_RandomPop = false
Act_ActTrig = init_MeetPunishers


[NPC] 
nickname = npc_punisher_a01
affiliation = rh_grp
npc_ship_arch = ms2_punisher_a
individual_name = 092202

[NPC] 
nickname = npc_punisher_a02
affiliation = rh_grp
npc_ship_arch = ms2_punisher_a
individual_name = 092203

[NPC] 
nickname = npc_punisher_a03
affiliation = rh_grp
npc_ship_arch = ms2_punisher_a
individual_name = 092204

[NPC] 
nickname = npc_punisher_a04
affiliation = rh_grp
npc_ship_arch = ms2_punisher_a
individual_name = 092205

[NPC] 
nickname = npc_punisher_a05
affiliation = rh_grp
npc_ship_arch = ms2_punisher_a
individual_name = 092206

[MsnShip]
nickname = punisher1
NPC = npc_punisher_a01
label = punisher
label = punisher_mainforce

[MsnShip]
nickname = punisher2
NPC = npc_punisher_a02
label = punisher
label = punisher_bomber

[MsnShip]
nickname = punisher3
NPC = npc_punisher_a03
label = punisher
label = punisher_mainforce

[MsnShip]
nickname = punisher4
NPC = npc_punisher_a04
label = punisher
label = punisher_mainforce

[MsnShip]
nickname = punisher5
NPC = npc_punisher_a05
label = punisher
label = punisher_mainforce

[MsnFormation]
nickname = punishers
position = 23150, -156, -24700
orientation = 1, 0, 2, 0
formation = punishers
ship = punisher1
ship = punisher2
ship = punisher3
ship = punisher4
ship = punisher5

[Trigger]
nickname = init_MeetPunishers
Cnd_DistShip = inside, Player, om15_to_biz, 10000
Act_SpawnFormation = punishers
Act_GiveObjList = punisher1, breakform
Act_SpawnShip = wilham, no_ol, 23000, -156, -24500, 1, 0, -1, 0
Act_ActTrig = around_punishers
Act_SetNNObj = m2_go_back_to_wilham

[Trigger]
nickname = around_punishers
Cnd_DistShip = inside, Player, wilham, 1000
;Wilham: Trent, this is punishers
Act_EtherComm = echo_m02, 092531, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_ActTrig = blackbox_readed
Act_ActTrig = Meeting_prepare_Friends

[Trigger]
nickname = Meeting_prepare_Friends
Cnd_True = no_params
Act_ActTrig = Wilham_Armor
Act_ActTrig = Wilham_Triggers
Act_SetVibeLblToShip = punisher, Player, REP_FRIEND_THRESHOLD
Act_SetVibeShipToLbl = Player, punisher, REP_FRIEND_THRESHOLD

[Trigger]
nickname = blackbox_readed
Cnd_CommComplete = DX_M01_0000_ECHO
Act_RemoveCargo = black_box
;Punisher_B: I scanned It
Act_EtherComm = echo_m02, 092532, Player, DX_M01_0000_ECHO, -1,  rh_sales_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = blackbox_readed_words_ends

[Trigger]
nickname = blackbox_readed_words_ends
Cnd_CommComplete = DX_M01_0000_ECHO
Act_ActTrig = init_ROUTE_TO_DEPOT
Act_Destroy = nag_voice, SILENT
Act_Save = MEET_PUNISHERS_SAVE, 040010

[Trigger]
nickname = MEET_PUNISHERS_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = init_MEET_PUNISHERS_SAVE

[Trigger]
nickname = init_MEET_PUNISHERS_SAVE
Cnd_Timer = 0.3
Act_RelocateShip = Player, 23300, -156, -24400, 1, 0, 0.5, 0
Act_SpawnShip = wilham, no_ol, 23000, -156, -24500, 1, 0, -1, 0
Act_SpawnFormation = punishers
Act_GiveObjList = punisher1, breakform
Act_ActTrig = MEET_PUNISHERS_ROUTE_init
Act_ActTrig = Meeting_prepare_Friends

[Trigger]
nickname = MEET_PUNISHERS_ROUTE_init
Cnd_Timer = 0.3
Act_ActTrig = init_ROUTE_TO_DEPOT

[ObjList]
nickname = friends_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic, wilham, punisher1, punisher2, punisher3, punisher4, punisher5

[Trigger]
nickname = remove_friend_formation
Cnd_True = no_params
Act_GiveObjList = Player, unform
Act_GiveObjList = Player, force_stop
Act_GiveObjList = wilham, unform
Act_GiveObjList = punisher1, unform
Act_GiveObjList = punisher2, unform
Act_GiveObjList = punisher3, unform
Act_GiveObjList = punisher4, unform
Act_GiveObjList = punisher5, unform

[Trigger]
nickname = init_ROUTE_TO_DEPOT
Cnd_True = no_params
;Wilham: Let's go to depot
Act_EtherComm = echo_m02, 092533, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_SetNNObj = m2_find_corsair_depot
Act_GiveObjList = Player, friends_follow_player
Act_ActTrig = init_DEPOT_BATTLE
Act_SpawnShip = nag_voice
Act_NagDistTowards = POS, depot_waypoint, nag_voice, 25000, 0, -52500, 090001, 5000

;depots

[MsnSolar]
nickname = depot1
string_id = 261161
faction = co_grp
system = om15
position = 25100, 0, -52500
orientation = 1, 0, 0, 0
archetype = space_tanklx4
label = depot
radius = 0

[MsnSolar]
nickname = depot2
string_id = 261161
faction = co_grp
system = om15
position = 24900, 0, -52500
orientation = 1, 0, 0, 0
archetype = space_tanklx4
label = depot
radius = 0

;Corsair ships

[NPC] 
nickname = npc_co_fighter
affiliation = co_grp
npc_ship_arch = co_fighter_m2

[NPC] 
nickname = npc_co_freighter
affiliation = co_grp
npc_ship_arch = co_freighter_m2

[NPC] 
nickname = npc_co_elite
affiliation = co_grp
npc_ship_arch = co_elite_m2


[MsnShip]
nickname = depot_freighter1
NPC = npc_co_freighter
label = corsairs
label = depot_freighters
random_name = true
position = 25150, 50, -52500
orientation = 1, 0. 1, 0

[MsnShip]
nickname = depot_freighter2
NPC = npc_co_freighter
label = corsairs
label = depot_freighters
random_name = true
position = 24900, 50, -52500
orientation = 1, 0, -1, 0

[MsnShip]
nickname = depot_fighterA1
NPC = npc_co_fighter
label = corsairs
label = depot_fighters
random_name = true

[MsnShip]
nickname = depot_fighterA2
NPC = npc_co_fighter
label = corsairs
label = depot_fighters
random_name = true

[MsnShip]
nickname = depot_fighterA3
NPC = npc_co_fighter
label = corsairs
label = depot_fighters
random_name = true

[MsnShip]
nickname = depot_fighterB1
NPC = npc_co_fighter
label = corsairs
label = depot_fighters
random_name = true

[MsnShip]
nickname = depot_fighterB2
NPC = npc_co_fighter
label = corsairs
label = depot_fighters
random_name = true

[MsnShip]
nickname = depot_fighterB3
NPC = npc_co_fighter
label = corsairs
label = depot_fighters
random_name = true

[MsnFormation]
nickname = depot_wingA
position = 25000, 80, -52600
orientation = 1, 0, 2, 0
formation = fighter_basic_large_space
ship = depot_fighterA1
ship = depot_fighterA2
ship = depot_fighterA3

[MsnFormation]
nickname = depot_wingB
position = 25000, -40, -52500
orientation = 1, 0, 2, 0
formation = fighter_basic_large_space
ship = depot_fighterB1
ship = depot_fighterB2
ship = depot_fighterB3

;BASE SCENE

[MsnShip]
nickname = freighter1
NPC = npc_co_freighter
label = corsairs
label = ships
random_name = true
position = 15300, 0, -64500

[MsnShip]
nickname = fighter1
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
position = 15350, 0, -65000
orientation = 1, 0, 2, 0

[MsnShip]
nickname = fighter2
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
position = 15500, 0, -65000
orientation = 1, 0, 2, 0

[MsnShip]
nickname = fighter3
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
position = 15650, 0, -65000
orientation = 1, 0, 2, 0

[MsnShip]
nickname = fighter4
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
position = 14700, 0, -65000
orientation = 1, 0, 2, 0

[MsnShip]
nickname = fighter5
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
position = 14550, 0, -65000
orientation = 1, 0, 2, 0

[MsnShip]
nickname = fighter6
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
position = 14400, 0, -65000
orientation = 1, 0, 2, 0

;LAST REINFORCE

[MsnShip]
nickname = fighter7
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
rel_pos = 30, Player, 1000

[MsnShip]
nickname = fighter8
NPC = npc_co_fighter
label = corsairs
random_name = true
rel_pos = 140, Player, 1000

[MsnShip]
nickname = fighter9
NPC = npc_co_fighter
label = corsairs
label = ships
random_name = true
rel_pos = 240, Player, 1000

[MsnShip]
nickname = elite1
NPC = npc_co_elite
label = corsairs
label = ships
random_name = true
rel_pos = 160, Player, 1000

[MsnShip]
nickname = elite2
NPC = npc_co_elite
label = corsairs
label = ships
random_name = true
rel_pos = 330, Player, 1000

[MsnShip]
nickname = elite3
NPC = npc_co_elite
label = corsairs
label = ships
random_name = true
rel_pos = 280, Player, 1000

;ADDITIONAL SHIPS 

[MsnRandEnc]
nickname = enc_defence
encounter_type = SP_Attack
attacker_rep_name = co_grp
target_ship_name = Player
activation_type = time, 5, 20
formation = fighter_basic, 5, 5, 5, m2_reinforcement, 100
num_forms = 1, 1
label = corsairs
label = reinforcement

;OBJLIST

[ObjList]
nickname = fall_back
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, 15000, 0, -65000, 500, true

[ObjList]
nickname = fall_back_force
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_cruise, 15000, 0, -65000, 500, true

;ENDS

[Trigger]
nickname = init_DEPOT_BATTLE
Cnd_True = no_params
Act_ActTrig = depot_far
Act_ActTrig = prepare_depot
Act_ActTrig = near_depot

[Trigger]
nickname = depot_far
Cnd_DistVec = inside, Player, 25000, 0, -52500, 7000
Act_PlayMusic = none, none, none, music_reveal_contraband

[Trigger]
nickname = prepare_depot
Cnd_DistVec = inside, Player, 25000, 0, -52500, 5000
Act_SpawnSolar = depot1
Act_SpawnSolar = depot2


[Trigger]
nickname = near_depot
Cnd_DistVec = inside, Player, 25000, 0, -52500, 2000
Act_ActTrig = remove_friend_formation
Act_NagOff = depot_waypoint
Act_NagDistLeaving = depot_battle, nag_voice, wilham, 090002, 6000, NAG_ALWAYS
Act_PlayMusic = music_omega_space, music_omega_danger, music_omega_battle

Act_SetNNObj = m2_destroy_corsairs
;Punisher_A: Catch freighters
Act_EtherComm = echo_m02, 092534, Player, DX_M01_0000_ECHO, -1,  rh_captain_head, rh_male_elite_body, comm_rh_elite
;Punisher_B: Catched!
Act_EtherComm = echo_m02, 092535, Player, DX_M01_0000_ECHO, -1,  rh_sales_head, rh_male_elite_body, comm_rh_elite

Act_ActTrig = depot_spawn_emenies

Act_ActTrig = do_not_destroy_freighters
Act_ActTrig = freighters_fall_back

[Trigger]
nickname = depot_spawn_emenies
Cnd_True = no_params
Act_SpawnShip = depot_freighter1
Act_SpawnShip = depot_freighter2
Act_SpawnFormation = depot_wingA
Act_SpawnFormation = depot_wingB
Act_ActTrig = depot_prepare_enemies
Act_ActTrig = depot_drop_formation
Act_ActTrig = depot_fighters_destroyed

[Trigger]
nickname = depot_drop_formation
Cnd_Timer = 0.2
Act_GiveObjList = depot_fighterA1, unform
Act_GiveObjList = depot_fighterB1, unform

[Trigger]
nickname = depot_prepare_enemies
Cnd_True = no_params
Act_MarkObj = depot_fighterA1, 1
Act_MarkObj = depot_fighterA2, 1
Act_MarkObj = depot_fighterA3, 1
Act_MarkObj = depot_fighterB1, 1
Act_MarkObj = depot_fighterB2, 1
Act_MarkObj = depot_fighterB3, 1
Act_SetVibeLbl = friend, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, friend, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = punisher, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, punisher, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsairs, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsairs, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = freighters_fall_back
Cnd_Timer = 2
Act_GiveObjList = depot_freighter1, fall_back
Act_GiveObjList = depot_freighter2, fall_back
Act_ActTrig = freighters_fall_back_FORCE

[Trigger]
nickname = freighters_fall_back_FORCE
Cnd_Timer = 6
Act_GiveObjList = depot_freighter1, fall_back_force
Act_GiveObjList = depot_freighter2, fall_back_force

[Trigger]
nickname = do_not_destroy_freighters
Cnd_Timer = 2
Act_ActTrig = freighters_death_FAIL

[Trigger]
nickname = freighters_death_FAIL
Cnd_Destroyed = depot_freighters, -1, ALL_IGNORE_LANDING
Act_ChangeState = FAIL, 092101

[Trigger]
nickname = depot_fighters_destroyed
Cnd_Destroyed = depot_fighters, -1, ALL_IGNORE_LANDING
Act_PlayMusic = none, none, none, music_reveal_contraband
Act_DeActTrig = do_not_destroy_freighters
Act_DeActTrig = freighters_death_FAIL
Act_Destroy = depot1
Act_Destroy = depot2
Act_GiveObjList = Player, friends_follow_player
Act_ActTrig = remove_freighters
;Wilham: All dead
Act_EtherComm = echo_m02, 092536, Player, DX_M01_0000_SHORT, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Punisher_B: I catch one
Act_EtherComm = echo_m02, 092537, Player, DX_M01_1111_echo_m02, -1,  rh_sales_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = init_BASE

[Trigger]
nickname = remove_freighters
Cnd_Timer = 1
Act_Destroy = depot_freighter1, SILENT
Act_Destroy = depot_freighter2, SILENT


[Trigger]
nickname = init_BASE
Cnd_CommComplete = DX_M01_1111_ECHO
Act_SetNNObj = m2_find_corsair_base
;Wilham: Good!  Go for it
Act_EtherComm = echo_m02, 092538, Player, DX_M01_0000_SHORT, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_ActTrig = prepare_BASE
Act_ActTrig = around_BASE
Act_NagOff = depot_battle
Act_NagDistTowards = POS, base_waypoint, nag_voice, 15000, 0, -65000, 090001, 5000
Act_PlayMusic = none, none, none, music_upcoming_action_heavy

[Trigger]
nickname = prepare_BASE
Cnd_DistVec = inside, Player, 15000, 0, -65000, 7000
Act_SpawnSolar = base
Act_SpawnSolar = platform1
Act_SpawnSolar = platform2
Act_ActTrig = BASE_set_Rep
Act_SetRep = Player, co_grp, -0.8

[Trigger]
nickname = around_BASE
Cnd_DistVec = inside, Player, 15000, 0, -65000, 3000
Act_ActTrig = init_BASE_fight
Act_Save = BASE_FIGHT_save, 040011

[Trigger]
nickname = BASE_FIGHT_save
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = INIT_BASE_save

[Trigger]
nickname = INIT_BASE_save
Cnd_Timer = 0.3
Act_RelocateShip = Player, 17000, 0, -63500, 1, 0, 0.5, 0
Act_SpawnShip = wilham, no_ol, 17050, 0, -63550, 1, 0, 0.5, 0
Act_SpawnFormation = punishers, 16950, -40, -63400, 1, 0, 0.5, 0
Act_GiveObjList = punisher1, breakform
Act_ActTrig = init_BASE_fight
Act_ActTrig = Meeting_prepare_Friends
Act_SpawnSolar = base
Act_SpawnSolar = platform1
Act_SpawnSolar = platform2
Act_SpawnShip = nag_voice

[Trigger]
nickname = init_BASE_fight
Cnd_True = no_params
Act_NagOff = base_waypoint
Act_NagDistLeaving = base_battle, nag_voice, wilham, 090002, 6000, NAG_ALWAYS
Act_ActTrig = remove_friend_formation
Act_ActTrig = spawn_first_defence
Act_ActTrig = dialog_BASEFIGHT
Act_PlayMusic = null, null, null, music_dangerous_chase

[Trigger]
nickname = spawn_first_defence
Cnd_True = no_params
Act_SpawnShip = freighter1
Act_SpawnShip = fighter1
Act_SpawnShip = fighter2
Act_SpawnShip = fighter3
Act_SpawnShip = fighter4
Act_SpawnShip = fighter5
Act_SpawnShip = fighter6
Act_ActTrig = BASE_set_Rep

[Trigger]
nickname = dialog_BASEFIGHT
Cnd_True = no_params
;Wilham: We found it!
Act_EtherComm = echo_m02, 092539, Player, DX_M01_1111_SHORT, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Punisher_A: Destroy platforms
Act_EtherComm = echo_m02, 092540, Player, DX_M01_0000_ECHO, -1,  rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = init_PLATFORM_MISSION

[Trigger]
nickname = BASE_set_Rep
Cnd_True = no_params
Act_SetVibeLbl = friend, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, friend, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = punisher, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, punisher, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsairs, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsairs, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = REINFORCE_set_Rep
Cnd_True = no_params
Act_SetVibeLbl = friend, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, friend, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = punisher_mainforce, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, punisher_mainforce, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsairs, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsairs, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = init_PLATFORM_MISSION
Cnd_CommComplete = DX_M01_1111_SHORT
Act_MarkObj = platform1, 1
Act_MarkObj = platform2, 1
Act_ActTrig = platforms_destroyed
Act_SetNNObj = m2_destroy_platforms

[Trigger]
nickname = platforms_destroyed
Cnd_Destroyed = corsair_platform, -1, ALL_IGNORE_LANDING

Act_ActTrig = init_TORPEDOES
;Punisher_A: Let's torpedo it!
Act_EtherComm = echo_m02, 092541, Player, DX_M01_1111_echo_m02, -1,  rh_captain_head, rh_male_elite_body, comm_rh_elite
;Corsair_Leader: Kill em all!
Act_EtherComm = echo_m02, 092542, Player, DX_M01_0000_ECHO, -1,  pi_pirate1_head, pl_male1_journeyman_body, comm_br_guard
Act_ActTrig = corsair_reinforcement
Act_SetNNObj = m2_destroy_corsairs

[Trigger]
nickname = corsair_reinforcement
Cnd_CommComplete = DX_M01_1111_ECHO
Act_SpawnShip = fighter7
Act_SpawnShip = fighter8
Act_SpawnShip = fighter9
Act_SpawnShip = elite1
Act_SpawnShip = elite2
Act_SpawnShip = elite3
Act_ActTrig = REINFORCE_set_Rep
Act_ActTrig = mark_all_fighters

[Trigger]
nickname = mark_all_fighters
Cnd_True = no_params
Act_MarkObj = fighter1, 1
Act_MarkObj = fighter2, 1
Act_MarkObj = fighter3, 1
Act_MarkObj = fighter4, 1
Act_MarkObj = fighter5, 1
Act_MarkObj = fighter6, 1
Act_MarkObj = fighter7, 1
Act_MarkObj = fighter8, 1
Act_MarkObj = fighter9, 1
Act_MarkObj = freighter1, 1
Act_MarkObj = elite1, 1
Act_MarkObj = elite2, 1
Act_MarkObj = elite3, 1

[Trigger]
nickname = init_TORPEDOES
Cnd_Timer = 15
;Punisher_B: Too many enemies
Act_EtherComm = echo_m02, 092543, Player, DX_M01_0000_ECHO, -1,  rh_sales_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = if_killed_do_destroy

[Trigger]
nickname = if_killed_do_destroy
Cnd_Destroyed = ships, -1, ALL_IGNORE_LANDING
Act_ActTrig = destroy_base

[ObjList] 
nickname = dock_on_pirate_base
SetPriority = ALWAYS_EXECUTE
Dock = base

; SOLARS

[MsnSolar]
nickname = base
string_id = 216120
faction = co_grp
system = om15
position = 15000, 0, -65000
archetype = miningbase_FragA_ms2
loadout = ms2_the_base
base = om15_01_Base
label = corsair_base
label = co_the_base
label = corsair
radius = 0
visit = UNKNOWABLE

[MsnSolar]
nickname = platform1
string_id = 216121
faction = co_grp
system = om15
position = 15200, 0, -64800
archetype = wplatform_ms2
loadout = ms2_the_platform
pilot = MSN01b_Weapon_Platform
label = corsair_platform
label = corsair_base
label = corsair
radius = 0
visit = UNKNOWABLE

[MsnSolar]
nickname = platform2
string_id = 216121
faction = co_grp
system = om15
position = 14800, 0, -65200
archetype = wplatform_ms2
loadout = ms2_the_platform
pilot = MSN01b_Weapon_Platform
label = corsair_base
label = corsair_platform
label = corsair
radius = 0
visit = UNKNOWABLE

;EXPLOSION

[Trigger]
nickname = destroy_base
Cnd_True = no_params
Act_ActTrig = expl_line1
Act_PlayMusic = none, none, none, music_friendly_encouragement

[Trigger]
nickname = expl_line1
Cnd_Timer = 1
Act_CallThorn = scripts\mod\m02_explode_camera1.thn, Player
Act_LightFuse = base, msn02_expl_fx01
Act_LightFuse = base, msn02_expl_fx04
Act_ActTrig = expl_line2

[Trigger]
nickname = expl_line2
Cnd_Timer = 2
Act_LightFuse = base, msn02_expl_fx02
Act_LightFuse = base, msn02_expl_fx03
Act_ActTrig = expl_line3

[Trigger]
nickname = expl_line3
Cnd_Timer = 2
Act_LightFuse = base, msn02_expl_fx01
Act_LightFuse = base, msn02_expl_fx02
Act_LightFuse = base, msn02_expl_fx03
Act_LightFuse = base, msn02_expl_fx04
Act_ActTrig = expl_final

[Trigger]
nickname = expl_final
Cnd_Timer = 2
Act_Destroy = Base, EXPLODE
Act_ActTrig = expl_complete

;END

[Trigger]
nickname = expl_complete
Cnd_Timer = 10
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_NagOff = base_battle
Act_ActTrig = dialog_Well_done

[Trigger]
nickname = dialog_Well_done
Cnd_Timer = 1
;Wilham: Well done
Act_EtherComm = echo_m02, 092544, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Punisher_A: Thank you all
Act_EtherComm = echo_m02, 092545, Player, DX_M01_1111_SHORT, -1,  rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = init_BACK_HOME

[Trigger]
nickname = init_BACK_HOME
Cnd_CommComplete = DX_M01_1111_SHORT
;Wilham: Let's go
Act_EtherComm = echo_m02, 092546, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_SetNNObj = m2_goto_biz_jumpgate
Act_RandomPop = true
Act_NagDistTowards = OBJ, goto_biz_jump, nag_voice, OM15_TO_BIZ, 090001, 3000, NAG_ALWAYS
Act_ActTrig = around_Biz_Jumpgate
Act_ActTrig = dialog_START_BACK_HOME
Act_GiveObjList = wilham, follow_player
Act_PlayMusic = music_omega_space, music_omega_danger, music_omega_battle

[Trigger]
nickname = around_Biz_Jumpgate
Cnd_DistShip = inside, Player, OM15_TO_BIZ, 3000
Act_NagOff = goto_biz_jump
Act_NagDistLeaving = jumpin_bizmark, nag_voice, OM15_TO_BIZ, 090003, 1, 10, NAG_ALWAYS
Act_PlayerCanDock = false, OM15_TO_BIZ
Act_SetNNObj = m2_jumpto_bizmark
Act_ActTrig = welcome_to_biz

[Trigger]
nickname = welcome_to_biz
Cnd_SystemEnter = rh_biz
Act_NagOff = jumpin_bizmark
Act_ActTrig = biz_welcome_wait_for_wilham

[Trigger]
nickname = biz_welcome_wait_for_wilham
Cnd_DistShip = inside, Player, Wilham, 5000
Act_SetNNObj = m2_goto_battleship
Act_GiveObjList = wilham, follow_player
Act_SpawnShip = nag_voice
Act_NagDistTowards = OBJ, goto_battleship, nag_voice, rh_biz_03, 090001, 3000, NAG_ALWAYS
Act_ActTrig = dialog_HOME_IS_FAR
Act_ActTrig = dialog_HOME_IS_CLOSE
Act_ActTrig = around_battleship

[Trigger]
nickname = dialog_START_BACK_HOME
Cnd_Timer = 20
;Player: What in a box?
Act_EtherComm = echo_player, 092547, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
;Wilham: Codes
Act_EtherComm = echo_m02, 092548, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
;Wilham: Codes (continue)
Act_EtherComm = echo_m02, 092549, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham

[Trigger]
nickname = dialog_HOME_IS_FAR
Cnd_Timer = 12
;Player: Who is Reichman?
Act_EtherComm = echo_player, 092550, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, player_body, player_commhelmet
;Wilham: He is major man
Act_EtherComm = echo_m02, 092551, Player, DX_M01_0000_ECHO, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham

[Trigger]
nickname = dialog_HOME_IS_CLOSE
Cnd_DistShip = inside, Player, rh_biz_03, 13000
;Wilham: Is too close
Act_EtherComm = echo_m02, 092552, Player, DX_M01_0000_SHORT, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham

[Trigger]
nickname = around_battleship
Cnd_DistShip = inside, Player, rh_biz_03, 3000
Act_PlayMusic = music_rh_space, music_rh_danger, music_rh_battle, music_victory, 1, true
Act_PlayerCanDock = false, rh_biz_03
Act_NagOff = goto_battleship
Act_NagDistLeaving = dock_battleship, nag_voice, rh_biz_03, 090005, 1, 10, NAG_ALWAYS
;Wilham: Dock on bship
Act_EtherComm = echo_m02, 092553, Player, DX_M01_0000_SHORT, -1, rh_wilham_head, rh_wilham_body, comm_rh_wilham
Act_ActTrig = THE_HOME

[Trigger]
nickname = THE_HOME
Cnd_BaseEnter = rh_biz_03_base
Act_AddRTC = missions\m02\reichman_msn.ini
Act_ActTrig = ms2_HOME_do_accept
Act_NagOff = dock_battleship

[Trigger]
nickname = ms2_HOME_do_accept
system = rh_biz
Cnd_MsnResponse = accept
Act_RemoveRTC = missions\m02\reichman_msn.ini
Act_PlayerCanDock = true
Act_ActTrig = loc_enter_Deck
Act_ActTrig = deck2_force_exit

[Trigger]
nickname = deck2_force_exit
Cnd_LocEnter = Deck2, rh_biz_03_base
Act_AddRTC = missions\m02\deck2_force_exit.ini

[Trigger]
nickname = loc_enter_Deck
Cnd_LocEnter = Deck, rh_biz_03_base
Act_AdjAcct = 10000
Act_ActTrig = MSN_REP_AFTER
Act_ChangeState = SUCCEED



[Trigger]
nickname = MSN_REP_BEFORE
Cnd_True = no_params
Act_SetRep = Player, co_grp, -0.8
Act_SetRep = Player, rx_grp, -0.8
Act_SetRep = Player, pi_grp, -0.8
Act_SetRep = Player, junk_grp, -0.8

[Trigger]
nickname = MSN_REP_AFTER
Cnd_True = no_params
Act_SetRep = Player, rh_grp, 0.65
Act_SetRep = Player, rx_grp, -0.65
Act_SetRep = Player, pi_grp, -0.65
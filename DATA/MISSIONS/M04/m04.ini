[Mission]
npc_ship_file = missions\m04\npcships.ini

;--------------------------------

[NPC] 
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

[ObjList] 
nickname = force_stop
Idle = no_params

[ObjList] 
nickname = unform
Break_formation = no_params

[ObjList] 
nickname = unform_n_stop
Break_formation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

[Trigger]
nickname = Jacobo_Armor
Cnd_Timer = 1
Act_Invulnerable = jacobo, true, false, 0.500000

[Trigger]
nickname = Friend_Armor
Cnd_Timer = 1
Act_Invulnerable = jacobo, true, false, 0.500000
Act_Invulnerable = hassler, true, false, 0.500000
Act_Invulnerable = alaric, true, false, 0.500000

[Trigger]
nickname = Friend_Setrep
Cnd_Timer = 0.1
Act_SetVibeLblToShip = ally, Player, REP_FRIEND_MAXIMUM
Act_SetVibeShipToLbl = Player, ally, REP_FRIEND_MAXIMUM

;--------------------------------

[NNObjective]
nickname = ms4_0_dock_on_munchen_planet
state = HIDDEN
type = rep_inst, rh_mnh, 094001, 094001, 37600, 0, -27400, rh_mnh_01_dock

[NNObjective]
nickname = ms4_00_find_vendor_in_bar
state = HIDDEN
type = ids, 094002

[NNObjective]
nickname = ms4_01_launch_to_space
state = HIDDEN
type = ids, 094003

[NNObjective]
nickname = ms4_02_find_jacobo_in_space
state = HIDDEN
type = ids, 094004

[NNObjective]
nickname = ms4_03_goto_rh_biz
state = HIDDEN
type = rep_inst, rh_mnh, 094005, 094005, 43000, 2000, 12000, mnh_to_biz

[NNObjective]
nickname = ms4_04_jumpto_rh_biz
state = HIDDEN
type = rep_inst, rh_mnh, 094006, 094006, 43000, 2000, 12000, mnh_to_biz

[NNObjective]
nickname = ms4_05_join_rh_officer_formation
state = HIDDEN
type = ids, 094007

[NNObjective]
nickname = ms4_05_follow_rh_officer
state = HIDDEN
type = ids, 094008

[NNObjective]
nickname = ms4_06_destroy_enemy_and_save_jacobo
state = HIDDEN
type = ids, 094009

[NNObjective]
nickname = ms4_07_destroy_battleship_reactor
state = HIDDEN
type = rep_inst, rh_biz, 094010, 094010, -14762, 2475, -23543, battleship_reactor
;type = navmarker, rh_biz, 021924, 021924, -14760, 2500, -23500

[NNObjective]
nickname = ms4_08_fly_to_sig8
state = HIDDEN
type = rep_inst, rh_biz, 094011, 094011, 46000, 5000, -25000, biz_to_sig8

[NNObjective]
nickname = ms4_09_jump_to_sig8
state = HIDDEN
type = rep_inst, rh_biz, 094012, 094012, 46000, 5000, -25000, biz_to_sig8

[NNObjective]
nickname = ms4_10_defend_vendor
state = HIDDEN
type = ids, 094013

[NNObjective]
nickname = ms4_11_destroy_fighters
state = HIDDEN
type = ids, 094014

[NNObjective]
nickname = ms4_12_go_to_forbes_waypoint
state = HIDDEN
type = navmarker, sig8, 094015, 094015, 1300, 700, 12500

[NNObjective]
nickname = ms4_13_destroy_corsairs
state = HIDDEN
type = ids, 094016

[NNObjective]
nickname = ms4_14_go_to_forbes_jumphole
state = HIDDEN
type = rep_inst, sig8, 094017, 094017, 40000, 0, 40000, sig8_to_for

[NNObjective]
nickname = ms4_15_wait_for_activation
state = HIDDEN
type = ids, 094018

[NNObjective]
nickname = ms4_16_be_near_jumphole
state = HIDDEN
type = rep_inst, sig8, 094019, 094019, 40000, 0, 40000, sig8_to_for

[NNObjective]
nickname = ms4_17_go_to_shipyard
state = HIDDEN
type = rep_inst, li_for, 094020, 094020, 25000, -18000, 44000, li_for_03

[NNObjective]
nickname = ms4_18_use_tradelane
state = HIDDEN
type = rep_inst, li_for, 094021, 094021, 25187, -18208, 40695, LI_FOR_F_Trade_Lane_Ring_L2_06

[NNObjective]
nickname = ms4_19_dock_on_planet_forbes
state = HIDDEN
type = rep_inst, li_for, 094022, 094022, 31888, 0, -24814, li_for_dock_ring

[NNObjective]
nickname = ms4_20_meet_hatcher_in_bar
state = HIDDEN
type = ids, 094023

;--------------------------------

[Trigger]
nickname = init_ms4
Cnd_True = no_params
InitState = ACTIVE
Act_ActTrig = ms4_first_message_not_in_space
Act_ActTrig = ms4_first_message_in_space
Act_ActTrig = ms4_first_message_on_planet
Act_ActTrig = ms4_munchen_open_forever
Act_ActTrig = ms4_first_dock_on_planet
;Act_SetNNObj = ms4_0_dock_on_munchen_planet

[Trigger]
nickname = ms4_first_message_not_in_space
Cnd_InSpace = false
Act_DeActTrig = ms4_first_message_in_space

[Trigger]
nickname = ms4_first_message_in_space
Cnd_InSpace = true
Act_ActTrig = vendor_dialog
Act_ActTrig = ms4_first_popup_dialog
Act_DeActTrig = ms4_first_message_on_planet

[Trigger]
nickname = ms4_first_message_on_planet
Cnd_LaunchComplete = Player
Act_ActTrig = vendor_dialog
Act_ActTrig = ms4_first_popup_dialog
Act_DeActTrig = ms4_first_message_in_space


[Trigger]
nickname = vendor_dialog
Cnd_Timer = 2
;Vendor: Greetings, Freelancer
Act_EtherComm = echo, 094501, Player, DX_M01_0000_SHORT, -1, sh_male4_head, pl_male3_journeyman_body
Act_ActTrig = ms4_first_popup_dialog

[Trigger]
nickname = ms4_first_popup_dialog
Cnd_CommComplete = DX_M01_0000_SHORT
Act_Popupdialog = 216047, 094401, CLOSE
Act_ActTrig = vendor_CLOSE_action

[Trigger]
nickname = vendor_CLOSE_action
Cnd_PopUpDialog = CLOSE
Act_ActTrig = init_vendor
Act_NNPath = 094001, 094001, rh_mnh_01_dock, rh_mnh

[Trigger]
nickname = ms4_munchen_open_forever
Cnd_True = no_params
repeatable = true
Act_SetVibeOfferBaseHack = rh_mnh_01_dock

;-------------------------

[Trigger]
nickname = ms4_first_dock_on_planet
Cnd_LocEnter = Planetscape, rh_mnh_01_base
Act_SetNNObj = ms4_00_find_vendor_in_bar
Act_ActTrig = ms4_create_vendor

;-------------------------

[Trigger]
nickname = ms4_create_vendor
system = rh_mnh
Cnd_LocEnter = Bar, rh_mnh_01_base
Act_AddRTC = missions\m04\vendor_msn.ini
Act_ActTrig = ms4_do_accept
repeatable = true

[Trigger]
nickname = ms4_do_accept
system = rh_mnh
Cnd_MsnResponse = accept
Act_DeactTrig = ms4_create_vendor
Act_DeactTrig = ms4_create_msn
Act_RemoveRTC = missions\m04\vendor_msn.ini
Act_PlayerCanDock = false

Act_DeActTrig = ms4_first_message_in_space
Act_DeActTrig = ms4_first_message_not_in_space
Act_DeActTrig = ms4_first_message_on_planet
Act_DeActTrig = ms4_first_dock_on_planet

Act_SetNNObj = ms4_01_launch_to_space
Act_SetTitle = 025053
Act_SetOffer = 025054
Act_ActTrig = ms4_launch_create_outcast
Act_ActTrig = ms4_launch_complete

Act_ActTrig = MSN_REP_BEFORE

;debug
;Act_SetShipAndLoadout = rh_fighter, lod_m04_player

;------------ NPCS

[NPC] 
nickname = npc_outcast
affiliation = fc_uk_grp
npc_ship_arch = ms4_outcast_ship
space_costume = sh_male4_head, pl_male3_journeyman_body, comm_ge_generic2
individual_name = 216047

[MsnShip]
nickname = jacobo
NPC = npc_outcast
jumper = true
label = ally
position = 36291, 30, -27289
orientation = 1, 0, 2, 0

[NPC] 
nickname = npc_hassler
affiliation = fc_uk_grp
npc_ship_arch = ms4_hassler_ship
individual_name = 216049

[MsnShip]
nickname = hassler
NPC = npc_hassler
jumper = true
label = ally
label = ally_fighter

[NPC] 
nickname = npc_alaric
affiliation = fc_uk_grp
npc_ship_arch = ms4_alaric_ship
space_costume = rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
individual_name = 216000

[MsnShip]
nickname = alaric
NPC = npc_alaric
jumper = true
label = ally
label = ally_fighter

;-----------------

[Trigger]
nickname = ms4_launch_create_outcast
Cnd_InSpace = true
Act_SpawnShip = jacobo

[Trigger]
nickname = ms4_launch_complete
Cnd_LaunchComplete = Player
Act_MarkObj = jacobo, 1
Act_ActTrig = Jacobo_Armor
Act_ActTrig = Friend_Setrep
Act_SetNNObj = ms4_02_find_jacobo_in_space
Act_ActTrig = ms4_space_msg_hello
Act_EnableManeuver = formation, false

[Trigger]
nickname = ms4_space_msg_hello
Cnd_Timer = 2
;Jacobo: Hello, Trent. I'am waiting for you
Act_EtherComm = echo, 094502, Player, DX_M01_0000_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
Act_ActTrig = jacobo_join_munchen_player_formation

[Trigger]
nickname = jacobo_join_munchen_player_formation
Cnd_CommComplete = DX_M01_0000_SHORT
Act_GiveObjList = jacobo, follow_player
Act_ActTrig = ms4_goto_bizmark_dialog
Act_ActTrig = around_bizmark_gate
Act_SpawnShip = nag_voice
Act_NagDistTowards = OBJ, goto_bizmark_gate, nag_voice, MNH_TO_BIZ, 090001, 3000, NAG_ALWAYS
Act_SetNNObj = ms4_03_goto_rh_biz

[Trigger]
nickname = ms4_goto_bizmark_dialog
Cnd_Timer = 4
;Player: Why you think rheinlanders not around bizmark gate
Act_EtherComm = echo_player, 094503, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Jacobo: Friends help me with it
Act_EtherComm = echo, 094504, Player, DX_M01_0000_ECHO, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
;Jacobo: Can you send data if i will die?
Act_EtherComm = echo, 094505, Player, DX_M01_0000_ECHO, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
;Player: Yes, i can
Act_EtherComm = echo_player, 094506, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Jacobo: Good. I will send data to you
Act_EtherComm = echo, 094507, Player, DX_M01_0000_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
;Player: Accepted
Act_EtherComm = echo_player, 094508, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03


[Trigger]
nickname = around_bizmark_gate
Cnd_DistShip = inside, Player, mnh_to_biz, 3000
Act_NagOff = goto_bizmark_gate
Act_NagDistLeaving = jumpin_bizmark, nag_voice, MNH_TO_BIZ, 090003, 1, 10, NAG_ALWAYS
Act_SetNNObj = ms4_04_jumpto_rh_biz
Act_PlayerCanDock = False, MNH_TO_BIZ
;Jacobo: Faster! Jump!
Act_EtherComm = echo, 094509, Player, DX_M01_0000_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
Act_ActTrig = welcome_to_bizmark
;---


[Trigger]
nickname = welcome_to_bizmark
Cnd_SystemEnter = rh_biz
Act_NagOff = jumpin_bizmark
Act_ActTrig = bizmark_welcome_wait_for_outcast
Act_ActTrig = jump_complete
Act_RandomPop = False

[Trigger]
nickname = bizmark_welcome_wait_for_outcast
Cnd_DistShip = inside, Player, jacobo, 5000
Act_SpawnShip = nag_voice
Act_ActTrig = OFFICER_SCENE
Act_EnableManeuver = formation, false
Act_GiveObjList = jacobo, unform_n_stop

[Trigger]
nickname = Jump_biz_complete
Cnd_JumpInComplete = Player
Act_GiveObjList = Player, force_stop
Act_CallThorn = scripts\null_camera.thn, Player

[Trigger]
nickname = OFFICER_SCENE
Cnd_Timer = 0.1
Act_PlayMusic = none, none, none, music_danger
Act_GiveObjList = Player, force_stop
Act_CallThorn = scripts\null_camera.thn, Player
Act_ActTrig = BEGIN_OFFICER_SCENE


;-----------RH_FLEET_POINT_1------------
 
[NPC] 
nickname = npc_rh_elite
affiliation = rh_grp
npc_ship_arch = ms4_rh_elite_ship

[NPC] 
nickname = npc_rh_fighter
affiliation = rh_grp
npc_ship_arch = ms4_rh_fighter_ship

[MsnShip]
nickname = p1_rh_elite_1
NPC = npc_rh_elite
label = officer
random_name = true

[MsnShip]
nickname = p1_rh_elite_2
NPC = npc_rh_elite
label = officer
random_name = true

[MsnShip]
nickname = p1_rh_elite_3
NPC = npc_rh_elite
label = point1
random_name = true

[MsnShip]
nickname = p1_rh_elite_4
NPC = npc_rh_elite
label = officer
random_name = true

[MsnShip]
nickname = p1_rh_elite_5
NPC = npc_rh_elite
label = officer
random_name = true

[MsnFormation]
nickname = ms4_bizgate_formation
formation = ms4_officer_wing
ship = p1_rh_elite_1
ship = p1_rh_elite_2
ship = p1_rh_elite_3
ship = p1_rh_elite_4
ship = p1_rh_elite_5

[ObjList]
nickname = officer_goto_player
GotoVec = goto_no_cruise, -34200, 1000, -26900, 200, false

[ObjList]
nickname = officer_goto_player_real
GotoShip = goto_no_cruise, Player, 200, false

[Trigger]
nickname = officer_scene_setrep
Cnd_True = no_params
Act_SetVibeLbl = ally, officer, REP_NEUTRAL
Act_SetVibeLbl = officer, ally, REP_NEUTRAL
Act_SetVibeLblToShip = officer, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, officer, REP_NEUTRAL

[Trigger]
nickname = officer_scene_setrep_enemy
Cnd_True = no_params
Act_SetVibeLbl = ally, officer, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = officer, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = officer, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, officer, REP_HOSTILE_MAXIMUM

;-------======================---------

[Trigger]
nickname = BEGIN_OFFICER_SCENE
Cnd_Timer = 1
Act_SpawnFormation = ms4_bizgate_formation, -33000, 1000, -26900, 0.5, 0, 0.5, 0
Act_CallThorn = scripts\mod\m04_officer_scene.thn, p1_rh_elite_1
Act_GiveObjList = jacobo, unform_n_stop
Act_GiveObjList = Player, force_stop
Act_GiveObjList = p1_rh_elite_1, officer_goto_player
Act_ActTrig = officer_scene_setrep
Act_ActTrig = SPAWN_KELN_SHIPS
Act_ActTrig = keln_ships_setrep
Act_ActTrig = OFFICER_SCENE_STOP_CAMERA
Act_ActTrig = BIZ_JUMP_PLAYER_POINT
Act_EnableManeuver = formation, false

[Trigger]
nickname = BIZ_JUMP_PLAYER_POINT
Cnd_Timer = 1
Act_RelocateShip = Player, -34200, 1000, -26900, 0.5, 0, -0.5, 0
Act_RelocateShip = jacobo, -34230, 990, -26930, 0.5, 0, -0.5, 0
Act_GiveObjList = p1_rh_elite_1, officer_goto_player_real
Act_ActTrig = OFFICER_SCENE_WRONG_LEAVING

[Trigger]
nickname = OFFICER_SCENE_WRONG_LEAVING
Cnd_DistVec = outside, Player, -34200, 1000, -26900, 500
Act_ChangeState = FAIL, 094101 ; going away failure

[Trigger]
nickname = OFFICER_SCENE_STOP_CAMERA
Cnd_Timer = 10
Act_RevertCam = no_params
Act_ActTrig = OFFICER_DIALOG_BEFORE_CHOICE

[Trigger]
nickname = OFFICER_DIALOG_BEFORE_CHOICE
Cnd_Timer = 1
;Officer: Stay on your positions! Right now!
Act_EtherComm = echo, 094510, Player, DX_M01_0000_SHORT, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
;Player: Trapped...
Act_EtherComm = echo_player, 094511, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Officer: Listen to me! You are under arrest! Follow us or die!
Act_EtherComm = echo, 094512, Player, DX_M01_0000_ECHO, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
;Jacobo: Trent, I think we have no choice...
Act_EtherComm = echo, 094513, Player, DX_M01_1111_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
Act_ActTrig = INIT_TRAP_CHOICE

[Trigger]
nickname = INIT_TRAP_CHOICE
Cnd_CommComplete = DX_M01_1111_SHORT
Act_SetNNObj = ms4_05_join_rh_officer_formation
Act_MarkObj = p1_rh_elite_1, 1
Act_ActTrig = TRAP_CHOICE_TIMER_SOFT
Act_ActTrig = TRAP_CHOICE_FORMATION
Act_EnableManeuver = formation, true

[Trigger]
nickname = TRAP_CHOICE_TIMER_SOFT
Cnd_Timer = 10
;Officer: Listen to me! You are under arrest! Follow us or die!
Act_EtherComm = echo, 094514, Player, DX_M01_0000_ECHO, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = TRAP_CHOICE_TIMER_HARD

[Trigger]
nickname = TRAP_CHOICE_TIMER_HARD
Cnd_Timer = 15
Act_ChangeState = FAIL, 094102 ; Formation not created

[Trigger]
nickname = TRAP_CHOICE_FORMATION
Cnd_PlayerManeuver = Formation, p1_rh_elite_1
Act_LockManeuvers = True
Act_MarkObj = p1_rh_elite_1, 0
Act_SetNNObj = ms4_05_follow_rh_officer
Act_GiveObjList = jacobo, follow_player
Act_DeActTrig = OFFICER_SCENE_WRONG_LEAVING
Act_DeActTrig = TRAP_CHOICE_TIMER_SOFT
Act_DeActTrig = TRAP_CHOICE_TIMER_HARD
Act_ActTrig = TRAP_LETSGO_DIALOG

[Trigger]
nickname = TRAP_LETSGO_DIALOG
Cnd_True = no_params
;Jacobo: We will follow you, officer
Act_EtherComm = echo, 094515, Player, DX_M01_1111_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
;Officer: Good choice
Act_EtherComm = echo, 094516, Player, DX_M01_0000_ECHO, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_ActTrig = ROAD_TO_KELN

;-------======================---------
;point 1
;-16500, 2500, -23100
;point 2
;-15100, 2500, -23100
[ObjList]
nickname = officer_goto_keln_first_point
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_cruise, -16500, 2500, -23100, 100, false

[ObjList]
nickname = officer_goto_keln_second_point
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, -15100, 2500, -23100, 100, false


[NPC] 
nickname = npc_rh_cruiser
affiliation = rh_grp
npc_ship_arch = ms4_rh_cruiser_ship
individual_name = 217144

[NPC] 
nickname = npc_rh_bship
affiliation = rh_grp
npc_ship_arch = ms4_rh_battleship_ship
individual_name = 094202

[NPC] 
nickname = npc_rh_gunboat
affiliation = rh_grp
npc_ship_arch = ms4_rh_gunboat_ship
individual_name = 217143

[MsnShip]
nickname = rh_gunboat_1
NPC = npc_rh_gunboat
label = keln

[MsnShip]
nickname = rh_gunboat_2
NPC = npc_rh_gunboat
label = keln

[MsnShip]
nickname = rh_gunboat_3
NPC = npc_rh_gunboat
label = keln

[MsnShip]
nickname = rh_cruiser_1
NPC = npc_rh_cruiser
label = keln

[MsnShip]
nickname = rh_cruiser_2
NPC = npc_rh_cruiser
label = keln

[MsnShip]
nickname = rh_battleship_1
NPC = npc_rh_bship
label = keln

[Trigger]
nickname = SPAWN_KELN_SHIPS
Cnd_True = no_params
Act_SpawnShip = rh_battleship_1, no_ol, -15000, 2500, -23600, 0.5, 0, 0.5, 0
Act_SpawnShip = rh_cruiser_1, no_ol, -15700, 2500, -23400, 0.75, 0, 0.75, 0
Act_SpawnShip = rh_cruiser_2, no_ol, -15000, 2500, -23400, 0.75, 0, 0.75, 0
Act_SpawnShip = rh_gunboat_1, no_ol, -14800, 2500, -22900, 1, 0, 0, 0
Act_SpawnShip = rh_gunboat_2, no_ol, -15000, 2500, -22900, 1, 0, 0, 0
Act_SpawnShip = rh_gunboat_3, no_ol, -15200, 2500, -22900, 1, 0, 0, 0

[Trigger]
nickname = keln_ships_setrep
Cnd_Timer = 0.1
Act_SetVibeLbl = ally, keln, REP_NEUTRAL
Act_SetVibeLbl = keln, ally, REP_NEUTRAL
Act_SetVibeLblToShip = keln, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, keln, REP_NEUTRAL

[Trigger]
nickname = keln_ships_setrep_enemy
Cnd_Timer = 0.1
Act_SetVibeLbl = ally, keln, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = keln, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = keln, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, keln, REP_HOSTILE_MAXIMUM
;-------======================---------


[Trigger]
nickname = ROAD_TO_KELN
Cnd_CommComplete = DX_M01_1111_SHORT
Act_GiveObjList = p1_rh_elite_1, officer_goto_keln_first_point
Act_ActTrig = ROAD_TO_KELN_DIALOG
Act_ActTrig = NEAR_KELN_POINT_1
Act_ActTrig = NEAR_KELN_POINT_2

[Trigger]
nickname = ROAD_TO_KELN_DIALOG
Cnd_Timer = 20
;Jacobo: Why we arrested?
Act_EtherComm = echo, 094517, Player, DX_M01_1111_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
;Officer: Shut up and keep moving!
Act_EtherComm = echo, 094518, Player, DX_M01_0000_ECHO, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
;Player: That no good...
Act_EtherComm = echo_player, 094519, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03

[Trigger]
nickname = NEAR_KELN_POINT_1
Cnd_DistVec = inside, p1_rh_elite_1, -16500, 2500, -23100, 500
Act_GiveObjList = p1_rh_elite_1, officer_goto_keln_second_point

[Trigger]
nickname = NEAR_KELN_POINT_2
Cnd_DistVec = inside, p1_rh_elite_1, -15300, 2500, -23100, 500
Act_ActTrig = NEAR_KELN

;SAVE THERE

[Trigger]
nickname = NEAR_KELN
Cnd_True = no_params
Act_GiveObjList = pl_rh_elite_1, force_stop
;Officer: We are here. Reichman, what we do now?
Act_EtherComm = echo, 094520, Player, DX_M01_0000_ECHO, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
;Reichman: Good. Save outcast and destroy freelancer.
Act_EtherComm = echo, 094521, Player, DX_M01_1111_ECHO, -1, rh_reichman_head, rh_reichman_body, prop_neuralnet_A
Act_ActTrig = BEFORE_KELN_BATTLE

[Trigger]
nickname = BEFORE_KELN_BATTLE
Cnd_CommComplete = DX_M01_1111_ECHO
Act_Save = KELN_BATTLE_SAVE, 040015
Act_ActTrig = INIT_KELN_BATTLE

[Trigger]
nickname = KELN_BATTLE_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = KELN_BATTLE_SAVE_spawn_units



[MsnSolar]
nickname = battleship_reactor
string_id = 094201
system = rh_biz
position = -14762, 2475, -23543
orientation = 0.5, 0, 0.5, 0
archetype = msn4_rh_battleship_shield
reputation = rh_grp


[Trigger]
nickname = KELN_BATTLE_SAVE_spawn_units
Cnd_Timer = 0.1
Act_RelocateShip = Player, -15400, 2530, -23100, 0.5, 0, -0.5, 0
Act_SpawnShip = jacobo, no_ol, -15400, 2530, -23150, 0.5, 0, -0.5, 0
Act_SpawnShip = nag_voice
Act_ActTrig = Jacobo_Armor
Act_SpawnFormation = ms4_bizgate_formation, -15300, 2500, -23100, 0.5, 0, -0.5, 0
Act_ActTrig = SPAWN_KELN_SHIPS
Act_ActTrig = officer_scene_setrep
Act_ActTrig = keln_ships_setrep
Act_ActTrig = INIT_KELN_BATTLE

[Trigger]
nickname = INIT_KELN_BATTLE
Cnd_Timer = 0.1
Act_Invulnerable = rh_battleship_1, true
Act_SpawnShip = hassler, no_ol, -13500, 2600, -23500, 0.4, 0, 0.6, 0
Act_SpawnShip = alaric, no_ol, -13550, 2610, -23500, 0.4, 0, 0.6, 0
Act_GiveObjList = hassler, ol_KELN_BATTLE_join_player
Act_GiveObjList = alaric, ol_KELN_BATTLE_join_player
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_MarkObj = hassler, 1
Act_MarkObj = alaric, 1
Act_MarkObj = jacobo, 1
Act_ActTrig = Hassler_Camera
Act_GiveObjList = p1_rh_elite_1, unform
Act_GiveObjList = p1_rh_elite_2, unform
Act_GiveObjList = p1_rh_elite_3, unform
Act_GiveObjList = p1_rh_elite_4, unform
Act_GiveObjList = p1_rh_elite_5, unform
Act_GiveObjList = Player, unform
Act_LockManeuvers = False
Act_EnableManeuver = formation, false
Act_ActTrig = KELN_BATTLE_jacobo_reform
Act_PlayMusic = none, none, none, music_danger

[Trigger]
nickname = KELN_BATTLE_jacobo_reform
Cnd_Timer = 0.1
Act_GiveObjList = Jacobo, follow_player

[Trigger]
nickname = Hassler_Camera
Cnd_Timer = 1
Act_PlayMusic = none, none, none, music_reveal_enemy_position_of_strength
Act_CallThorn = scripts\mod\m04_hassler_help.thn, hassler
Act_ActTrig = Hassler_Camera_Force_Revert
Act_ActTrig = Hassler_Camera_Music_Change

[Trigger]
nickname = Hassler_Camera_Music_Change
Cnd_Timer = 35
Act_PlayMusic = none, none, none, music_dangerous_chase

[Trigger]
nickname = Hassler_Camera_Force_Revert
Cnd_Timer = 6
Act_RevertCam = no_params
Act_ActTrig = KELN_BATTLE_first_dialog
Act_SetVibeLbl = ally_fighter, keln, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = keln, ally_fighter, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = ally_fighter, officer, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = officer, ally_fighter, REP_HOSTILE_MAXIMUM


[ObjList]
nickname = ol_KELN_BATTLE_join_player
GotoShip = goto_no_cruise, Player, 700, true

[Trigger]
nickname = KELN_BATTLE_first_dialog
Cnd_Timer = 1
Act_NagDistLeaving = keln_battle, nag_voice, hassler, 090002, 6000, NAG_ALWAYS
;Hassler: Stop it right now!
Act_EtherComm = echo, 094522, Player, DX_M01_0000_SHORT, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Alaric: Trent, we need help
Act_EtherComm = echo, 094523, Player, DX_M01_1111_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_ActTrig = KELN_BATTLE_invite_trent

[Trigger]
nickname = KELN_BATTLE_invite_trent
Cnd_CommComplete = DX_M01_0000_SHORT
Act_SetNNObj = ms4_06_destroy_enemy_and_save_jacobo
Act_ActTrig = keln_ships_setrep_enemy
Act_ActTrig = officer_scene_setrep_enemy
Act_ActTrig = KELN_BATTLE_reichman_dialog
Act_ActTrig = KELN_BATTLE_jacobo_warnings
Act_ActTrig = KELN_BATTLE_generator_boom
Act_ActTrig = KELN_BATTLE_reinforce

[Trigger]
nickname = KELN_BATTLE_reinforce
Cnd_Destroyed = officer, -1, ALL_IGNORE_LANDING
Act_SpawnShip = keln_reinforce_f1
Act_SpawnShip = keln_reinforce_f2
Act_SpawnShip = keln_reinforce_f3
Act_SpawnShip = keln_reinforce_f4
Act_SpawnShip = keln_reinforce_f5
Act_SpawnShip = keln_reinforce_f6
Act_ActTrig = keln_ships_setrep_enemy
Act_ActTrig = officer_scene_setrep_enemy

[Trigger]
nickname = KELN_BATTLE_reichman_dialog
Cnd_Timer = 3
;Reichman: Hassler, you are insane! Stop it right now!
Act_EtherComm = echo, 094524, Player, DX_M01_0000_ECHO, -1, rh_reichman_head, rh_reichman_body, prop_neuralnet_A

[Trigger]
nickname = KELN_BATTLE_jacobo_warnings
Cnd_Timer = 10
;Jacobo: My ship is rust. We need fight faster
Act_EtherComm = echo, 094525, Player, DX_M01_0000_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b
;Hassler: I have plan. Just wait and keep self alive
Act_EtherComm = echo, 094526, Player, DX_M01_1111_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = KELN_BATTLE_jacobo_warnings_end

[Trigger]
nickname = KELN_BATTLE_jacobo_warnings_end
Cnd_CommComplete = DX_M01_1111_ECHO
Act_ActTrig = KELN_BATTLE_init_REACTOR

[Trigger]
nickname = KELN_BATTLE_init_REACTOR
Cnd_Timer = 2
Act_ActTrig = REACTOR_init

;----------------------



[MsnShip]
nickname = keln_reinforce_f1
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 30, Player, 1000

[MsnShip]
nickname = keln_reinforce_f2
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 90, Player, 1000

[MsnShip]
nickname = keln_reinforce_f3
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 150, Player, 1000

[MsnShip]
nickname = keln_reinforce_f4
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 200, Player, 1000

[MsnShip]
nickname = keln_reinforce_f5
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 250, Player, 1000

[MsnShip]
nickname = keln_reinforce_f6
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 310, Player, 1000

;----------------------


[Trigger]
nickname = REACTOR_init
Cnd_True = no_params
Act_CallThorn = scripts\mod\m04_reactor_fx.thn, Player
Act_SpawnSolar = battleship_reactor
Act_LightFuse = rh_battleship_1, rbs_port_shield_damage_silent
Act_SetVibe = battleship_reactor, Player, REP_HOSTILE_MAXIMUM
Act_SetVibe = Player, battleship_reactor, REP_HOSTILE_MAXIMUM
Act_ActTrig = REACTOR_THE_MISSILE

[Trigger]
nickname = REACTOR_THE_MISSILE
Cnd_True = no_params
;Act_PlayMusic = none, none, none, music_upcoming_action_heavy
Act_LightFuse = rh_battleship_1, rbs_star_shield_missile
Act_PlaySoundEffect = mod_impact_torpedo
Act_ActTrig = REACTOR_THE_BOOM

[Trigger]
nickname = REACTOR_THE_BOOM
Cnd_Timer = 0.3
Act_LightFuse = rh_battleship_1, rbs_star_shield_damage
Act_PlaySoundEffect = csx_large02
Act_ActTrig = REACTOR_init_mission

[Trigger]
nickname = REACTOR_init_mission
Cnd_Timer = 4
Act_RevertCam = no_params
Act_SetNNObj = ms4_07_destroy_battleship_reactor
Act_ActTrig = REACTOR_after_boom_dialog
Act_ActTrig = REACTOR_destroyed

[Trigger]
nickname = REACTOR_destroyed
Cnd_Destroyed = battleship_reactor
Act_LightFuse = rh_battleship_1, r_battleship_body_fuse
Act_ActTrig = REACTOR_finally_destroyed

[Trigger]
nickname = REACTOR_after_boom_dialog
Cnd_Timer = 0.5
;Hassler: Destroy reactor, now!
Act_EtherComm = echo, 094527, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Alaric: And do it faster!
Act_EtherComm = echo, 094528, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric

[Trigger]
nickname = REACTOR_finally_destroyed
Cnd_Destroyed = rh_battleship_1
Act_NagOff = keln_battle
Act_ActTrig = REACTOR_complete_dialog
Act_ActTrig = init_FLY_TO_SIG8

[Trigger]
nickname = init_FLY_TO_SIG8
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_anticipation_more_forboding
Act_ActTrig = officer_scene_setrep
Act_ActTrig = keln_ships_setrep
Act_SetNNObj = ms4_08_fly_to_sig8
Act_NagDistTowards = OBJ, goto_jump_sig8, nag_voice, biz_to_sig8, 090001, 4000
Act_GiveObjList = Player, command_follow_player
;Hassler: Reactor destroyed. Goto sig8 jumpgate!
Act_EtherComm = echo, 094529, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = FLY_TO_SIG8_make_enemy_again
Act_ActTrig = FLY_TO_SIG8_remove_keln_enemy
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog
Act_DeActTrig = KELN_BATTLE_reinforce
Act_ActTrig = around_SIG8_gate

[ObjList]
nickname = command_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic, jacobo, hassler, alaric

[Trigger]
nickname = FLY_TO_SIG8_make_enemy_again
Cnd_Timer = 30
Act_ActTrig = keln_ships_setrep_enemy
Act_ActTrig = officer_scene_setrep_enemy

[Trigger]
nickname = FLY_TO_SIG8_remove_keln_enemy
Cnd_DistShip = outside, Player, rh_biz_05, 10000
Act_Destroy = keln_reinforce_f1, SILENT
Act_Destroy = keln_reinforce_f2, SILENT
Act_Destroy = keln_reinforce_f3, SILENT
Act_Destroy = keln_reinforce_f4, SILENT
Act_Destroy = keln_reinforce_f5, SILENT
Act_Destroy = keln_reinforce_f6, SILENT
Act_Destroy = p1_rh_elite_1, SILENT
Act_Destroy = p1_rh_elite_2, SILENT
Act_Destroy = p1_rh_elite_3, SILENT
Act_Destroy = p1_rh_elite_4, SILENT
Act_Destroy = p1_rh_elite_5, SILENT
Act_Destroy = rh_battleship_1, SILENT
Act_Destroy = rh_cruiser_1, SILENT
Act_Destroy = rh_cruiser_2, SILENT
Act_Destroy = rh_gunboat_1, SILENT
Act_Destroy = rh_gunboat_2, SILENT
Act_Destroy = rh_gunboat_3, SILENT

[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog
Cnd_DistShip = outside, Player, rh_biz_05, 6000
;Player: Hassler, why they wants to kill me?
Act_EtherComm = echo_player, 094530, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Hassler: Reason pt 1
Act_EtherComm = echo, 094531, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Hassler: Reason pt 2
Act_EtherComm = echo, 094532, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Hassler: Reason pt 3
Act_EtherComm = echo, 094533, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Hassler: We need escape from Rheinland
Act_EtherComm = echo, 094534, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Player: No problem - now we going to Liberty
Act_EtherComm = echo_player, 094535, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Hassler: I haw an idea
Act_EtherComm = echo, 094536, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Alaric: Okey, what's next?
Act_EtherComm = echo, 094537, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric

[Trigger]
nickname = around_SIG8_gate
Cnd_DistShip = inside, Player, biz_to_sig8, 3000
Act_NagOff = goto_jump_sig8
Act_NagDistLeaving = jumpin_sig8, nag_voice, biz_to_sig8, 090003, 1, 10, NAG_ALWAYS
Act_SetNNObj = ms4_09_jump_to_sig8
Act_PlayerCanDock = False, biz_to_sig8
;Alaric: Jump faster!
Act_EtherComm = echo, 094538, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_ActTrig = welcome_to_sig8

;---

[MsnShip]
nickname = fleet_cruiser_1
NPC = npc_rh_cruiser
label = fleet

[MsnShip]
nickname = fleet_cruiser_2
NPC = npc_rh_cruiser
label = fleet

[MsnShip]
nickname = fleet_elite_1
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_elite_2
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_elite_3
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_elite_4
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_1
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_2
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_3
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_4
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_5
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_6
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[ObjList]
nickname = follow_hassler
SetPriority = ALWAYS_EXECUTE
follow = hassler

;---


[Trigger]
nickname = welcome_to_sig8
Cnd_SystemEnter = sig8
Act_NagOff = jumpin_sig8
Act_ActTrig = sig8_wait_for_team
Act_RandomPop = False

[Trigger]
nickname = sig8_wait_for_team
Cnd_DistShip = inside, Player, jacobo, 5000
Act_PlayMusic = none, none, none, music_rh_battle
Act_SpawnShip = nag_voice
Act_NagDistLeaving = sig8_welcome_battle, nag_voice, hassler, 090002, 6000, NAG_ALWAYS
Act_ActTrig = sig8_spawn_enemy_fleet
Act_GiveObjList = fleet_cruiser_1, goto_player
Act_GiveObjList = fleet_cruiser_2, goto_player
Act_ActTrig = sigma8_welcome_setrep_enemy
Act_SetNNObj = ms4_11_destroy_fighters
Act_GiveObjList = hassler, unform
Act_GiveObjList = alaric, follow_hassler
Act_GiveObjList = jacobo, follow_player
Act_MarkObj = jacobo, 1
Act_MarkObj = hassler, 1
Act_MarkObj = alaric, 1
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_ActTrig = SIG8_WELCOME_dialog

[Trigger]
nickname = sig8_spawn_enemy_fleet
Cnd_True = no_params
Act_SpawnShip = fleet_cruiser_1, no_ol, -19500, 0, 17000, 0, 0, 0.5, 0
Act_SpawnShip = fleet_cruiser_2, no_ol, -18500, 0, 17000, 0, 0, 1, 0
Act_SpawnShip = fleet_elite_1, no_ol, -18000, 0, 17500, 0.25, 0, 0.75, 0
Act_SpawnShip = fleet_elite_2, no_ol, -18000, 0, 17600, 0.25, 0, 0.75, 0
Act_SpawnShip = fleet_elite_3, no_ol, -18100, 0, 17500, 0.25, 0, 0.75, 0
Act_SpawnShip = fleet_elite_4, no_ol, -17900, 0, 17600, 0.25, 0, 0.75, 0
Act_SpawnShip = fleet_fighter_1, no_ol, -20000, 0, 17200, 0, 0, 1, 0
Act_SpawnShip = fleet_fighter_2, no_ol, -19900, 0, 17200, 0, 0, 1, 0
Act_SpawnShip = fleet_fighter_3, no_ol, -19800, 0, 17200, 0, 0, 1, 0
Act_SpawnShip = fleet_fighter_4, no_ol, -19700, 0, 17200, 0, 0, 1, 0
Act_SpawnShip = fleet_fighter_5, no_ol, -19600, 0, 17200, 0, 0, 1, 0
Act_SpawnShip = fleet_fighter_6, no_ol, -19500, 0, 17200, 0, 0, 1, 0
Act_MarkObj = fleet_elite_1, 1
Act_MarkObj = fleet_elite_2, 1
Act_MarkObj = fleet_elite_3, 1
Act_MarkObj = fleet_elite_4, 1
Act_MarkObj = fleet_fighter_1, 1
Act_MarkObj = fleet_fighter_2, 1
Act_MarkObj = fleet_fighter_3, 1
Act_MarkObj = fleet_fighter_4, 1
Act_MarkObj = fleet_fighter_5, 1
Act_MarkObj = fleet_fighter_6, 1
Act_ActTrig = sigma8_welcome_setrep_enemy

[Trigger]
nickname = SIG8_WELCOME_dialog
Cnd_Timer = 0.2
;Hassler: Destroy Fighters
Act_EtherComm = echo, 094539, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Commander: Stay on your positions! Right now!
Act_EtherComm = echo, 094540, Player, DX_M01_0000_ECHO, -1, rh_sales_head, rh_male_guard_body, prop_neuralnet_d
;Hassler: Destroy Fighters
Act_EtherComm = echo, 094541, Player, DX_M01_1111_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = SIG8_JACOBO_DESTROYING

[Trigger]
nickname = SIG8_JACOBO_DESTROYING
Cnd_CommComplete = DX_M01_1111_ECHO
Act_ActTrig = SIG8_JACOBO_DESTROYING_dialog

[Trigger]
nickname = SIG8_JACOBO_DESTROYING_dialog
Cnd_Timer = 20
Act_GiveObjList = jacobo, jacobo_goto_sun
;Jacobo: I am damaged! Arrgghh (boom)
Act_EtherComm = echo, 094542, Player, DX_M01_0000_SHORT, -1, sh_male4_head, pl_male3_journeyman_body, prop_neuralnet_b 
Act_LightFuse = jacobo, intermed_damage_smallship01
Act_LightFuse = jacobo, intermed_damage_smallship02
Act_LightFuse = jacobo, intermed_damage_smallship03
Act_ActTrig = SIG8_JACOBO_DESTROYING_scene

[Trigger]
nickname = SIG8_JACOBO_DESTROYING_scene
Cnd_CommComplete = DX_M01_0000_SHORT
Act_LightFuse = jacobo, intermed_damage_smallship01
Act_LightFuse = jacobo, intermed_damage_smallship02
Act_LightFuse = jacobo, intermed_damage_smallship03
Act_CallThorn = scripts\mod\m04_jacobo_death.thn, jacobo
Act_ActTrig = SIG8_JACOBO_THE_DESTROY

[Trigger]
nickname = SIG8_JACOBO_THE_DESTROY
Cnd_Timer = 2
Act_Destroy = jacobo
Act_PlayMusic = none, none, none, music_solemn_and_grave
Act_ActTrig = SIG8_JACOBO_scene_ends
Act_ActTrig = SIG8_JACOBO_scene_change_music

[Trigger]
nickname = SIG8_JACOBO_scene_change_music
Cnd_Timer = 21
Act_PlayMusic = none, none, none, music_rh_battle

[Trigger]
nickname = SIG8_JACOBO_scene_ends
Cnd_Timer = 2
Act_RevertCam = no_params
Act_ActTrig = SIG8_FIGHTERS_DEFEATED
Act_ActTrig = SIG8_FIGHTERS_A_LOT_DEFEATED
Act_ActTrig = SIG8_JACOBO_dead_sad_dialog

[ObjList]
nickname = jacobo_goto_sun
BreakFormation = no_params
GotoShip = goto_no_cruise, sig8_sun, 200, false

[Trigger]
nickname = sigma8_welcome_setrep_neutral
Cnd_True = no_params
Act_SetVibeLbl = ally, fleet, REP_NEUTRAL
Act_SetVibeLbl = fleet, ally, REP_NEUTRAL
Act_SetVibeLblToShip = fleet, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, fleet, REP_NEUTRAL

[Trigger]
nickname = sigma8_welcome_setrep_enemy
Cnd_True = no_params
Act_SetVibeLbl = ally, fleet, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = fleet, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = fleet, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, fleet, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = SIG8_JACOBO_dead_sad_dialog
Cnd_Timer = 2
;Alaric: Jacobo dead...
Act_EtherComm = echo, 094543, Player, DX_M01_0000_ECHO, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
;Hassler: Continue destroing fighters
Act_EtherComm = echo, 094544, Player, DX_M01_1111_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman

[Trigger]
nickname = SIG8_FIGHTERS_A_LOT_DEFEATED
Cnd_Destroyed = fleet_fighter, 3, ALL_IGNORE_LANDING
;Player: So many enemies!
Act_EtherComm = echo_player, 094545, Player, DX_M01_0000_ECHO, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Alaric: I helping you!
Act_EtherComm = echo, 094546, Player, DX_M01_0000_ECHO, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric

[Trigger]
nickname = SIG8_FIGHTERS_DEFEATED
Cnd_Destroyed = fleet_fighter, -1, ALL_IGNORE_LANDING
;Hassler: Completed! Go to waypoint
Act_EtherComm = echo, 094547, Player, DX_M01_1111_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NagOff = sig8_welcome_battle
Act_ActTrig = sigma8_welcome_setrep_neutral
Act_ActTrig = SIG8_FLY_init

[ObjList]
nickname = small_command_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic, hassler, alaric

[Trigger]
nickname = SIG8_FLY_init
Cnd_True = no_params
Act_SetNNObj = ms4_12_go_to_forbes_waypoint
Act_NagDistTowards = POS, sig8_waypoint, nag_voice, 1300, 700, 12500, 090001, 2000
Act_PlayMusic = none, none, none, music_reveal_and_exposition
Act_GiveObjList = Player, small_command_follow_player
Act_ActTrig = SIG8_FLY_make_cruiser_enemy_again
Act_ActTrig = SIG8_FLY_remove_cruisers
Act_ActTrig = SIG8_FLY_progress_dialog
Act_ActTrig = SIG8_FLY_around_waypoint

[Trigger]
nickname = SIG8_FLY_make_cruiser_enemy_again
Cnd_Timer = 20
Act_ActTrig = sigma8_welcome_setrep_enemy

[Trigger]
nickname = SIG8_FLY_remove_cruisers
Cnd_DistShip = outside, Player, sig8_to_biz, 10000
Act_Destroy = fleet_cruiser_1, SILENT
Act_Destroy = fleet_cruiser_2, SILENT

[Trigger]
nickname = SIG8_FLY_progress_dialog
Cnd_Timer = 10
;Alaric: Who is Jacobo?
Act_EtherComm = echo, 094548, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
;Player: He is Friend. He have a documents
Act_EtherComm = echo_player, 094549, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Hassler: Maybe this is documents of Deidrich. It's lost?
Act_EtherComm = echo, 094550, Player, DX_M01_0000_SHORT, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Player: No. I have a copy
Act_EtherComm = echo_player, 094551, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Alaric: It's great!
Act_EtherComm = echo, 094552, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric

[Trigger]
nickname = SIG8_FLY_around_waypoint
Cnd_DistVec = inside, Player, 1300, 700, 12500, 1000
Act_NagOff = sig8_waypoint
;Alaric: So.. what's next?
Act_EtherComm = echo, 094553, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
;Outpost: Surrender! Now!
Act_EtherComm = echo_female, 094554, Player, DX_M01_1111_SHORT, -1, rh_newscaster_head_gen, rh_female_elite_body, prop_neuralnet_f
Act_ActTrig = SIG8_GOTO_JUMP_init

[Trigger]
nickname = SIG8_GOTO_JUMP_init
Cnd_CommComplete = DX_M01_1111_SHORT
Act_NagDistTowards = OBJ, sig8_goto_jump, nag_voice, SIG8_TO_FOR, 090001, 3000, NAG_ALWAYS
Act_SetNNObj = ms4_14_go_to_forbes_jumphole
;Hassler: Again... Trent, go to waypoint
Act_EtherComm = echo, 094555, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = SIG8_GOTO_JUMP_fly_dialog
Act_ActTrig = SIG8_GOTO_JUMP_around_HOLE

[Trigger]
nickname = SIG8_GOTO_JUMP_fly_dialog
Cnd_Timer = 20
;Alaric: What is our target point?
Act_EtherComm = echo, 094556, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
;Hassler: It's jumphole. I will activate her
Act_EtherComm = echo, 094557, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Hassler: But you will jump alone
Act_EtherComm = echo, 094558, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Player: Why? Militaries will kill you!
Act_EtherComm = echo_player, 094559, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Hassler: It's not problem for me
Act_EtherComm = echo, 094560, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
;Alaric: Thank for help anyway
Act_EtherComm = echo, 094561, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric


[Trigger]
nickname = SIG8_GOTO_JUMP_around_HOLE
Cnd_DistShip = inside, Player, SIG8_TO_FOR, 1000
Act_Save = FORBES_JUMPHOLE_SAVE, 040016
Act_ActTrig = INIT_JUMPHOLE_activation

[Trigger]
nickname = FORBES_JUMPHOLE_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = FORBES_JUMPHOLE_spawn_units

[Trigger]
nickname = FORBES_JUMPHOLE_spawn_units
Cnd_Timer = 0.1
Act_RelocateShip = Player, 38960, 0, 40000, 1, 0, -0.9, 0
Act_SpawnShip = alaric, no_ol, 39020, 0, 39950, 1, 0, -0.9, 0
Act_SpawnShip = hassler, no_ol, 39030, 0, 40050, 1, 0, -0.9, 0
Act_SpawnShip = nag_voice
Act_MarkObj = alaric, 1
Act_MarkObj = hassler, 1
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_ActTrig = INIT_JUMPHOLE_activation

[Trigger]
nickname = INIT_JUMPHOLE_activation
Cnd_Timer = 0.2
Act_PlayMusic = no_params
;Hassler: We are there. Beginning activation...
Act_EtherComm = echo, 094562, Player, DX_M01_1111_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NagDistLeaving = forjump_activation, nag_voice, hassler, 090002, 6000, NAG_ALWAYS
Act_SetNNObj = ms4_15_wait_for_activation
Act_Jumper = hassler, false
Act_GiveObjList = hassler, unform
Act_GiveObjList = alaric, unform
Act_GiveObjList = Player, unform
Act_ActTrig = INIT_JUMPHOLE_first_waiting

[Trigger]
nickname = INIT_JUMPHOLE_first_waiting
Cnd_Timer = 7
Act_ActTrig = INIT_JUMPHOLE_the_corsairs

[Trigger]
nickname = INIT_JUMPHOLE_spawn_corsairs
Cnd_True = no_params
Act_SpawnShip = co_fighter_1
Act_SpawnShip = co_fighter_2
Act_SpawnShip = co_fighter_3
Act_SpawnShip = co_fighter_4
Act_SpawnShip = co_elite_1
Act_SpawnShip = co_elite_2
Act_SpawnShip = co_elite_3
Act_SpawnShip = co_elite_4

[Trigger]
nickname = corsairs_setrep_enemy
Cnd_True = no_params
Act_SetVibeLbl = ally, corsair, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsair, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsair, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsair, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = INIT_JUMPHOLE_the_corsairs
Cnd_CommComplete = DX_M01_1111_ECHO
Act_ActTrig = INIT_JUMPHOLE_spawn_corsairs
;Corsair: Give your money or die!
Act_EtherComm = echo, 094563, Player, DX_M01_0000_ECHO, -1, br_quigly_head, pi_pirate4_body, comm_pi_pirate
;Alaric: I kill you, corsairs!
Act_EtherComm = echo, 094564, Player, DX_M01_1111_ECHO, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_ActTrig = INIT_JUMPHOLE_start_real_activating
Act_ActTrig = INIT_JUMPHOLE_set_nn_kill_corsairs

[Trigger]
nickname = INIT_JUMPHOLE_set_nn_kill_corsairs
Cnd_CommComplete = DX_M01_0000_ECHO
Act_ActTrig = corsairs_setrep_enemy
Act_SetNNObj = ms4_13_destroy_corsairs
Act_MarkObj = co_fighter_1, 1
Act_MarkObj = co_fighter_2, 1
Act_MarkObj = co_fighter_3, 1
Act_MarkObj = co_fighter_4, 1
Act_MarkObj = co_elite_1, 1
Act_MarkObj = co_elite_2, 1
Act_MarkObj = co_elite_3, 1
Act_MarkObj = co_elite_4, 1

[Trigger]
nickname = INIT_JUMPHOLE_start_real_activating
Cnd_CommComplete = DX_M01_1111_ECHO
;Hassler: Kill corsairs!
Act_EtherComm = echo, 094565, Player, DX_M01_0000_ECHO, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = JUMPHOLE_ACTIVATED

[Trigger]
nickname = JUMPHOLE_ACTIVATED
Cnd_Timer = 40
Act_CallThorn = scripts\mod\m04_jumphole.thn, SIG8_TO_FOR
Act_LightFuse = SIG8_TO_FOR, msn03_jumphole_init
Act_ActTrig = JUMPHOLE_ACTIVATED_revert_camera

[Trigger]
nickname = JUMPHOLE_ACTIVATED_revert_camera
Cnd_Timer = 4
Act_RevertCam = no_params
Act_ActTrig = JUMPHOLE_ACTIVATED_init_mission

[Trigger]
nickname = JUMPHOLE_ACTIVATED_init_mission
Cnd_Timer = 1
Act_NagOff = forjump_activation
Act_GiveObjList = alaric, follow_player
Act_GiveObjList = hassler, hassler_goto_jumphole
Act_ActTrig = JUMPHOLE_ACTIVATED_bye_bye


[Trigger]
nickname = JUMPHOLE_ACTIVATED_bye_bye
Cnd_True = no_params
;Hassler: Jumphole activated!
Act_EtherComm = echo, 094566, Player, DX_M01_0000_SHORT, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = JUMPHOLE_ACTIVATED_bye_bye_ends

[Trigger]
nickname = JUMPHOLE_ACTIVATED_bye_bye_ends
Cnd_True = no_params
Act_ActTrig = JUMPHOLE_ACTIVATED_timelimit
Act_ActTrig = JUMPHOLE_ACTIVATED_timelimit_off
Act_SetNNObj = ms4_16_be_near_jumphole
Act_LockDock = Player, SIG8_TO_FOR, unlock
Act_PlayerCanDock = false, SIG8_TO_FOR
Act_EnableManeuver = dock, true
Act_ActTrig = welcome_to_forbes


Act_MarkObj = co_fighter_1, 0
Act_MarkObj = co_fighter_2, 0
Act_MarkObj = co_fighter_3, 0
Act_MarkObj = co_fighter_4, 0
Act_MarkObj = co_elite_1, 0
Act_MarkObj = co_elite_2, 0
Act_MarkObj = co_elite_3, 0
Act_MarkObj = co_elite_4, 0


 
[Trigger]
nickname = JUMPHOLE_ACTIVATED_timelimit
Cnd_Timer = 15
;Hassler: Why you are not in jumphole?
Act_EtherComm = echo, 094567, Player, DX_M01_0000_SHORT, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_ActTrig = JUMPHOLE_ACTIVATED_timelimit_final

[Trigger]
nickname = JUMPHOLE_ACTIVATED_timelimit_final
Cnd_Timer = 15
Act_ChangeState = FAIL, 094103 ; not activated jumphole failure

[Trigger]
nickname = JUMPHOLE_ACTIVATED_timelimit_off
Cnd_SystemExit = sig8
Act_DeActTrig = JUMPHOLE_ACTIVATED_timelimit
Act_DeActTrig = JUMPHOLE_ACTIVATED_timelimit_final


;---

[ObjList]
nickname = hassler_goto_jumphole
SetPriority = ALWAYS_EXECUTE
GotoShip = goto_no_cruise, SIG8_TO_FOR, 300, false

[NPC] 
nickname = npc_co_fighter
affiliation = co_grp
npc_ship_arch = ms4_co_fighter_ship

[NPC] 
nickname = npc_co_elite
affiliation = co_grp
npc_ship_arch = ms4_co_elite_ship

[MsnShip]
nickname = co_fighter_1
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 50, Player, 2500

[MsnShip]
nickname = co_fighter_2
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 80, Player, 2500

[MsnShip]
nickname = co_fighter_3
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 120, Player, 2500

[MsnShip]
nickname = co_fighter_4
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 170, Player, 2500

[MsnShip]
nickname = co_elite_1
NPC = npc_co_elite
label = corsair
random_name = true
rel_pos = 230, Player, 2500

[MsnShip]
nickname = co_elite_2
NPC = npc_co_elite
label = corsair
random_name = true
rel_pos = 270, Player, 2500

[MsnShip]
nickname = co_elite_3
NPC = npc_co_elite
label = corsair
random_name = true
rel_pos = 290, Player, 2500

[MsnShip]
nickname = co_elite_4
NPC = npc_co_elite
label = corsair
random_name = true
rel_pos = 350, Player, 2500



;----

[Trigger]
nickname = welcome_to_forbes
Cnd_SystemEnter = li_For
Act_RandomPop = true
Act_ActTrig = forbes_wait_for_enter

[Trigger]
nickname = forbes_wait_for_enter
Cnd_DistShip = inside, Player, alaric, 5000
Act_SpawnShip = nag_voice
Act_GiveObjList = alaric, follow_player
;Alaric: What now
Act_EtherComm = echo, 094568, Player, DX_M01_0000_SHORT, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
;Player: We need to go
Act_EtherComm = echo_player, 094569, Player, DX_M01_1111_ECHO, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
Act_ActTrig = FORBES_LETS_GO

[Trigger]
nickname = FORBES_LETS_GO
Cnd_CommComplete = DX_M01_1111_ECHO
;Alaric: Let's go to shipyard
Act_EtherComm = echo, 094570, Player, DX_M01_0000_ECHO, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_SetNNObj = ms4_17_go_to_shipyard
Act_NagDistTowards = OBJ, goto_shipyard, nag_voice, li_for_03, 090001, 3000, NAG_ALWAYS
Act_ActTrig = HATCHER_FIRST_MESSAGES

[Trigger]
nickname = HATCHER_FIRST_MESSAGES
Cnd_DistShip = outside, Player, FOR_TO_SIG8, 3000
;Hatcher: Hello, where is Jacobo?
Act_EtherComm = echo_female, 094571, Player, DX_M01_0000_ECHO, -1, li_hatcher_head, li_hatcher_body
;Player: He's dead
Act_EtherComm = echo_player, 094572, Player, DX_M01_0000_ECHO, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Hatcher: Ok, i wait you on planet Forbes 
Act_EtherComm = echo_female, 094573, Player, DX_M01_1111_ECHO, -1, li_hatcher_head, li_hatcher_body
Act_ActTrig = GOTO_PLANET_init

[Trigger]
nickname = GOTO_PLANET_init
Cnd_CommComplete = DX_M01_1111_ECHO
Act_ActTrig = GOTO_PLANET_around_shipyard

[Trigger]
nickname = GOTO_PLANET_around_shipyard
Cnd_DistShip = inside, Player, li_for_03, 2000
Act_PlayerCanTradelane = false, LI_FOR_F_Trade_Lane_Ring_L2_06, LI_FOR_F_Trade_Lane_Ring_L2_05
Act_SetNNObj = ms4_18_use_tradelane
Act_NagOff = goto_shipyard
Act_NagDistLeaving = forbes_tlr, nag_voice, LI_FOR_F_Trade_Lane_Ring_L2_06, 090000, 100, NAG_ALWAYS
;Alaric: Activate TLR
Act_EtherComm = echo, 094574, Player, DX_M01_0000_ECHO, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_ActTrig = GOTO_PLANET_in_TLR

[Trigger]
nickname = GOTO_PLANET_in_TLR
Cnd_TLEntered = Player, LI_FOR_F_Trade_Lane_Ring_L2_06, LI_FOR_F_Trade_Lane_Ring_L2_05
Act_NagOff = forbes_tlr
Act_LockManeuvers = true
Act_ActTrig = TLR_EXIT

[Trigger]
nickname = TLR_EXIT
Cnd_TLExited = Player, LI_FOR_F_Trade_Lane_Ring_L2_01
Act_LockManeuvers = false
Act_PlayerCanDock = false, Li_for_dock_ring
;Player: It's over!
Act_EtherComm = echo_player, 094575, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Alaric: Let's dock
Act_EtherComm = echo, 094576, Player, DX_M01_0000_ECHO, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_SetNNObj = ms4_19_dock_on_planet_forbes
Act_ActTrig = player_on_planet_forbes
Act_ActTrig = TLR_EXIT_alaric_dock_on_forbes
Act_NagDistLeaving = forbes_planet, nag_voice, Li_for_dock_ring, 040101, 100, NAG_ALWAYS

[Trigger]
nickname = TLR_EXIT_alaric_dock_on_forbes
Cnd_Timer = 2
Act_GiveObjList = alaric, dock_on_forbes


;----
[ObjList] 
nickname = dock_on_forbes
BreakFormation = no_params
Dock = Li_for_dock_ring
;----

[Trigger]
nickname = player_on_planet_forbes
system = li_for
Cnd_BaseEnter = li_for_01_base
Act_ActTrig = HATCHER_Scene
Act_ActTrig = last_cant_launch
Act_SetNNObj = ms4_20_meet_hatcher_in_bar
Act_AddRTC = missions\m04\bar2_force_enter.ini
 
[Trigger]
nickname = last_cant_launch
Cnd_BaseExit = li_for_01_base
Act_ActTrig = last_cant_launch_FAIL

[Trigger]
nickname = last_cant_launch_FAIL
Cnd_LaunchComplete = Player
Act_ChangeState = FAIL

[Trigger]
nickname = HATCHER_Scene
Cnd_LocEnter = Bar, li_for_01_base
Act_AddRTC = missions\m04\hatcher_bar_rtc.ini
Act_ActTrig = HATCHER_accept

[Trigger]
nickname = HATCHER_accept
Cnd_MsnResponse = accept
Act_ActTrig = loc_enter_Cityscape
Act_ActTrig = bar_force_exit

[Trigger]
nickname = bar_force_exit
Cnd_LocEnter = Bar, li_for_01_base
Act_AddRTC = missions\m04\bar_force_exit.ini

[Trigger]
nickname = loc_enter_Cityscape
Cnd_LocEnter = Cityscape, li_for_01_base
Act_AdjAcct = 17500
Act_ActTrig = MSN_REP_AFTER
Act_ChangeState = SUCCEED

;----

[Trigger]
nickname = MSN_REP_BEFORE
Cnd_True = no_params
Act_SetRep = Player, rh_grp, 0
Act_SetRep = Player, rc_grp, 0
Act_SetRep = Player, rx_grp, -0.3
Act_SetRep = Player, co_grp, -0.9

[Trigger]
nickname = MSN_REP_AFTER
Cnd_True = no_params
Act_SetRep = Player, rh_grp, -0.65
Act_SetRep = Player, rc_grp, -0.65
Act_SetRep = Player, rx_grp, -0.65
Act_SetRep = Player, bh_grp, 0
Act_SetRep = Player, li_grp, 0.3
Act_SetRep = Player, lc_grp, 0.3
Act_SetRep = Player, lx_grp, -0.3
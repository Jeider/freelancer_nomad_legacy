[Mission]
npc_ship_file = missions\m07\npcships.ini

[NPC] 
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

[ObjList] 
nickname = force_stop
Idle = no_params

[ObjList] 
nickname = unform
BreakFormation = no_params

[ObjList] 
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

[Trigger]
nickname = friend_armor
Cnd_True = no_params
Act_Invulnerable = rockford, true

;----------------

[Trigger]
nickname = launch_fail
Cnd_LaunchComplete = Player 
Act_ChangeState = FAIL, 097102 ;!!!!!!!!!!


[NNObjective]
nickname = NN_00_launch_to_space
state = HIDDEN
type = ids, 097002

[NNObjective]
nickname = NN_SUB_01_find_job_in_bar
state = HIDDEN
type = ids, 097003

[NNObjective]
nickname = NN_SUB_02_find_starline_ships
state = HIDDEN
type = navmarker, co_cad, 097004, 097004, -30000, 0, -20000

[NNObjective]
nickname = NN_SUB_03_kill_starline_ships
state = HIDDEN
type = navmarker, co_cad, 097005, 097005, -30000, 0, -20000

[NNObjective]
nickname = NN_SUB_04_find_more_ships_on_next_waypoint
state = HIDDEN
type = navmarker, co_cad, 097006, 097006, -23000, 0, -32000

[NNObjective] ; Bill Aironside
nickname = NN_SUB_05_kill_starline_leader
state = HIDDEN
type = navmarker, co_cad, 097007, 097007, -23000, 0, -32000

[NNObjective]
nickname = NN_SUB_06_return_back_to_freeport
state = HIDDEN
type = navmarker, co_cad, 097004, 097004, -39500, 0, -1000

[NNObjective]
nickname = NN_use_tlr_to_planet_cadiz
state = HIDDEN
type = rep_inst, co_cad, 097020, 097020, -19060, 60, -51948, co_cad_CO_TLR_L1_02

[NNObjective]
nickname = NN_dock_with_cadiz
state = HIDDEN
type = rep_inst, co_cad, 097021, 097021, 22788, 0, -35600, co_cad_01_dock_ring

[NNObjective]
nickname = NN_meet_rockford
state = HIDDEN
type = ids, 097022

[NNObjective]
nickname = NN_destroy_order_fighters
state = HIDDEN
type = ids, 097023

[NNObjective]
nickname = NN_use_tlr_to_shipyard
state = HIDDEN
type = rep_inst, co_cad, 097024, 097024, 22816, 114, -32453, co_cad_CO_TLR_L2_01

[NNObjective]
nickname = NN_use_tlr_to_jumpgate
state = HIDDEN
type = rep_inst, co_cad, 097025, 097025, 31139, 8, 27311, co_cad_CO_TLR_L3_01

[NNObjective]
nickname = NN_jump_in_omicron2
state = HIDDEN
type = rep_inst, co_cad, 097026, 097026, -20000, 0, 60000, cad_to_omicron2

[NNObjective]
nickname = NN_go_to_waypoint_near_tortuga
state = HIDDEN
type = navmarker, omicron2, 097027, 097027, 20000, -2000, 5000

[NNObjective]
nickname = NN_pick_up_bombs
state = HIDDEN
type = ids, 097030

[NNObjective]
nickname = NN_go_to_tortuga
state = HIDDEN
type = rep_inst, omicron2, 097031, 097031, 11020, -2070, 9465, communicator

[NNObjective]
nickname = NN_set_bombs_and_destroy_them
state = HIDDEN
type = rep_inst, omicron2, 097032, 097032, 11020, -2070, 9465, communicator

[NNObjective]
nickname = NN_fly_away_from_tortuga
state = HIDDEN
type = navmarker, omicron2, 097033, 097033, 20000, -2000, 25000

[NNObjective]
nickname = NN_go_to_possible_ambush_place
state = HIDDEN
type = navmarker, omicron2, 097034, 097034, 20000, -2000, 5000

[NNObjective]
nickname = NN_go_to_real_ambush_place
state = HIDDEN
type = navmarker, omicron2, 097035, 097035, 25000, -2000, -2000

[NNObjective]
nickname = NN_attack_armored_transport
state = HIDDEN
type = ids, 097036

[NNObjective]
nickname = NN_stay_near_transport
state = HIDDEN
type = ids, 097037

[NNObjective]
nickname = NN_destroy_armored_transport
state = HIDDEN
type = ids, 097038

[NNObjective]
nickname = NN_pick_up_artifacts
state = HIDDEN
type = ids, 097039

[NNObjective]
nickname = NN_destroy_order_fighters
state = HIDDEN
type = ids, 097040

[NNObjective]
nickname = NN_go_to_omega13_jumphole
state = HIDDEN
type = rep_inst, omicron2, 097041, 097041, 10000, -9000, 40000, omicron2_to_om13

[NNObjective]
nickname = NN_wait_for_rockford_jump
state = HIDDEN
type = ids, 097042

[NNObjective]
nickname = NN_jump_in_omega13
state = HIDDEN
type = rep_inst, omicron2, 097043, 097043, 10000, -9000, 40000, omicron2_to_om13

[NNObjective]
nickname = NN_wait_for_rockford_instructions
state = HIDDEN
type = ids, 097044

[NNObjective]
nickname = NN_go_to_battleship
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_talk_with_barman_on_battleship
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_talk_with_darcy_on_battleship
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_use_tlr_to_gasminer
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_dock_with_gasminer
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_talk_with_artifact_dealer
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_destroy_bandits
state = HIDDEN
type = ids, 000000

[NNObjective]
nickname = NN_dock_with_gasminer_again
state = HIDDEN
type = ids, 000000

[Trigger]
nickname = MSN_START
Cnd_BaseEnter = co_cad_03_base
InitState = ACTIVE
Act_AddRTC = missions\m07\tobago_deck_relocate.ini
Act_ActTrig = TOBAGO_bar

[Trigger]
nickname = TOBAGO_bar
Cnd_LocEnter = Bar, co_cad_03_base
Act_Popupdialog = 216004, 095404, CLOSE
Act_AddRTC = missions\m07\tobago_bar.ini
Act_ActTrig = TOBAGO_accept

[Trigger]
nickname = TOBAGO_accept
Cnd_MsnResponse = accept
Act_SetNNObj = NN_00_launch_to_space
Act_RemoveRTC = missions\m07\tobago_bar.ini
Act_PlayerCanDock = false
Act_PlayerCanTradelane = false
Act_RandomPop = false
Act_ActTrig = TOBAGO_launched

[Trigger]
nickname = TOBAGO_launched
Cnd_LaunchComplete = Player
Act_ActTrig = STARLINE_init

[Trigger]
nickname = STARLINE_init
Cnd_Timer = 1
Act_SpawnShip = nag_voice
Act_NagDistTowards = POS, to_pointA, nag_voice, -30000, 0, -20000, 090001, 2000
Act_ActTrig = STARLINE_around
Act_SetNNObj = NN_SUB_02_find_starline_ships

;--

[NPC] 
nickname = npc_starline_li_fighter2
affiliation = sl_grp
npc_ship_arch = ms7_starline_li_fighter2

[NPC] 
nickname = npc_starline_li_elite
affiliation = sl_grp
npc_ship_arch = ms7_starline_li_elite

[NPC] 
nickname = npc_bill_aironside
affiliation = sl_grp
npc_ship_arch = ms7_starline_li_elite
individual_name = 216062
voice = pilot_f_mil_m01

;point a

[MsnShip]
nickname = starline_pointA_01
NPC = npc_starline_li_fighter2
jumper = false
label = pointA
label = starline
random_name = true
rel_pos = 90, Player, 1000

[MsnShip]
nickname = starline_pointA_02
NPC = npc_starline_li_fighter2
jumper = false
label = pointA
label = starline
random_name = true
rel_pos = 140, Player, 1000

[MsnShip]
nickname = starline_pointA_03
NPC = npc_starline_li_fighter2
jumper = false
label = pointA
label = starline
random_name = true
rel_pos = 180, Player, 1000

[MsnShip]
nickname = starline_pointA_04
NPC = npc_starline_li_fighter2
jumper = false
label = pointA
label = starline
random_name = true
rel_pos = 250, Player, 1000

;point b

[MsnShip]
nickname = starline_pointB_fighter01
NPC = npc_starline_li_fighter2
jumper = false
label = pointB
label = starline
random_name = true
rel_pos = 60, Player, 1000

[MsnShip]
nickname = starline_pointB_fighter02
NPC = npc_starline_li_fighter2
jumper = false
label = pointB
label = starline
random_name = true
rel_pos = 120, Player, 1000

[MsnShip]
nickname = starline_pointB_fighter03
NPC = npc_starline_li_fighter2
jumper = false
label = pointB
label = starline
random_name = true
rel_pos = 150, Player, 1000

[MsnShip]
nickname = starline_pointB_leader01
NPC = npc_bill_aironside
jumper = false
label = pointB
label = starline
random_name = true
rel_pos = 200, Player, 1000

[MsnShip]
nickname = starline_pointB_leader02
NPC = npc_starline_li_elite
jumper = false
label = pointB
label = starline
random_name = true
rel_pos = 300, Player, 1000

[ObjList]
nickname = stay_in_pointA
StayInRange = -30000, 0, -20000, 3000

[ObjList]
nickname = stay_in_pointB
StayInRange = -23000, 0, -32000, 3000

[ObjList]
nickname = ol_starline_escape_to_liberty
BreakFormation = no_params
Dock = cad_to_omicron1


;--

[Trigger]
nickname = STARLINE_around
Cnd_DistVec = inside, Player, -30000, 0, -20000, 3000
Act_SpawnShip = starline_pointA_01, stay_in_pointA
Act_SpawnShip = starline_pointA_02, stay_in_pointA
Act_SpawnShip = starline_pointA_03, stay_in_pointA
Act_SpawnShip = starline_pointA_04, stay_in_pointA
Act_ActTrig = STARLINE_setrep_enemy
Act_MarkObj = starline_pointA_01, 1
Act_MarkObj = starline_pointA_02, 1
Act_MarkObj = starline_pointA_03, 1
Act_MarkObj = starline_pointA_04, 1
Act_SetNNObj = NN_SUB_03_kill_starline_ships
Act_NagOff = to_pointA
Act_ActTrig = STARLINE_destroyed

[Trigger]
nickname = STARLINE_setrep_enemy
Cnd_True = no_params
Act_SetVibeLblToShip = starline, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, starline, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = STARLINE_destroyed
Cnd_Destroyed = pointA, -1, ALL_IGNORE_LANDING

;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0010_trent, -1, pi_pirate5_head, player_body, player_commhelmet

Act_ActTrig = AIRONSIDE_init

[Trigger]
nickname = AIRONSIDE_init
Cnd_CommComplete = dx_m07_0010_trent

;Barman:
Act_EtherComm = echo_m07, 097502, Player, dx_m07_0020_barman, -1, sh_male2_head, pi_pirate4_body

Act_SetNNObj = NN_SUB_04_find_more_ships_on_next_waypoint
Act_NagDistTowards = POS, to_pointB, nag_voice, -23000, 0, -32000, 090001, 2000
Act_ActTrig = AIRONSIDE_around

[Trigger]
nickname = AIRONSIDE_around
Cnd_DistVec = inside, Player, -23000, 0, -32000, 3000
Act_Save = AIRONSIDE_SAVE, 097601
Act_ActTrig = AIRONSIDE_battle

[Trigger]
nickname = AIRONSIDE_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = AIRONSIDE_spawn_units

[Trigger]
nickname = AIRONSIDE_spawn_units
Cnd_Timer = 0.1
Act_SpawnShip = nag_voice
Act_RelocateShip = Player, -23000, 0, -31000, 1, 0, 0, 0
Act_ActTrig = AIRONSIDE_battle

[Trigger]
nickname = AIRONSIDE_battle
Cnd_True = no_params
Act_SpawnShip = starline_pointB_fighter01, stay_in_pointB
Act_SpawnShip = starline_pointB_fighter02, stay_in_pointB
Act_SpawnShip = starline_pointB_fighter03, stay_in_pointB
Act_SpawnShip = starline_pointB_leader01, stay_in_pointB
Act_SpawnShip = starline_pointB_leader02, stay_in_pointB
Act_SetNNObj = NN_SUB_05_kill_starline_leader
Act_MarkObj = starline_pointB_leader01, 1
Act_ActTrig = AIRONSIDE_destroyed
Act_NagOff = to_pointB
Act_NagDistLeaving = pointB_battle, nag_voice, starline_pointB_leader01, 090002, 6000, NAG_ALWAYS

[Trigger]
nickname = AIRONSIDE_destroyed
Cnd_Destroyed = starline_pointB_leader01, 1, ALL
Act_NagOff = pointB_battle
Act_ActTrig = AIRONSIDE_ships_leaving
Act_ActTrig = CASH_init

[Trigger]
nickname = AIRONSIDE_ships_leaving
Cnd_True = no_params
Act_GiveObjList = starline_pointB_fighter01, ol_starline_escape_to_liberty
Act_GiveObjList = starline_pointB_fighter02, ol_starline_escape_to_liberty
Act_GiveObjList = starline_pointB_fighter03, ol_starline_escape_to_liberty
Act_GiveObjList = starline_pointB_leader02, ol_starline_escape_to_liberty

[Trigger]
nickname = AIRONSIDE_hide_ships
Cnd_True = no_params
Act_Destroy = starline_pointB_fighter01, SILENT
Act_Destroy = starline_pointB_fighter02, SILENT
Act_Destroy = starline_pointB_fighter03, SILENT
Act_Destroy = starline_pointB_leader02, SILENT

;-

[Trigger]
nickname = CASH_init
Cnd_True = no_params
Act_AdjAcct = 500
Act_ActTrig = CASH_reaction

[Trigger]
nickname = CASH_reaction
Cnd_Timer = 3
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0030_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_ActTrig = CASH_revenge

[Trigger]
nickname = CASH_revenge
Cnd_CommComplete = dx_m07_0030_trent
Act_SetNNObj = NN_SUB_06_return_back_to_freeport
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0035_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_ActTrig = CASH_revenge_dialogs_complete

[Trigger]
nickname = CASH_revenge_dialogs_complete
Cnd_CommComplete = dx_m07_0035_trent
Act_ActTrig = ROCKFORD_COMM

;== MISSION REAL BEGINS

[Trigger]
nickname = ROCKFORD_COMM
Cnd_Timer = 5
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0040_rockford, -1, li_rockford_head, li_male_elite_body
Act_ActTrig = ROCKFORD_COMM_complete
Act_ActTrig = AIRONSIDE_hide_ships

[Trigger]
nickname = ROCKFORD_COMM_complete
Cnd_CommComplete = dx_m07_0040_rockford
Act_SetNNObj = NN_use_tlr_to_planet_cadiz
Act_NagDistTowards = OBJ, to_cadiz_tlr, nag_voice, co_cad_CO_TLR_L1_02, 090001, 3000, NAG_ALWAYS
Act_PlayerCanTradelane = false, co_cad_CO_TLR_L1_02, co_cad_CO_TLR_L1_03
Act_PlayerCanDock = false
Act_ActTrig = TO_CADIZ_inside_tlr

[Trigger]
nickname = TO_CADIZ_inside_tlr
Cnd_TLEntered = Player, co_cad_CO_TLR_L1_02, co_cad_CO_TLR_L1_03
Act_NagOff = to_cadiz_tlr
Act_LockManeuvers = true
Act_ActTrig = TO_CADIZ_tlr_exited

[Trigger]
nickname = TO_CADIZ_tlr_exited
Cnd_TLExited = Player, co_cad_CO_TLR_L1_04
Act_NagDistLeaving = cadiz_land, nag_voice, co_cad_01_dock_ring, 090004, 100, NAG_ALWAYS
Act_PlayerCanDock = false, co_cad_01_dock_ring
Act_SetNNObj = NN_dock_with_cadiz
Act_ActTrig = CADIZ_base_enter
Act_ActTrig = CADIZ_bar_enter

;==

[Trigger]
nickname = CADIZ_base_enter
Cnd_LocEnter = Cityscape, co_cad_01_base
Act_SetNNObj = NN_meet_rockford
Act_ActTrig = CADIZ_cant_launch
Act_NagOff = cadiz_land

[Trigger]
nickname = CADIZ_cant_launch
Cnd_BaseExit = co_cad_01_base
Act_ActTrig = launch_fail

[Trigger]
nickname = CADIZ_bar_enter
Cnd_LocEnter = Bar, co_cad_01_base
Act_AddRTC = missions\m07\cadiz_gunners.ini
Act_DeActTrig = CADIZ_cant_launch
Act_DeActTrig = launch_fail
Act_ActTrig = CADIZ_to_start
Act_ActTrig = CADIZ_on_the_cityscape

;scene logic
; ENTER RTC - Trent sit, Gunners enterning room, Gunners aiming gun on Trent
; POPUP - Gunners aiming: WHERE IS ROCKFORD?!
; CHANGE SCENE
; ENTER RTC - Gunner aiming, BOOM! Rockford appears
; POPUP - Rockford says "come with me if you wont to live"
; EXIT RTC - Player and Rockford walking out

[Trigger]
nickname = CADIZ_to_start
Cnd_RTCDone = missions\m07\cadiz_gunners.ini
Act_SetNNObj = NN_00_launch_to_space
Act_ActTrig = CADIZ_system_enter
Act_PlayerCanDock = false
Act_RandomPop = false
Act_PlayerCanTradelane = false

[Trigger]
nickname = CADIZ_on_the_cityscape
Cnd_LocEnter = Cityscape, co_cad_01_base
Act_AddRTC = missions\m07\cadiz_force_launch.ini

;===


[NPC] 
nickname = npc_rockford
affiliation = fc_uk_grp
npc_ship_arch = ms7_rockford
space_costume = li_rockford_head, li_male_elite_body
individual_name = 216080

[MsnShip]
nickname = rockford
NPC = npc_rockford
label = ally
jumper = true

;order fighter - bloodhound
;order elite fighter - anubis

[NPC] 
nickname = npc_order_fighter
affiliation = or_grp
npc_ship_arch = ms7_order_fighter

[NPC] 
nickname = npc_order_elite
affiliation = or_grp
npc_ship_arch = ms7_order_elite

; cadiz defenders

[MsnShip]
nickname = cadiz_01
NPC = npc_order_elite
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnShip]
nickname = cadiz_02
NPC = npc_order_elite
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnShip]
nickname = cadiz_03
NPC = npc_order_elite
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnShip]
nickname = cadiz_04
NPC = npc_order_elite
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnShip]
nickname = cadiz_05
NPC = npc_order_elite
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnShip]
nickname = cadiz_06
NPC = npc_order_fighter
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnShip]
nickname = cadiz_07
NPC = npc_order_fighter
jumper = false
label = cadiz_attack
label = order
random_name = true

[MsnFormation]
nickname = cadiz_formation
formation = fighter_basic
ship = cadiz_01
; ship = cadiz_02
; ship = cadiz_03
; ship = cadiz_04
; ship = cadiz_05
;ship = cadiz_06
;ship = cadiz_07

;===

[Trigger]
nickname = prepare_rockford
Cnd_True = no_params
Act_ActTrig = friend_armor
Act_ActTrig = FRIEND_setrep
Act_MarkObj = rockford, 1

[Trigger]
nickname = PREPARE_CAMERA
Cnd_Timer = 0.5
Act_CallThorn = null, Player

[Trigger]
nickname = FRIEND_setrep
Cnd_True = no_params
Act_SetVibe = rockford, Player, REP_FRIEND_MAXIMUM
Act_SetVibe = Player, rockford, REP_FRIEND_MAXIMUM

[Trigger]
nickname = ORDER_setrep
Cnd_True = no_params
Act_SetVibeLblToShip = order, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, order, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = order, rockford, REP_HOSTILE_THRESHOLD
Act_SetVibeShipToLbl = rockford, order, REP_HOSTILE_THRESHOLD

[ObjList]
nickname = ol_cadiz_arrive
SetPriority = ALWAYS_EXECUTE
GotoShip = goto_cruise, Player, 150, false

[ObjList]
nickname = ol_cadiz_attack
SetPriority = ALWAYS_EXECUTE
BreakFormation = no_params
GotoShip = goto_cruise, Player, 10000, false

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

;===

[Trigger]
nickname = CADIZ_system_enter
Cnd_SpaceEnter = no_params
Act_ActTrig = CADIZ_launch_complete
Act_CallThorn = scripts\mod\m07_launch_camera.thn, Player
Act_SpawnFormation = cadiz_formation, 20200, 0, -35700, 0.5, 0, -0.5, 0
Act_ActTrig = CADIZ_spawn_rockford

[Trigger]
nickname = CADIZ_spawn_rockford
Cnd_Timer = 1
Act_SpawnShip = rockford, no_ol, 22490, 0, -35660, 0.75, 0, 0.25, 0
Act_ActTrig = CADIZ_rockford_comment

[Trigger]
nickname = CADIZ_rockford_comment
Cnd_Timer = 2
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0060_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

[Trigger]
nickname = CADIZ_launch_complete
Cnd_LaunchComplete = Player
Act_ActTrig = CADIZ_stop_player

[Trigger]
nickname = CADIZ_stop_player
Cnd_Timer = 0.5
Act_PObjIdle = no_params
Act_ActTrig = CADIZ_begin_fight

[Trigger]
nickname = CADIZ_begin_fight
Cnd_Timer = 1
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_GiveObjList = cadiz_01, ol_cadiz_attack
Act_GiveObjList = cadiz_02, ol_cadiz_attack
Act_GiveObjList = cadiz_03, ol_cadiz_attack
Act_GiveObjList = cadiz_04, ol_cadiz_attack
Act_GiveObjList = cadiz_05, ol_cadiz_attack
Act_GiveObjList = cadiz_06, ol_cadiz_attack
Act_GiveObjList = cadiz_07, ol_cadiz_attack
Act_ActTrig = ORDER_setrep
Act_ActTrig = prepare_rockford
Act_SetNNObj = NN_destroy_order_fighters
Act_NagDistLeaving = cadiz_battle, nag_voice, rockford, 090002, 3000, NAG_ALWAYS
Act_MarkObj = cadiz_01, 1
Act_MarkObj = cadiz_02, 1
Act_MarkObj = cadiz_03, 1
Act_MarkObj = cadiz_04, 1
Act_MarkObj = cadiz_05, 1
Act_MarkObj = cadiz_06, 1
Act_MarkObj = cadiz_07, 1
Act_ActTrig = CADIZ_enemy_destroyed
Act_PlayerEnemyClamp = 4, 5

[Trigger]
nickname = CADIZ_enemy_destroyed
Cnd_Destroyed = cadiz_attack, -1, ALL_IGNORE_LANDING
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0070_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_NagOff = cadiz_battle
Act_NagDistTowards = OBJ, cad_to_gavana_tlr, nag_voice, co_cad_CO_TLR_L2_01, 090001, 3000, NAG_ALWAYS
Act_SetNNObj = NN_use_tlr_to_shipyard
Act_PlayerCanTradelane = false, co_cad_CO_TLR_L2_01, co_cad_CO_TLR_L2_02
Act_GiveObjList = rockford, follow_player
Act_ActTrig = CADIZ_TLR_GAVANA_inside

[Trigger]
nickname = CADIZ_TLR_GAVANA_inside
Cnd_TLEntered = Player, co_cad_CO_TLR_L2_01, co_cad_CO_TLR_L2_02
Act_LockManeuvers = true
Act_NagOff = cad_to_gavana_tlr
Act_ActTrig = CADIZ_TLR_GAVANA_dialog
Act_ActTrig = CADIZ_TLR_GAVANA_complete

[Trigger]
nickname = CADIZ_TLR_GAVANA_dialog
Cnd_True = no_params
Act_ActTrig = CADIZ_dialog_group01


[Trigger]
nickname = CADIZ_dialog_group01
Cnd_True = no_params
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0080_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0090_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0100_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0110_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0120_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0130_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0140_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0150_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0160_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_ActTrig = CADIZ_dialog_group02


[Trigger]
nickname = CADIZ_dialog_group02
Cnd_CommComplete = dx_m07_0160_trent
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0170_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0180_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0190_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0200_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0210_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0220_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = CADIZ_dialog_group03


[Trigger]
nickname = CADIZ_dialog_group03
Cnd_CommComplete = dx_m07_0220_rockford
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0230_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0240_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = CADIZ_dialog_group04


[Trigger]
nickname = CADIZ_dialog_group04
Cnd_CommComplete = dx_m07_0240_rockford
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0250_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0260_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2








[Trigger]
nickname = CADIZ_TLR_GAVANA_complete
Cnd_TLExited = Player, co_cad_CO_TLR_L2_04
Act_NagDistTowards = OBJ, gavana_to_omicron2_tlr, nag_voice, co_cad_CO_TLR_L3_01, 090001, 3000, NAG_ALWAYS
Act_SetNNObj = NN_use_tlr_to_jumpgate
Act_PlayerCanTradelane = false, co_cad_CO_TLR_L3_01, co_cad_CO_TLR_L3_02
Act_ActTrig = CADIZ_TLR_JUMPGATE_inside

[Trigger]
nickname = CADIZ_TLR_JUMPGATE_inside
Cnd_TLEntered = Player, co_cad_CO_TLR_L3_01, co_cad_CO_TLR_L3_02
Act_LockManeuvers = true
Act_NagOff = gavana_to_omicron2_tlr
Act_ActTrig = CADIZ_TLR_JUMPGATE_dialog
Act_ActTrig = CADIZ_TLR_JUMPGATE_complete

[Trigger]
nickname = CADIZ_TLR_JUMPGATE_dialog
Cnd_Timer = 1


[Trigger]
nickname = CADIZ_TLR_JUMPGATE_complete
Cnd_TLExited = Player, co_cad_CO_TLR_L3_04
Act_NagDistLeaving = jumpin_omicron, nag_voice, cad_to_omicron2, 090003, 1, 10, NAG_ALWAYS
Act_SetNNObj = NN_jump_in_omicron2
Act_PlayerCanDock = false, cad_to_omicron2
Act_ActTrig = welcome_to_omicron_minor

;======JUMP

[Trigger]
nickname = welcome_to_omicron_minor
Cnd_SystemEnter = omicron2
Act_NagOff = jumpin_omicron
Act_ActTrig = omicron_minor_welcome_wait_for_rockford
Act_RandomPop = False

[Trigger]
nickname = omicron_minor_welcome_wait_for_rockford
Cnd_DistShip = inside, Player, rockford, 5000
Act_SpawnShip = nag_voice
Act_ActTrig = prepare_rockford
Act_GiveObjList = rockford, follow_player
Act_SetNNObj = NN_go_to_waypoint_near_tortuga
Act_NagDistTowards = POS, goto_wp_tortuga, nag_voice, 20000, -2000, 5000, 090001, 2000
Act_ActTrig = TORTUGA_WP_goto_dialog
Act_ActTrig = TORTUGA_WP_around_wp
Act_ActTrig = TORTUGA_spawn_communicator

[Trigger]
nickname = TORTUGA_WP_goto_dialog
Cnd_Timer = 1
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0270_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0280_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0290_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0300_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

;==

[MsnLoot]
nickname = bomb1
archetype = m07_bomb
string_id = 097203
rel_pos_obj = rockford
rel_pos_offset = 50, -5, 20
velocity = 0, 0, 0
angular_velocity = 0, 100, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnLoot]
nickname = bomb2
archetype = m07_bomb
string_id = 097203
rel_pos_obj = rockford
rel_pos_offset = 50, -5, 0
velocity = 0, 0, 0
angular_velocity = 0, 100, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnLoot]
nickname = bomb3
archetype = m07_bomb
string_id = 097203
rel_pos_obj = rockford
rel_pos_offset = 50, -5, -20
velocity = 0, 0, 0
angular_velocity = 0, 100, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnSolar]
nickname = tortuga_part
string_id = 1
system = omicron2
position = 11050, -2200, 9435
orientation = 1, 0, 0, 0
archetype = hidden_connect_m7
loadout = m07_tortuga_alive_part
radius = 0
pilot = MSN10_Rheinland_Battleship

[MsnSolar]
nickname = communicator
string_id = 097204
system = omicron2
position = 11020, -2070, 9465
orientation = 0.75, 0, 0.25, 0
archetype = m07_communicator
loadout = m07_comm_loadout
radius = 0

[MsnSolar]
nickname = scene_light
string_id = 1
system = omicron2
position = 20000, -2000, 5000
orientation = 0.5, 0, 0.5, 0
archetype = hidden_connect
loadout = m07_scene_light
radius = 0

; tortuga guardians

[NPC] 
nickname = npc_corsair_fighter
affiliation = co_grp
npc_ship_arch = ms7_order_fighter

[MsnShip]
nickname = guard_01
NPC = npc_corsair_fighter
jumper = false
label = guard
random_name = true

[MsnShip]
nickname = guard_02
NPC = npc_corsair_fighter
jumper = false
label = guard
random_name = true

[MsnShip]
nickname = guard_03
NPC = npc_corsair_fighter
jumper = false
label = guard
random_name = true

[ObjList]
nickname = ol_goto_tortuga_part
SetPriority = ALWAYS_EXECUTE
GotoShip = goto_no_cruise, tortuga_part, 200, false

;==

[Trigger]
nickname = TORTUGA_spawn_communicator
Cnd_True = no_params
Act_SpawnSolar = tortuga_part
Act_SpawnSolar = communicator


[Trigger]
nickname = TORTUGA_WP_around_wp
Cnd_DistVec = inside, Player, 20000, -2000, 5000, 2000
Act_GiveObjList = rockford, unform_n_stop
Act_PobjIdle = no_params
Act_ActTrig = TORTUGA_WP_spawn_solars

;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0310_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

Act_ActTrig = TORTUGA_WP_mine_scene

[Trigger]
nickname = TORTUGA_WP_mine_scene
Cnd_CommComplete = dx_m07_0310_rockford
Act_PobjIdle = no_params
Act_RelocateShip = Player, 22000, -2000, 5000, 0.5, 0, 0.5, 0
Act_RelocateShip = rockford, 19900, -2000, 5000, 0.5, 0, -0.5, 0
Act_ActTrig = TORTUGA_WP_spawn_mines
Act_CallThorn = scripts\mod\m07_tortuga_wp_camera.thn, Player
Act_SpawnSolar = scene_light
Act_ActTrig = TORTUGA_WP_mine_scene_description

[Trigger]
nickname = TORTUGA_WP_spawn_mines
Cnd_Timer = 0.1
Act_SpawnLoot = bomb1
Act_SpawnLoot = bomb2
Act_SpawnLoot = bomb3
Act_MarkObj = bomb1, 1
Act_MarkObj = bomb2, 1
Act_MarkObj = bomb3, 1

[Trigger]
nickname = TORTUGA_WP_mine_scene_description
Cnd_Timer = 10
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0320_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = TORTUGA_WP_COMPLETE

[Trigger]
nickname = TORTUGA_WP_COMPLETE
Cnd_CommComplete = dx_m07_0320_rockford
Act_Destroy = scene_light, SILENT
Act_RelocateShip = Player, 20000, -2000, 5000, 0.5, 0, 0.5, 0
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_Save = DIVERSION_SAVE, 097602
Act_ActTrig = DIVERSION_init

[Trigger]
nickname = DIVERSION_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = DIVERSION_spawn_units

[Trigger]
nickname = DIVERSION_spawn_units
Cnd_Timer = 0.1
Act_SpawnShip = nag_voice
Act_NagDistTowards = POS, goto_wp_tortuga, nag_voice, 20000, -2000, 5000, 090001, 2000
Act_SpawnShip = rockford, no_ol, 19900, -2000, 5000, 0.5, 0, -0.5, 0
Act_ActTrig = prepare_rockford
Act_RelocateShip = Player, 20000, -2000, 5000, 0.5, 0, 0.5, 0
Act_ActTrig = TORTUGA_WP_spawn_mines
Act_ActTrig = TORTUGA_spawn_communicator
Act_ActTrig = DIVERSION_init

[Trigger]
nickname = DIVERSION_init
Cnd_Timer = 1
;Author: how to use bombs
Act_Popupdialog = 216004, 095404, CLOSE
Act_SetNNObj = NN_pick_up_bombs
Act_MarkObj = rockford, 0
Act_ActTrig = PICKED_bomb1
Act_ActTrig = PICKED_bomb2
Act_ActTrig = PICKED_bomb3
Act_ActTrig = bomb1_destroyed
Act_ActTrig = bomb2_destroyed
Act_ActTrig = bomb3_destroyed


[Trigger]
nickname = bomb1_destroyed
Cnd_Destroyed = bomb1, 1, EXPLODE
Act_ActTrig = bomb_destroyed_fail

[Trigger]
nickname = bomb2_destroyed
Cnd_Destroyed = bomb2, 1, EXPLODE
Act_ActTrig = bomb_destroyed_fail

[Trigger]
nickname = bomb3_destroyed
Cnd_Destroyed = bomb3, 1, EXPLODE
Act_ActTrig = bomb_destroyed_fail

[Trigger]
nickname = bomb_destroyed_fail
Cnd_True = no_params
Act_ChangeState = FAIL, 097105

[Trigger]
nickname = PICKED_bomb1
Cnd_LootAcquired = bomb1, Player
Act_ActTrig = PICKED_bomb_complete

[Trigger]
nickname = PICKED_bomb2
Cnd_LootAcquired = bomb2, Player
Act_ActTrig = PICKED_bomb_complete

[Trigger]
nickname = PICKED_bomb3
Cnd_LootAcquired = bomb3, Player
Act_ActTrig = PICKED_bomb_complete

[Trigger]
nickname = PICKED_bomb_complete
Cnd_True = no_params
Act_DeactTrig = PICKED_bomb1
Act_DeactTrig = PICKED_bomb2
Act_DeactTrig = PICKED_bomb3
Act_DeactTrig = bomb1_destroyed
Act_DeactTrig = bomb2_destroyed
Act_DeactTrig = bomb3_destroyed
Act_DeactTrig = bomb_destroyed_fail
Act_SetNNObj = NN_go_to_tortuga
Act_NagOff = goto_wp_tortuga
Act_NagDistTowards = OBJ, do_diversion, nag_voice, OM2_01_ROOT, 090001, 2000
Act_ActTrig = DIVERSION_near_tartuga

[Trigger]
nickname = DIVERSION_near_tartuga
Cnd_DistShip = inside, Player, communicator, 2000
Act_SetNNObj = NN_set_bombs_and_destroy_them
Act_ActTrig = COUNTDOWN_init
Act_ActTrig = DIVERSION_comm_destroyed
Act_Destroy = rockford, SILENT



[Trigger]
nickname = COUNTDOWN_init
Cnd_DistShip = inside, Player, communicator, 100
;Tortuga: Hey, you there. What is you doing?
Act_EtherComm = echo_m07, 1, Player, dx_m07_0330_tortuga, -1, br_quigly_head, sh_male2_body, prop_hat_male_pirate_a, prop_neuralnet_d
Act_ActTrig = COUNTDOWN_warning1

[Trigger]
nickname = COUNTDOWN_warning1
Cnd_CommComplete = dx_m07_0330_tortuga
Act_ActTrig = COUNTDOWN_warning2
Act_ActTrig = COUNTDOWN_activate_turrets

[Trigger]
nickname = COUNTDOWN_activate_turrets
Cnd_DistShip = inside, Player, communicator, 200
Act_ActTrig = COUNTDOWN_turrets_activation_lag_time

[Trigger]
nickname = COUNTDOWN_turrets_activation_lag_time
Cnd_Timer = 1
Act_SetVibe = tortuga_part, Player, REP_HOSTILE_MAXIMUM
Act_SetVibe = Player, tortuga_part, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = COUNTDOWN_warning2
Cnd_Timer = 15
Act_ActTrig = COUNTDOWN_start_patrols
;Tortuga: Guard, check this guy
Act_EtherComm = echo_m07, 1, Player, dx_m07_0340_tortuga, -1, br_quigly_head, sh_male2_body, prop_hat_male_pirate_a, prop_neuralnet_d

[Trigger]
nickname = COUNTDOWN_start_patrols
Cnd_CommComplete = dx_m07_0340_tortuga
Act_ActTrig = COUNTDOWN_init_patrol_checking

[Trigger]
nickname = COUNTDOWN_init_patrol_checking
Cnd_Timer = 25
Act_ChangeState = FAIL, 097103


[Trigger]
nickname = COUNTDOWN_deactivate
Cnd_True = no_params
Act_DeActTrig = COUNTDOWN_init
Act_DeActTrig = COUNTDOWN_warning1
Act_DeActTrig = COUNTDOWN_activate_turrets
Act_DeActTrig = COUNTDOWN_turrets_activation_lag_time
Act_DeActTrig = COUNTDOWN_warning2
Act_DeActTrig = COUNTDOWN_start_patrols
Act_DeActTrig = COUNTDOWN_init_patrol_checking

[Trigger]
nickname = DIVERSION_comm_destroyed
Cnd_Destroyed = communicator, 1, EXPLODE
Act_SetRep = Player, co_grp, -0.65
Act_SetRep = Player, pi_grp, -0.65
Act_SetNNObj = NN_fly_away_from_tortuga
Act_NagOff = do_diversion
Act_NagDistTowards = POS, fly_away_tortuga, nag_voice, 20000, -2000, 25000, 090001, 2000
Act_ActTrig = DIVERSION_flyied_away
Act_ActTrig = DIVERSION_around_last_point

[Trigger]
nickname = DIVERSION_flyied_away
Cnd_DistShip = outside, Player, OM2_01_CORE, 3000
Act_ActTrig = COUNTDOWN_deactivate
Act_ActTrig = DIVERSION_return_back_fail
Act_ActTrig = AMBUSH_init

;Player:
Act_EtherComm = echo_m07_player, 1, Player, dx_m07_0350_trent, -1, pi_pirate5_head, player_body, player_commhelmet
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0360_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

[Trigger]
nickname = DIVERSION_return_back_fail
Cnd_DistShip = inside, Player, OM2_01_CORE, 2900
Act_ChangeState = FAIL, 097104


[Trigger]
nickname = AMBUSH_init
Cnd_CommComplete = dx_m07_0360_rockford
Act_SetNNObj = NN_go_to_possible_ambush_place
Act_NagOff = fly_away_tortuga
Act_NagDistTowards = POS, fly_to_possible_ambush, nag_voice, 20000, -2000, 5000, 090001, 2000
Act_ActTrig = AMBUSH_possible_point

[Trigger]
nickname = AMBUSH_possible_point
Cnd_DistVec = inside, Player, 20000, -2000, 5000, 4000
;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0370_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

Act_SetNNObj = NN_go_to_real_ambush_place
Act_NagOff = fly_to_possible_ambush
Act_NagDistTowards = POS, fly_to_real_ambush, nag_voice, 25000, -2000, -2000, 090001, 2000
Act_ActTrig = AMBUSH_near_far

;;;;;

[NPC] 
nickname = npc_armored
affiliation = or_grp
npc_ship_arch = ms7_armored
individual_name = 097205

[MsnShip]
nickname = armored
NPC = npc_armored
label = or_armored
jumper = false

; arm escort

[MsnShip]
nickname = escort_1
NPC = npc_order_elite
jumper = false
label = escort
label = or_fighters
random_name = true
rel_pos = 35, armored, 800

[MsnShip]
nickname = escort_2
NPC = npc_order_elite
jumper = false
label = escort
label = or_fighters
random_name = true
rel_pos = 80, armored, 800

[MsnShip]
nickname = escort_3
NPC = npc_order_elite
jumper = false
label = escort
label = or_fighters
random_name = true
rel_pos = 180, armored, 800

[MsnShip]
nickname = escort_4
NPC = npc_order_fighter
jumper = false
label = escort
label = or_fighters
random_name = true
rel_pos = 150, armored, 800

[MsnShip]
nickname = escort_5
NPC = npc_order_fighter
jumper = false
label = escort
label = or_fighters
random_name = true
rel_pos = 250, armored, 800

[MsnShip]
nickname = escort_6
NPC = npc_order_fighter
jumper = false
label = escort
label = or_fighters
random_name = true
rel_pos = 310, armored, 800

; reinforce

[MsnShip]
nickname = reinforce_1
NPC = npc_order_elite
jumper = false
label = reinforcement
label = or_fighters
random_name = true
rel_pos = 35, Player, 1500

[MsnShip]
nickname = reinforce_2
NPC = npc_order_fighter
jumper = false
label = reinforcement
label = or_fighters
random_name = true
rel_pos = 150, Player, 1500

[MsnShip]
nickname = reinforce_3
NPC = npc_order_fighter
jumper = false
label = reinforcement
label = or_fighters
random_name = true
rel_pos = 250, Player, 1500

;;;;;


[MsnLoot]
nickname = EMI_SLOW
archetype = m07_emp_light
string_id = 1
rel_pos_obj = armored
rel_pos_offset = 0, 0, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnLoot]
nickname = EMI_MEDIUM
archetype = m07_emp_light
string_id = 1
rel_pos_obj = armored
rel_pos_offset = 0, 0, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnLoot]
nickname = EMI_FAST
archetype = m07_emp_light
string_id = 1
rel_pos_obj = armored
rel_pos_offset = 0, 0, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnLoot]
nickname = EMI_DEFAULT
archetype = m07_emp
string_id = 1
rel_pos_obj = armored
rel_pos_offset = 0, 0, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[MsnLoot]
nickname = artifacts
archetype = m07_artifacts
string_id = 097206
rel_pos_obj = armored
rel_pos_offset = 50, 0, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = false



[ObjList]
nickname = follow_player_extra
SetPriority = ALWAYS_EXECUTE
follow = Player, -150, -70, 50, -200, 50000 

[ObjList]
nickname = ol_around_playership
StayInRange = Player, 2000

[ObjList]
nickname = ol_return_to_player
GotoShip = goto, Player, 1000, true


;;;;;


[Trigger]
nickname = AMBUSH_near_far
Cnd_DistVec = inside, Player, 25000, -2000, -2000, 3000
Act_ActTrig = ARM_BATTLE_save
Act_Save = ARM_BATTLE_save, 097603
Act_ActTrig = ARM_BATTLE_init

[Trigger]
nickname = ARM_BATTLE_save
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = ARM_BATTLE_spawn_units

[Trigger]
nickname = ARM_BATTLE_spawn_units
Cnd_Timer = 0.1
Act_SpawnShip = nag_voice
Act_RelocateShip = Player, 22500, -2000, -2000, 0.5, 0, -0.5, 0
Act_ActTrig = ARM_BATTLE_init

[Trigger]
nickname = ARM_BATTLE_init
Cnd_True = no_params
Act_SpawnShip = armored, ol_around_playership, 25000, -2000, -2000, 0.75, 0, -0.25, 0
Act_SpawnShip = rockford, ol_around_playership, 25000, -2000, -1500, 1, 0, 0, 0
Act_SpawnShip = escort_1, ol_around_playership
Act_SpawnShip = escort_2, ol_around_playership
Act_SpawnShip = escort_3, ol_around_playership
Act_SpawnShip = escort_4, ol_around_playership
Act_SpawnShip = escort_5, ol_around_playership
Act_SpawnShip = escort_6, ol_around_playership
Act_PlayerEnemyClamp = 2, 4

Act_ActTrig = prepare_rockford

Act_SetVibe = armored, Player, REP_HOSTILE_MAXIMUM
Act_SetVibe = Player, armored, REP_HOSTILE_MAXIMUM

Act_ActTrig = ARM_order_rep

Act_MarkObj = armored, 1

Act_SetNNObj = NN_attack_armored_transport

Act_NagOff = fly_to_real_ambush
Act_NagDistLeaving = armored_battle, nag_voice, armored, 090002, 1000, NAG_ALWAYS
Act_ActTrig = EMI_mission

;Rockford: 
Act_EtherComm = echo_m07, 1, Player, dx_m07_0380_rockford, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2


Act_ActTrig = EMI_mission_description
Act_ActTrig = WARP_init
Act_ActTrig = ARM_BATTLE_transport_destroyed
Act_ActTrig = ARM_BATTLE_rockford_back

[Trigger]
nickname = ARM_BATTLE_rockford_back
Cnd_DistShip = outside, Player, rockford, 2000
Act_GiveObjList = rockford, ol_return_to_player
Act_ActTrig = ARM_BATTLE_rockford_back_reset

[Trigger]
nickname = ARM_BATTLE_rockford_back_reset
Cnd_Timer = 5
Act_ActTrig = ARM_BATTLE_rockford_back

[Trigger]
nickname = ARM_order_rep
Cnd_Timer = 0.1
Act_SetVibeLblToShip = or_fighters, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, or_fighters, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = or_fighters, rockford, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = rockford, or_fighters, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = EMI_mission_description
Cnd_CommComplete = DX_M01_1111_ECHO
;Author: EMI mission rules
Act_Popupdialog = 216004, 096413, CLOSE
Act_SetNNObj = NN_stay_near_transport
Act_ActTrig = EMI_mission_rules_gotten

[Trigger]
nickname = EMI_mission_rules_gotten
Cnd_PopUpDialog = CLOSE
;Player: I will try that
Act_EtherComm = echo_player, 097556, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03

[Trigger]
nickname = EMI_SLOW_start
Cnd_Timer = 2
Act_SpawnLoot = EMI_SLOW
Act_ActTrig = EMI_SLOW_destroy
repeatable = true

[Trigger]
nickname = EMI_SLOW_destroy
Cnd_Timer = 0.1
Act_Destroy = EMI_SLOW, EXPLODE

[Trigger]
nickname = EMI_MEDIUM_start
Cnd_Timer = 1
Act_SpawnLoot = EMI_MEDIUM
Act_ActTrig = EMI_MEDIUM_destroy
repeatable = true

[Trigger]
nickname = EMI_MEDIUM_destroy
Cnd_Timer = 0.1
Act_Destroy = EMI_MEDIUM, EXPLODE

[Trigger]
nickname = EMI_FAST_start
Cnd_Timer = 0.5
Act_SpawnLoot = EMI_FAST
Act_ActTrig = EMI_FAST_destroy
repeatable = true

[Trigger]
nickname = EMI_FAST_destroy
Cnd_Timer = 0.1
Act_Destroy = EMI_FAST, EXPLODE

[Trigger]
nickname = EMI_DEFAULT_start
Cnd_Timer = 1
Act_SpawnLoot = EMI_DEFAULT
Act_ActTrig = EMI_DEFAULT_destroy
repeatable = true

[Trigger]
nickname = EMI_DEFAULT_destroy
Cnd_Timer = 0.1
Act_Destroy = EMI_DEFAULT, EXPLODE

[Trigger]
nickname = EMI_mission
Cnd_True = no_params
Act_Invulnerable = armored, true
Act_ActTrig = EMI_player_inside

[Trigger]
nickname = EMI_player_inside
Cnd_DistShip = inside, Player, armored, 500
Act_ActTrig = EMI_player_leaving
Act_ActTrig = EMI_SLOW_start
Act_ActTrig = EMI_to_medium

[Trigger]
nickname = EMI_to_medium
Cnd_Timer = 20
Act_DeActTrig = EMI_SLOW_start
Act_ActTrig = EMI_MEDIUM_start
Act_ActTrig = EMI_to_fast

[Trigger]
nickname = EMI_to_fast
Cnd_Timer = 15
Act_DeActTrig = EMI_MEDIUM_start
Act_ActTrig = EMI_FAST_start
Act_ActTrig = EMI_overheat

[Trigger]
nickname = EMI_player_leaving
Cnd_DistShip = outside, Player, armored, 510
Act_ActTrig = EMI_player_inside
Act_ActTrig = EMI_stop
Act_DeActTrig = EMI_to_medium
Act_DeActTrig = EMI_to_fast
Act_DeActTrig = EMI_overheat

[Trigger]
nickname = EMI_stop
Cnd_True = no_params
Act_DeActTrig = EMI_MEDIUM_start
Act_DeActTrig = EMI_FAST_start
Act_DeActTrig = EMI_SLOW_start

[Trigger]
nickname = EMI_overheat
Cnd_Timer = 10
Act_Invulnerable = armored, false
Act_LightFuse = armored, fuse_m07_armored_drop_shield
Act_DeActTrig = EMI_SLOW_start
Act_DeActTrig = EMI_MEDIUM_start
Act_DeActTrig = EMI_FAST_start
Act_DeActTrig = EMI_player_leaving
Act_DeActTrig = EMI_player_inside
Act_ActTrig = EMI_DEFAULT_start
Act_SetNNObj = NN_destroy_armored_transport
;Rockford: Jump drive is activating! Hurry, Trent!
Act_EtherComm = echo, 097557, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

[Trigger]
nickname = WARP_init
Cnd_Timer = 240 ; countdown
;Rockford: Jump drive is activating! Hurry, Trent!
Act_EtherComm = echo, 097558, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = WARP_20_sec_remaining
Act_LightFuse = armored, fuse_m07_warp_init

[Trigger]
nickname = WARP_20_sec_remaining
Cnd_Timer = 60
;Rockford: Jump drive almost activated!
Act_EtherComm = echo, 097559, Player, DX_M01_0000_SHORT, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = WARP_run
;;; START COMPLEX FX ???

[Trigger]
nickname = WARP_run
Cnd_Timer = 30
Act_DeActTrig = ARM_BATTLE_transport_destroyed
Act_Destroy = armored, SILENT
Act_ActTrig = WARP_fail

[Trigger]
nickname = WARP_fail
Cnd_Timer = 2
Act_ChangeState = FAIL, 097106

;-

[Trigger]
nickname = ARM_BATTLE_transport_destroyed
Cnd_Destroyed = armored, 1, EXPLODE
Act_NagOff = armored_battle
Act_NagDistLeaving = armored_final_fight, nag_voice, rockford, 090002, 3000, NAG_ALWAYS
Act_SetNNObj = NN_pick_up_artifacts

Act_SpawnLoot = artifacts
Act_MarkObj = artifacts, 1
Act_DeActTrig = WARP_init
Act_DeActTrig = WARP_20_sec_remaining
Act_DeActTrig = WARP_run
;Rockford: Trent, catch artifacts!
Act_EtherComm = echo, 097560, Player, DX_M01_0000_SHORT, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = ARM_BATTLE_artifacts_catched
Act_Invulnerable = artifacts, true

[Trigger]
nickname = ARM_BATTLE_artifacts_catched
Cnd_LootAcquired = artifacts, Player
;Player: What's next?
Act_EtherComm = echo_player, 097561, Player, DX_M01_1111_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03

Act_SpawnShip = reinforce_1
Act_SpawnShip = reinforce_2
Act_SpawnShip = reinforce_3

Act_ActTrig = ARM_order_rep

Act_ActTrig = ARM_BATTLE_final_challenge

[Trigger]
nickname = ARM_BATTLE_final_challenge
Cnd_CommComplete = DX_M01_1111_SHORT
Act_SetNNObj = NN_destroy_order_fighters

Act_DeActTrig = ARM_BATTLE_rockford_back
Act_DeActTrig = ARM_BATTLE_rockford_back_reset

Act_MarkObj = escort_1, 1
Act_MarkObj = escort_2, 1
Act_MarkObj = escort_3, 1
Act_MarkObj = escort_4, 1
Act_MarkObj = escort_5, 1
Act_MarkObj = escort_6, 1
Act_MarkObj = reinforce_1, 1
Act_MarkObj = reinforce_2, 1
Act_MarkObj = reinforce_3, 1

;Rockford: We need to destroy order ships
Act_EtherComm = echo, 097562, Player, DX_M01_0000_SHORT, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

Act_ActTrig = ARM_BATTLE_complete

[Trigger]
nickname = ARM_BATTLE_complete
Cnd_Destroyed = or_fighters, -1, ALL_IGNORE_LANDING
Act_GiveObjList = rockford, follow_player
;Player: That's last one
Act_EtherComm = echo_player, 097563, Player, DX_M01_1111_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
Act_ActTrig = ESCAPE_init

[Trigger]
nickname = ESCAPE_init
Cnd_CommComplete = DX_M01_1111_SHORT
Act_NagOff = armored_final_fight
Act_NagDistTowards = POS, goto_om13, nag_voice, 10000, -9000, 40000, 090001, 2000
Act_SetNNobj = NN_go_to_omega13_jumphole
Act_ActTrig = DIVERSION_return_back_fail
Act_ActTrig = ESCAPE_near_tortuga
Act_ActTrig = ESCAPE_around_jumphole
Act_ACtTrig = ESCAPE_dialog
;Rockford: We need going to om13
Act_EtherComm = echo, 097564, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Rockford: Don't fly around Tortuga
Act_EtherComm = echo, 097565, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

[Trigger]
nickname = ESCAPE_near_tortuga
Cnd_DistShip = inside, Player, OM2_01_CORE, 4000
Act_PobjIdle = no_params
;Rockford: DON'T FLY TO TORTUGA!
Act_EtherComm = echo, 097566, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2

[Trigger]
nickname = ESCAPE_dialog
Cnd_DistShip = inside, Player, omicron2_to_om13, 28000
;Rockford: What we got? I have nomad key
Act_EtherComm = echo, 097568, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
;Player: I have nomad tome
Act_EtherComm = echo_player, 097569, Player, DX_M01_0000_SHORT, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Player: This will fix my reputation?]
Act_EtherComm = echo_player, 097570, Player, DX_M01_0000_ECHO, -1, pi_pirate5_head, pl_male2_journeyman_body, prop_shades_03
;Rockford: We need going to om13
Act_EtherComm = echo, 097571, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2


;---

[ObjList] 
nickname = rockford_dock_om13
BreakFormation = no_params
Dock = omicron2_to_om13

;---

[Trigger]
nickname = ESCAPE_around_jumphole
Cnd_DistShip = inside, Player, omicron2_to_om13, 2500
Act_SetNNObj = NN_wait_for_rockford_jump
Act_GiveObjList = rockford, rockford_dock_om13
Act_PobjIdle = no_params
Act_Jumper = rockford, false
;Rockford: jump after me
Act_EtherComm = echo, 097567, Player, DX_M01_0000_ECHO, -1, li_rockford_head, li_male_elite_body, comm_ge_generic2
Act_ActTrig = ESCAPE_rockford_jumped

[Trigger]
nickname = ESCAPE_rockford_jumped
Cnd_Destroyed = rockford, 1, ALL
Act_SetNNObj = NN_jump_in_omega13
Act_NagOff = goto_om13
Act_NagDistLeaving = jumpin_om13, nag_voice, omicron2_to_om13, 090003, 1, 10, NAG_ALWAYS
Act_PlayerCanDock = false, omicron2_to_om13
Act_ActTrig = welcome_to_omega13

;==============

[Trigger]
nickname = welcome_to_omega13
Cnd_SystemEnter = om13
Act_NagOff = jumpin_om13
Act_Invulnerable = Player, true





[Trigger]
nickname = MSN_REP_BEFORE
Cnd_True = no_params
[;
Act_SetRep = Player, li_grp, 0.4
Act_SetRep = Player, lc_grp, 0.4
Act_SetRep = Player, lx_grp, -0.3
Act_SetRep = Player, pi_grp, -0.3
Act_SetRep = Player, rh_grp, 0

[Trigger]
nickname = MSN_REP_AFTER
Cnd_True = no_params
Act_SetRep = Player, li_grp, 0.5
Act_SetRep = Player, lc_grp, 0.5
Act_SetRep = Player, lx_grp, -0.65
Act_SetRep = Player, pi_grp, -0.65
Act_SetRep = Player, rh_grp, -0.65



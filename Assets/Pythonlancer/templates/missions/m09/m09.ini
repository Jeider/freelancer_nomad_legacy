[Mission]
npc_ship_file = missions\m09\npcships.ini

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nnvoice

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

;--------------------------------

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player, 1500, -100, 50, -200


;--------------------------

;;;gen msn ships

{{ com_sat.define('com_sat_m9', 'order_com_sat', label='the_com_sat') }}
{{ check1.define('gas_collector', 'gas_collector', label='the_checker') }}
{{ torp_musashi.define() }}


{{ objects_definitions }}

;-------------------------------------
;waypoints

{{ nn_objectives_list }}







[Trigger]
nickname = initialize_init
;InitState = ACTIVE
Cnd_True = no_params
;Act_ChangeState = SUCCEED
Act_ActTrig = tttt


[Trigger]
nickname = tttt
Cnd_Timer = 1
;;Act_ActTrig = TORP_demo
;;Act_ActTrig = FORMATION_demo
;;Act_ActTrig = FORMATION_demo
;;Act_ActTrig = KIM_CHECK_demo
;;Act_ActTrig = GUNBOAT_demo
Act_ActTrig = DESTROYER_demo




[Trigger]
nickname = DEBUG_force_dock
;;;InitState = ACTIVE  ; DEBUG ONLY
Cnd_Timer = 1
Act_ForceLand = ku_tgk_01_base







[Trigger]
nickname = init_ms9
Cnd_True = no_params
InitState = ACTIVE
{{ history.item('h900') }}
Act_ActTrig = init_objective
Act_ActTrig = ms9_create_vendor

Act_ActTrig = first_message_not_in_space
Act_ActTrig = first_message_in_space
Act_ActTrig = first_message_on_planet
Act_ActTrig = vendorbase_open_forever

[Trigger]
nickname = first_message_not_in_space
Cnd_InSpace = false
Act_DeActTrig = first_message_in_space

[Trigger]
nickname = first_message_in_space
Cnd_InSpace = true
Act_ActTrig = first_message_init_message
Act_DeActTrig = first_message_on_planet

[Trigger]
nickname = first_message_on_planet
Cnd_LaunchComplete = Player
Act_ActTrig = first_message_wait_and_call

[Trigger]
nickname = first_message_wait_and_call
Cnd_Timer = 1
Act_ActTrig = first_message_init_message

[Trigger]
nickname = first_message_init_message
Cnd_True = no_params
Act_ActTrig = vendor_message

[Trigger]
nickname = vendorbase_open_forever
Cnd_True = no_params
repeatable = true
Act_SetVibeOfferBaseHack = {{ vendor_station.name }}

[Trigger]
nickname = vendor_message
Cnd_Timer = 2
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;darcy:
{{ script.line(0) }}


[Trigger]
nickname = init_objective
Cnd_True = no_params
{{ nn_meet_vendor.set_as_path() }}

[Trigger]
nickname = ms9_create_vendor
Cnd_LocEnter = Deck, {{ vendor_station.base }}
{{ rtc.add('deck') }}
Act_ActTrig = TEKAGI_enter_bar

[Trigger]
nickname = TEKAGI_enter_bar
Cnd_LocEnter = Bar, {{ vendor_station.base }}
{{ rtc.add('yokohama') }}
Act_ActTrig = TEKAGI_enter_palace

[Trigger]
nickname = TEKAGI_enter_palace
Cnd_LocEnter = Palace, {{ vendor_station.base }}
{{ rtc.add('order') }}
Act_ActTrig = TEKAGI_do_accept

[Trigger]
nickname = TEKAGI_do_accept
Cnd_MsnResponse = accept
;;Act_DeActTrig = wilham_vendor
{{ rtc.remove('yokohama') }}
{{ rtc.remove('order') }}
{{ rtc.add('leave_yoko') }}
Act_PlayerCanDock = false
Act_PlayerCanTradelane = false

Act_ActTrig = tekagi_in_space
{{ nn_launch.set() }}

{{ history.item('h901') }}
{{ offer.init() }}
Act_ActTrig = OFFER_off

Act_ActTrig = MSN_REP_BEFORE


[Trigger]
nickname = tekagi_in_space
Cnd_SpaceEnter = ku_tgk
Act_ActTrig = tekagi_spawn_formation
Act_ActTrig = TEKAGI_launch_complete

[Trigger]
nickname = tekagi_spawn_formation
Cnd_Timer = 1
{{ direct.spawn_ship('ku_tgk', 'darcy_start', darcy) }}
{{ direct.spawn_ship('ku_tgk', 'kim_start', kim) }}
{{ direct.spawn_ship('ku_tgk', 'matome_start', matome) }}
Act_ActTrig = FRIEND_setrep

[ObjList]
nickname = tekagi_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic_player_forward, {{ matome.name }}, {{ kim.name }}, {{ darcy.name }}

[ObjList]
nickname = escape_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic_player_forward, {{ kim.name }}, {{ darcy.name }}

[Trigger]
nickname = TEKAGI_launch_complete
Cnd_LaunchComplete = Player
Act_ActTrig = TEKAGI_launch_little_delay
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
Act_ActTrig = TEKAGI_joinform

[Trigger]
nickname = TEKAGI_joinform
{{ direct.inside_pos('ku_tgk', 'm9_join_form_zone', 1000) }}
Act_GiveObjList = Player, tekagi_follow_player

[Trigger]
nickname = TEKAGI_launch_little_delay
Cnd_Timer = 1

{{ script.dialog(200, 210) }}

{{ nag.nag_voice }}
{{ nn_tgk_tlr_1.set() }}

Act_ActTrig = tgk_tlr_1_inside

[Trigger]
nickname = tgk_tlr_1_inside
{{ tgk_tlr_1.enter }}

{{ script.dialog(300, 330) }}

Act_ActTrig = tgk_tlr_1_exit

[Trigger]
nickname = tgk_tlr_1_exit
{{ tgk_tlr_1.exit }}

{{ nn_goto_sirius.set() }}

Act_ActTrig = tgk_to_sirius_NEAR
Act_ActTrig = tgk_to_sirius_NEAR_FAR

[Trigger]
nickname = tgk_to_sirius_NEAR_FAR
{{ direct.outside_pos('ku_tgk', 'm9_no_talk_zone', 5000) }}
{{ history.item('h902') }}
{{ script.dialog(340, 390) }}

[Trigger]
nickname = tgk_to_sirius_NEAR
{{ direct.inside_pos('ku_tgk', 'jh1', 3000) }}
{{ nn_jump_sirius.set() }}
Act_ActTrig = welcome_to_sig42


[Trigger]
nickname = welcome_to_sig42
Cnd_SystemEnter = sig42
{{ nag.nag_off() }}
{{ nag.nag_voice }}
Act_ActTrig = sig42_wait_for_others

[Trigger]
nickname = sig42_wait_for_others
Cnd_NPCSystemEnter = sig42, Player, {{ kim.name }}, {{ darcy.name }}, {{ matome.name }}
Act_PlayMusic = no_params
Act_ActTrig = sig42_welcome_complete

[Trigger]
nickname = sig42_welcome_complete
Cnd_True = no_params
{{ nn_to_train.set() }}
{{ script.dialog(450, 550) }}
Act_GiveObjList = Player, tekagi_follow_player
Act_ActTrig = FORMATION_spawn_ships
Act_ActTrig = FRIEND_setrep
Act_ActTrig = TRAIN_near

[Trigger]
nickname = TRAIN_near
{{ direct.inside_pos('sig42', 'to_train', 1000) }}
{{ nn_train_formation.set() }}
Act_ActTrig = FORMATION_regroup


[Trigger]
nickname = FORMATION_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_train') }}
{{ direct.spawn_ship('sig42', 'darcy_train', darcy) }}
{{ direct.spawn_ship('sig42', 'kim_train', kim) }}
{{ direct.spawn_ship('sig42', 'matome_train', matome) }}





{{ direct.ol_goto('sig42', 'train_target', 'ol_train', 'goto_cruise') }}


[MsnFormation]
nickname = train_formation
formation = order_train
position = {{ direct.pos('sig42', 'train') }}
orientation = {{ direct.orient('sig42', 'train') }}
ship = {{ train.name }}
ship = {{ lifter.name }}
ship = {{ repair.name }}

[ObjList]
nickname = ol_train_init_form
SetPriority = ALWAYS_EXECUTE
MakeNewFormation = order_train

[ObjList]
nickname = ol_train_regroup
SetPriority = ALWAYS_EXECUTE
MakeNewFormation = order_train, {{ lifter.name }}, {{ repair.name }}, {{ suzuki.member_list() }}, {{ matome.name }}, {{ kim.name }}, {{ darcy.name }}

[Trigger]
nickname = FORMATION_spawn_ships
Cnd_Timer = 1
Act_SpawnFormation = train_formation
{{ suzuki.spawn_all_slide() }}
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = FORMATION_regroup
Cnd_True = no_params
Act_GiveObjList = train, ol_train_regroup

Act_MarkObj = train, 1
{{ nn_train_formation.set() }}

Act_ActTrig = FORMATION_begin_flight
Act_ActTrig = FORMATION_join_timeout

[Trigger]
nickname = FORMATION_join_timeout
Cnd_Timer = 60
Act_ChangeState = FAIL, 1

[Trigger]
nickname = FORMATION_begin_flight
Cnd_PlayerManeuver = formation, train
Act_LockManeuvers = true
Act_GiveObjList = train, ol_train
Act_DeActTrig = FORMATION_join_timeout

{{ nn_train_follow.set() }}
Act_MarkObj = train, 0

Act_ActTrig = FORMATION_construction_point_reached
Act_ActTrig = FORMATION_talk

[Trigger]
nickname = FORMATION_talk
{{ direct.inside_pos('sig42', 'train_target', 15000, obj='train') }}
{{ script.dialog(610, 660) }}

[Trigger]
nickname = FORMATION_construction_point_reached
{{ direct.inside_pos('sig42', 'train_target', 500) }}
Act_GiveObjList = {{ train.name }}, force_stop
Act_ActTrig = FORMATION_break

[Trigger]
nickname = FORMATION_break
Cnd_Timer = 1
Act_LockManeuvers = false
Act_GiveObjList = {{ darcy.name }}, unform
Act_GiveObjList = {{ kim.name }}, unform
Act_GiveObjList = {{ matome.name }}, unform
{{ sakura.unmark_all() }}
{{ darcy.unmark_all() }}
{{ matome.unmark_all() }}

{{ script.dialog(680, 720) }}

Act_ActTrig = TO_RADAR_init

[Trigger]
nickname = FORMATION_clean_up
Cnd_True = no_params
{{ train.hide_all() }}
{{ lifter.hide_all() }}
{{ repair.hide_all() }}
{{ darcy.hide_all() }}
{{ matome.hide_all() }}

[ObjList]
nickname = ol_kim_follow_trent
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ kim.name }}

[ObjList]
nickname = ol_kim_check_position
BreakFormation = no_params
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 100, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 200, true, 50
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 100, true, 20
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 25, false, 10
avoidance = true

[ObjList]
nickname = ol_pursuit_regroup
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ kim.name }}, {{ sakura.member_list() }}

[Trigger]
nickname = KIM_CHECK_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'kim_check_dbg_player') }}
{{ direct.spawn_ship('sig42', 'kim_check_dbg', kim, ol='ol_kim_check_position') }}

{{ check1.spawn() }}
Act_ActTrig = TO_RADAR_set

[Trigger]
nickname = TO_RADAR_init
{{ script.ends(700) }}
{{ check1.spawn() }}
Act_GiveObjList = Player, ol_kim_follow_trent
Act_ActTrig = FRIEND_setrep
Act_ActTrig = TO_RADAR_set

[Trigger]
nickname = TO_RADAR_set
Cnd_Timer = 1
{{ nn_to_check.set() }}
Act_PlayMusic = none, none, none, music_anticipation_more_forboding
Act_ActTrig = TO_RADAR_sakura
Act_ActTrig = TO_RADAR_near

[Trigger]
nickname = TO_RADAR_spawn_sakura
Cnd_True = no_params
{{ direct.spawn_ship_member('sig42', 'sakura1', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura2', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura3', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura4', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura5', sakura.member_obj(5)) }}
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = TO_RADAR_sakura
{{ direct.inside_pos('sig42', 'check1', 2500) }}
Act_ActTrig = FORMATION_clean_up
Act_ActTrig = TO_RADAR_spawn_sakura

[Trigger]
nickname = TO_RADAR_near
{{ direct.inside_pos('sig42', 'check1', 1000) }}

Act_ActTrig = RADAR_init


{{ direct.save('fighter_patrol') }}
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'check_player') }}
Act_PlayMusic = none, none, none, music_anticipation_more_forboding
{{ nag.nag_voice }}

{{ check1.spawn() }}
Act_ActTrig = TO_RADAR_spawn_sakura
{{ direct.spawn_ship('sig42', 'kim_check_dbg', kim) }}
Act_ActTrig = RADAR_init


[Trigger]
nickname = RADAR_init
Cnd_True = no_param
Act_GiveObjList = kim, ol_kim_check_position
{{ script.dialog(730, 750) }}

Act_ActTrig = RADAR_stay_init
Act_ActTrig = RADAR_dlg_Ends

[Trigger]
nickname = RADAR_stay_init
{{ script.ends(740) }}
{{ nn_stay_near_check_close.set() }}

[Trigger]
nickname = RADAR_dlg_Ends
{{ script.ends(750) }}
Act_ActTrig = RADAR_trent_flee_time

[Trigger]
nickname = RADAR_trent_flee_time
Cnd_Timer = 10
Act_ActTrig = RADAR_trent_outside
Act_ActTrig = RADAR_trent_inside

[Trigger]
nickname = RADAR_trent_outside
{{ direct.outside_pos('sig42', 'm9_check_safe_zone', 350) }}
{{ script.line(760) }}
Act_ActTrig = RADAR_outside_warning_done
Act_DeActTrig = RADAR_trent_inside

[Trigger]
nickname = RADAR_outside_warning_done
{{ script.ends(760) }}
Act_ActTrig = RADAR_trent_return_time
Act_ActTrig = RADAR_trent_NOW_inside

[Trigger]
nickname = RADAR_trent_return_time
Cnd_Timer = 10
Act_ActTrig = RADAR_trent_STILL_outside

[Trigger]
nickname = RADAR_trent_STILL_outside
{{ direct.outside_pos('sig42', 'm9_check_safe_zone', 350) }}
Act_ChangeState = FAIL, 1

[Trigger]
nickname = RADAR_trent_NOW_inside
{{ direct.inside_pos('sig42', 'm9_check_safe_zone', 350) }}
Act_DeActTrig = RADAR_trent_return_time
Act_DeActTrig = RADAR_outside_warning_done
Act_DeActTrig = RADAR_trent_STILL_outside
Act_ActTrig = RADAR_patrol_close

[Trigger]
nickname = RADAR_trent_inside
{{ direct.inside_pos('sig42', 'm9_check_safe_zone', 350) }}
Act_ActTrig = RADAR_patrol_close
Act_DeActTrig = RADAR_trent_outside


[Trigger]
nickname = RADAR_patrol_close
Cnd_True = no_params
{{ script.line(765) }}
Act_PlayMusic = none, none, none, music_anticipation_light
Act_ActTrig = RADAR_patrol_close_TRENT_LEAVE
Act_ActTRig = RADAR_patrol_close_timeout

[Trigger]
nickname = RADAR_patrol_close_TRENT_LEAVE
{{ direct.outside_pos('sig42', 'm9_check_safe_zone', 350) }}
Act_ChangeState = FAIL, 1

[Trigger]
nickname = RADAR_patrol_close_timeout
Cnd_Timer = 20
Act_DeActTrig = RADAR_patrol_close_TRENT_LEAVE
{{ script.dialog(770, 820) }}
Act_ActTrig = PATROL_PURSUIT_init


[Trigger]
nickname = PATROL_PURSUIT_init
{{ script.ends(810) }}
{{ nn_ship_patrol.set() }}
Act_PlayMusic = none, none, none, music_anticipation_motivated
Act_GiveObjList = Player, ol_pursuit_regroup
Act_ActTrig = PATROL_PURSUIT_near
Act_ActTrig = COM_SAT_init

[ObjList]
nickname = enemy_to_player
StayInRange = Player, 1000

[Trigger]
nickname = PATROL_PURSUIT_near
{{ direct.inside_pos('sig42', 'ship_patrol', 3000) }}
Act_PlayMusic = none, none, none, music_anticipation_motivated
{{ patroller_a.spawn_all_slide(objlist='enemy_to_player') }}
{{ patroller_b.spawn_all_slide(objlist='enemy_to_player') }}
{{ patroller_a.mark_all() }}
{{ patroller_b.mark_all() }}
Act_ActTrig = BATTLE_setrep
Act_PlayMusic = music_anticipation_motivated, music_br_danger, music_br_battle

{{ nn_destroy_ship_patrol.set() }}
{{ script.line(830) }}

Act_ActTrig = PATROL_PURSUIT_destroyed
Act_ActTrig = PATROL_PURSUIT_near_close

[Trigger]
nickname = PATROL_PURSUIT_near_close
{{ direct.inside_pos('sig42', 'ship_patrol', 2000) }}
{{ kim.give_objlist_all('unform') }}
{{ sakura.give_objlist_all('unform') }}
{{ sakura.invulnerable() }}

[Trigger]
nickname = FRIEND_setrep
Cnd_Timer = 1
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}

[Trigger]
nickname = BATTLE_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'order', 'asf') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'enemy') }}

[Trigger]
nickname = BATTLE_silent_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_NEUTRAL', 'order', 'asf') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_NEUTRAL', 'enemy') }}

[Trigger]
nickname = PATROL_PURSUIT_destroyed
Cnd_Destroyed = ship_patroller, -1
{{ nn_destroy_ship_patrol.hide() }}
{{ script.dialog(840, 860) }}

Act_GiveObjList = Player, ol_pursuit_regroup
Act_ActTrig = GUNBOAT_init

[Trigger]
nickname = GUNBOAT_init
{{ script.ends(850) }}
Act_PlayMusic = music_upcoming_action_light, music_br_danger, music_br_battle
{{ nn_gunboat_patrol.set() }}
Act_ActTrig = GUNBOAT_near

[Trigger]
nickname = GUNBOAT_demo
Cnd_True = no_params

Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_bgb') }}
{{ direct.spawn_ship('sig42', 'kim_bgb', kim) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb1', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb2', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb3', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb4', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb5', sakura.member_obj(5)) }}
Act_ActTrig = COM_SAT_init


Act_ActTrig = GUNBOAT_near

[Trigger]
nickname = GUNBOAT_near
{{ direct.inside_pos('sig42', 'm9_gunboat_zone', 3000) }}
Act_ActTrig = GUNBOAT_the_battle


{{ direct.save('gunboat_patrol') }}
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_bgb') }}
Act_PlayMusic = music_upcoming_action_light, music_br_danger, music_br_battle
{{ nag.nag_voice }}
{{ direct.spawn_ship('sig42', 'kim_bgb', kim) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb1', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb2', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb3', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb4', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb5', sakura.member_obj(5)) }}
Act_ActTrig = COM_SAT_init
Act_ActTrig = FRIEND_setrep
Act_ActTrig = GUNBOAT_the_battle


[Trigger]
nickname = GUNBOAT_the_battle
Cnd_True = no_params
{{ bgb_support_a.spawn_all_slide(objlist='enemy_to_player') }}
{{ bgb_support_b.spawn_all_slide(objlist='enemy_to_player') }}
{{ bgb_support_a.mark_all() }}
{{ bgb_support_b.mark_all() }}
{{ direct.spawn_capital_group('sig42', 'BGB', invulnerable=False) }}
{{ direct.mark_capital_group('BGB') }}
Act_ActTrig = BATTLE_setrep

{{ nn_destroy_gunboat_patrol.set() }}
Act_ActTrig = GUNBOAT_destroyed
Act_ActTrig = GUNBOAT_near_close

[Trigger]
nickname = GUNBOAT_near_close
{{ direct.inside_pos('sig42', 'm9_gunboat_zone', 2000) }}
{{ kim.give_objlist_all('unform') }}
{{ sakura.give_objlist_all('unform') }}
{{ sakura.invulnerable() }}
{{ script.dialog(870, 890) }}

[Trigger]
nickname = GUNBOAT_destroyed
Cnd_Destroyed = bgb, -1
{{ nn_destroy_ship_patrol.hide() }}

{{ script.dialog(900, 920) }}

Act_GiveObjList = Player, ol_pursuit_regroup
Act_ActTrig = ROAD_TO_BDR_init

[Trigger]
nickname = ROAD_TO_BDR_init
{{ script.ends(910) }}
Act_PlayMusic = music_upcoming_action_heavy, music_br_danger, music_br_battle
{{ nn_destroyer_patrol.set() }}
Act_ActTrig = BDR_near
Act_ActTrig = BDR_near_close


[Trigger]
nickname = BDR_near
{{ direct.inside_pos('sig42', 'm9_destroyer_zone', 3000) }}
Act_ActTrig = DESTROYER_init
{{ check1.hide() }}

{{ direct.save('destroyer_attack') }}
Act_PlayMusic = music_upcoming_action_heavy, music_br_danger, music_br_battle
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_bdr') }}
{{ nag.nag_voice }}
{{ direct.spawn_ship('sig42', 'kim_bdr', kim) }}
{{ direct.spawn_ship_member('sig42', 'sakura1_bdr', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura2_bdr', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura3_bdr', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura4_bdr', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura5_bdr', sakura.member_obj(5)) }}
Act_ActTrig = COM_SAT_init
Act_ActTrig = FRIEND_setrep
Act_ActTrig = DESTROYER_init
Act_ActTrig = BDR_near_close

[Trigger]
nickname = BDR_near_close
{{ direct.inside_pos('sig42', 'm9_destroyer_zone', 2000) }}
{{ kim.give_objlist_all('unform') }}
{{ sakura.give_objlist_all('unform') }}
{{ sakura.invulnerable() }}
{{ script.dialog(950, 960) }}
Act_ActTrig = BDR_help_info

[Trigger]
nickname = BDR_help_info
{{ script.ends(960) }}
{{ direct.dialog('destroyers') }}

[Trigger]
nickname = DESTROYER_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_bdr') }}
{{ direct.spawn_ship('sig42', 'kim_bdr', kim) }}
{{ direct.spawn_ship_member('sig42', 'sakura1_bdr', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura2_bdr', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura3_bdr', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura4_bdr', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura5_bdr', sakura.member_obj(5)) }}


Act_ActTrig = COM_SAT_init
;;Act_ActTRig = TRAP_init
Act_ActTrig = DESTROYER_init
;;Act_ActTrig = DESTROYER_fireship_demo

{# {{ direct.ol_goto('sig42', 'bdr_a1_target', 'ol_bdr_a1', 'goto_cruise') }} #}
{# {{ direct.ol_goto('sig42', 'bdr_a2_target', 'ol_bdr_a2', 'goto_cruise') }} #}
{# {{ direct.ol_goto('sig42', 'bdr_a3_target', 'ol_bdr_a3', 'goto_cruise') }} #}



[ObjList]
nickname = ol_bdr_a1
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bdr_a1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_a2
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bdr_a2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_a3
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bdr_a3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_b1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_b1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_b2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_b2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_b3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_b3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_c1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_c1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_c2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_c2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_c3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_c3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_d1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_d1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_d2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_d2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_d3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_d3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_e1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_e1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_e2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_e2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_e3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_e3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_f1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_f1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_f2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_f2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_f3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_f3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59


[ObjList]
nickname = ol_bdr__final
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 500, false, 5

[Trigger]
nickname = DESTROYER_fireship_demo
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a1, 'bdr01_test') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
Act_ActTrig = DESTROYER_fireship_demo_slow_down

[Trigger]
nickname = DESTROYER_TORPEDO_FIRE_RANGE
Cnd_True = no_params
{{ script.dialog(980, 985) }}
{{ nn_catch_torpedoes.set() }}
Act_PlayMusic = none, none, none, music_li_battle

[Trigger]
nickname = DESTROYER_fireship_demo_slow_down
Cnd_Timer = 2
Act_GiveObjList = bdr_a1, ol_bdr__final

[Trigger]
nickname = DESTROYER_A
Cnd_True = no_params
Act_ActTrig = BDR_A1_INSIDE
Act_ActTrig = BDR_A2_INSIDE
Act_ActTrig = BDR_A3_INSIDE
Act_ActTrig = BDR_A1
Act_ActTrig = BDR_A2
Act_ActTrig = BDR_A3

[Trigger]
nickname = BDR_A1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a1, 'bdr_a1', ol='ol_bdr_a1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_a1.mark() }}

[Trigger]
nickname = BDR_A2
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a2, 'bdr_a2', ol='ol_bdr_a2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_a2.mark() }}

[Trigger]
nickname = BDR_A3
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a3, 'bdr_a3', ol='ol_bdr_a3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_a3.mark() }}

[Trigger]
nickname = DESTROYER_B
Cnd_True = no_params
Act_ActTrig = BDR_B1_INSIDE
Act_ActTrig = BDR_B2_INSIDE
Act_ActTrig = BDR_B3_INSIDE
Act_ActTrig = BDR_B1
Act_ActTrig = BDR_B2
Act_ActTrig = BDR_B3
{{ script.line(1000) }}

[Trigger]
nickname = BDR_B1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_b1, 'bdr_b1', ol='ol_bdr_b1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_b1.mark() }}

[Trigger]
nickname = BDR_B2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_b2, 'bdr_b2', ol='ol_bdr_b2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_b2.mark() }}

[Trigger]
nickname = BDR_B3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_b3, 'bdr_b3', ol='ol_bdr_b3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_b3.mark() }}

[Trigger]
nickname = DESTROYER_C
Cnd_True = no_params
Act_ActTrig = BDR_C1_INSIDE
Act_ActTrig = BDR_C2_INSIDE
Act_ActTrig = BDR_C3_INSIDE
Act_ActTrig = BDR_C1
Act_ActTrig = BDR_C2
Act_ActTrig = BDR_C3
{{ script.line(1035) }}

[Trigger]
nickname = BDR_C1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_c1, 'bdr_c1', ol='ol_bdr_c1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_c1.mark() }}

[Trigger]
nickname = BDR_C2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_c2, 'bdr_c2', ol='ol_bdr_c2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_c2.mark() }}

[Trigger]
nickname = BDR_C3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_c3, 'bdr_c3', ol='ol_bdr_c3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_c3.mark() }}

[Trigger]
nickname = DESTROYER_D
Cnd_True = no_params
Act_ActTrig = BDR_D1_INSIDE
Act_ActTrig = BDR_D2_INSIDE
Act_ActTrig = BDR_D3_INSIDE
Act_ActTrig = BDR_D1
Act_ActTrig = BDR_D2
Act_ActTrig = BDR_D3
{{ script.line(1010) }}

[Trigger]
nickname = BDR_D1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_d1, 'bdr_d1', ol='ol_bdr_d1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_d1.mark() }}

[Trigger]
nickname = BDR_D2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_d2, 'bdr_d2', ol='ol_bdr_d2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_d2.mark() }}

[Trigger]
nickname = BDR_D3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_d3, 'bdr_d3', ol='ol_bdr_d3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_d3.mark() }}

[Trigger]
nickname = DESTROYER_E
Cnd_True = no_params
Act_ActTrig = BDR_E1_INSIDE
Act_ActTrig = BDR_E2_INSIDE
Act_ActTrig = BDR_E3_INSIDE
Act_ActTrig = BDR_E1
Act_ActTrig = BDR_E2
Act_ActTrig = BDR_E3
{{ script.line(1020) }}

[Trigger]
nickname = BDR_E1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_e1, 'bdr_e1', ol='ol_bdr_e1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_e1.mark() }}

[Trigger]
nickname = BDR_E2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_e2, 'bdr_e2', ol='ol_bdr_e2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_e2.mark() }}

[Trigger]
nickname = BDR_E3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_e3, 'bdr_e3', ol='ol_bdr_e3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_e3.mark() }}

[Trigger]
nickname = DESTROYER_F
Cnd_True = no_params
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
Act_ActTrig = BDR_F1_INSIDE
Act_ActTrig = BDR_F2_INSIDE
Act_ActTrig = BDR_F3_INSIDE
Act_ActTrig = BDR_F1
Act_ActTrig = BDR_F2
Act_ActTrig = BDR_F3
{{ script.line(1030) }}

[Trigger]
nickname = BDR_F1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_f1, 'bdr_f1', ol='ol_bdr_f1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_f1.mark() }}

[Trigger]
nickname = BDR_F2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_f2, 'bdr_f2', ol='ol_bdr_f2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_f2.mark() }}

[Trigger]
nickname = BDR_F3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_f3, 'bdr_f3', ol='ol_bdr_f3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
{{ bdr_f3.mark() }}

[Trigger]
nickname = BDR_A1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_a1') }}
Act_GiveObjList = bdr_a1, ol_bdr__final

[Trigger]
nickname = BDR_A2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_a2') }}
Act_GiveObjList = bdr_a2, ol_bdr__final

[Trigger]
nickname = BDR_A3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_a3') }}
Act_GiveObjList = bdr_a3, ol_bdr__final

[Trigger]
nickname = BDR_B1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_b1') }}
Act_GiveObjList = bdr_b1, ol_bdr__final

[Trigger]
nickname = BDR_B2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_b2') }}
Act_GiveObjList = bdr_b2, ol_bdr__final

[Trigger]
nickname = BDR_B3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_b3') }}
Act_GiveObjList = bdr_b3, ol_bdr__final

[Trigger]
nickname = BDR_C1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_c1') }}
Act_GiveObjList = bdr_c1, ol_bdr__final

[Trigger]
nickname = BDR_C2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_c2') }}
Act_GiveObjList = bdr_c2, ol_bdr__final

[Trigger]
nickname = BDR_C3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_c3') }}
Act_GiveObjList = bdr_c3, ol_bdr__final

[Trigger]
nickname = BDR_D1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_d1') }}
Act_GiveObjList = bdr_d1, ol_bdr__final

[Trigger]
nickname = BDR_D2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_d2') }}
Act_GiveObjList = bdr_d2, ol_bdr__final

[Trigger]
nickname = BDR_D3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_d3') }}
Act_GiveObjList = bdr_d3, ol_bdr__final

[Trigger]
nickname = BDR_E1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_e1') }}
Act_GiveObjList = bdr_e1, ol_bdr__final

[Trigger]
nickname = BDR_E2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_e2') }}
Act_GiveObjList = bdr_e2, ol_bdr__final

[Trigger]
nickname = BDR_E3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_e3') }}
Act_GiveObjList = bdr_e3, ol_bdr__final

[Trigger]
nickname = BDR_F1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_f1') }}
Act_GiveObjList = bdr_f1, ol_bdr__final

[Trigger]
nickname = BDR_F2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_f2') }}
Act_GiveObjList = bdr_f2, ol_bdr__final

[Trigger]
nickname = BDR_F3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_f3') }}
Act_GiveObjList = bdr_f3, ol_bdr__final


[Trigger]
nickname = TORPEDO_setrep
Cnd_True = no_params
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'torpedo_attack', 'com_sat') }}

{{ bdr_support_b.define_respawn('BATTLE_setrep') }}
{{ bdr_support_c.define_respawn('BATTLE_setrep') }}
{{ bdr_support_d.define_respawn('BATTLE_setrep') }}
{{ bdr_support_e.define_respawn('BATTLE_setrep') }}
{{ bdr_support_f.define_respawn('BATTLE_setrep') }}


[ObjList]
nickname = ol_defend_com_sat
StayInRange = {{ direct.pos('sig42', 'com_sat') }}, 5000

[Trigger]
nickname = DESTROYER_init
Cnd_True = no_params
{{ nn_hit_bdr.set() }}
{{ bdr_support_a.spawn_all_slide() }}
Act_ActTrig = DESTROYER_com_sat_defence_delay
Act_ActTrig = DESTROYER_A
Act_ActTrig = DESTROYER_second_wing_start_delay
;;Act_ActTrig = DESTROYER_second_wing_start_force
Act_ActTrig = COM_SAT_damage_check
Act_ActTrig = STATUS_init

[;;;

[Trigger]
nickname = DESTROYER_second_wing_start_delay
Cnd_True = no_params
Act_ActTrig = DESTROYER_B_delay
{% if diff.true('M9_SPAWN_WAVE_C') %}
Act_ActTrig = DESTROYER_C_delay
{% endif %}
Act_ActTrig = DESTROYER_D_delay
Act_ActTrig = DESTROYER_E_delay
Act_ActTrig = DESTROYER_F_delay

;;; debug trigger
[Trigger]
nickname = DESTROYER_second_wing_start_force
Cnd_True = no_params
Act_ActTrig = DESTROYER_B
Act_ActTrig = DESTROYER_C
Act_ActTrig = DESTROYER_D
Act_ActTrig = DESTROYER_E
Act_ActTrig = DESTROYER_F

[Trigger]
nickname = DESTROYER_com_sat_defence_delay
Cnd_Timer = 30
Act_ActTrig = COM_SAT_defence

[Trigger]
nickname = DESTROYER_B_delay
Cnd_Timer = {{ diff.val('M9_DESTROYER_B_DELAY') }}
{{ bdr_support_b.spawn_all_slide() }}
{{ bdr_support_b.turn_respawn_on() }}
Act_ActTrig = DESTROYER_B
Act_ActTrig = DESTROYER_TORPEDO_FIRE_RANGE

[Trigger]
nickname = DESTROYER_C_delay
Cnd_Timer = {{ diff.val('M9_DESTROYER_C_DELAY') }}
{{ bdr_support_c.spawn_all_slide() }}
{{ bdr_support_c.turn_respawn_on() }}
Act_ActTrig = DESTROYER_C

[Trigger]
nickname = DESTROYER_D_delay
Cnd_Timer = {{ diff.val('M9_DESTROYER_D_DELAY') }}
{{ bdr_support_d.spawn_all_slide() }}
{{ bdr_support_d.turn_respawn_on() }}
Act_ActTrig = DESTROYER_D

[Trigger]
nickname = DESTROYER_E_delay
Cnd_Timer = {{ diff.val('M9_DESTROYER_E_DELAY') }}
{{ bdr_support_e.spawn_all_slide() }}
{{ bdr_support_e.turn_respawn_on() }}
Act_ActTrig = DESTROYER_E

[Trigger]
nickname = DESTROYER_F_delay
Cnd_Timer = {{ diff.val('M9_DESTROYER_F_DELAY') }}
{{ bdr_support_f.spawn_all_slide() }}
{{ bdr_support_f.turn_respawn_on() }}
Act_ActTrig = DESTROYER_F

[Trigger]
nickname = DESTROYER_off
Cnd_True = no_params
{{ bdr_support_b.turn_respawn_off() }}
{{ bdr_support_c.turn_respawn_off() }}
{{ bdr_support_d.turn_respawn_off() }}
{{ bdr_support_e.turn_respawn_off() }}
{{ bdr_support_f.turn_respawn_off() }}


[Trigger]
nickname = DESTROYER_clean_up_defence
Cnd_True = no_params
{{ suzuki_bdr.hide_all() }}
{{ yanagi_bdr.hide_all() }}
{{ sakura.hide_all() }}
Act_ActTrig = DESTROYER_off

[Trigger]
nickname = DESTROYER_clean_up_torpedo
Cnd_True = no_params
{{ direct.hide_capital_group('BDR_TORP') }}
{{ bdr_support_a.hide_all() }}
{{ bdr_support_b.hide_all() }}
{{ bdr_support_c.hide_all() }}
{{ bdr_support_d.hide_all() }}
{{ bdr_support_e.hide_all() }}
{{ bdr_support_f.hide_all() }}

[Trigger]
nickname = DESTROYER_clean_up_bship
Cnd_True = no_params
{{ direct.hide_capital_group('ASF_CAP') }}


[Trigger]
nickname = STATUS_init
Cnd_True = no_params
;;;;;;; DEBUG RESULT
;;;Act_ActTrig = COM_SAT_spawn_result
;;;[;;;
Act_ActTrig = STATUS_50
Act_ActTrig = STATUS_75
Act_ActTrig = STATUS_90
Act_ActTrig = STATUS_100

[Trigger]
nickname = STATUS_off
Cnd_True = no_params
Act_DeActTrig = STATUS_50
Act_DeActTrig = STATUS_75
Act_DeActTrig = STATUS_90
Act_DEActTrig = STATUS_100

[Trigger]
nickname = STATUS_50
Cnd_Timer = 80
{{ script.dialog(1100, 1110) }}

[Trigger]
nickname = STATUS_75
Cnd_Timer = 250
{{ script.line(1120) }}

[Trigger]
nickname = STATUS_90
Cnd_Timer = 400
{{ script.line(1140) }}

[Trigger]
nickname = STATUS_100
Cnd_Timer = 500
{{ script.dialog(1170, 1210) }}
Act_ActTrig = COM_SAT_spawn_result


[Trigger]
nickname = COM_SAT_init
Cnd_True = no_params
{{ com_sat.spawn() }}

[Trigger]
nickname = COM_SAT_defence
Cnd_True = no_params
{{ suzuki_bdr.spawn_all_slide(objlist='ol_defend_com_sat') }}
{{ yanagi_bdr.spawn_all_slide(objlist='ol_defend_com_sat') }}
{{ suzuki_bdr.invulnerable() }}
{{ yanagi_bdr.invulnerable() }}
{{ direct.spawn_ship('sig42', 'darcy_bdr', darcy) }}
Act_ActTrig = BATTLE_setrep

[Trigger]
nickname = COM_SAT_damage_check
Cnd_True = no_params
Act_ActTrig = COM_SAT_hit99
Act_ActTrig = COM_SAT_hit66
Act_ActTrig = COM_SAT_hit33
Act_ActTrig = COM_SAT_destroyed


[Trigger]
nickname = COM_SAT_hit99
Cnd_HealthDec = {{ com_sat.name }}, 0.99
{{ script.line(1050) }}

[Trigger]
nickname = COM_SAT_hit66
Cnd_HealthDec = {{ com_sat.name }}, 0.66
{{ script.line(1060) }}

[Trigger]
nickname = COM_SAT_hit33
Cnd_HealthDec = {{ com_sat.name }}, 0.33
{{ script.line(1070) }}

[Trigger]
nickname = COM_SAT_destroyed
Cnd_Destroyed = {{ com_sat.name }}
{{ script.line(1080) }}
Act_ActTrig = COM_SAT_failure

[Trigger]
nickname = COM_SAT_failure
{{ script.ends(1080) }}
Act_ChangeState = FAIL, 1

[Trigger]
nickname = COM_SAT_disable_checks
Cnd_True = no_params
Act_DeActTrig = COM_SAT_hit99
Act_DeActTrig = COM_SAT_hit66
Act_DeActTrig = COM_SAT_hit33
Act_DeActTrig = COM_SAT_destroyed

[MsnLoot]
nickname = uploaded_data
archetype = escape_lifeboat
string_id = 1
rel_pos_obj = com_sat
rel_pos_offset = 0, 300, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true


[Trigger]
nickname = COM_SAT_spawn_result
;;Cnd_True = no_params
Cnd_Timer = 1
Act_ActTrig = COM_SAT_disable_checks
Act_SpawnLoot = uploaded_data
Act_MarkObj = uploaded_data, 1
Act_Invulnerable = uploaded_data, true
{{ nn_collect_chrysatemum.set() }}
Act_ActTrig = COM_SAT_got_loot
Act_ActTrig = COM_SAT_got_loot_timeout

[Trigger]
nickname = COM_SAT_got_loot_timeout
Cnd_Timer = 60
Act_ChangeState = FAIL, 1

[Trigger]
nickname = COM_SAT_got_loot
Cnd_LootAcquired = uploaded_data, Player
Act_RemoveCargo = uploaded_data
Act_DeActTrig = COM_SAT_got_loot_timeout
Act_ActTrig = TRAP_init
Act_Destroy = {{ com_sat.name }}, EXPLODE


[ObjList]
nickname = ol_matome_trap
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bbs1') }}, 10, true, 100

[ObjList]
nickname = ol_kamikadze_trap
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'ldr1') }}, 10, true, 100


[MsnFormation]
nickname = kamikadze_group
formation = kamikadze_line
position = {{ direct.pos('sig42', 'kamikadze_trap') }}
orientation = {{ direct.orient('sig42', 'kamikadze_trap') }}
{{ kamikadze.formation_members() }}

[Trigger]
nickname = TRAP_init
Cnd_True = no_params
{{ direct.spawn_capital_group('sig42', 'ASF_CAP') }}
{{ script.dialog(1250, 1330) }}
Act_PlayMusic = none, none, none, music_reveal_enemy_position_of_strength
Act_ActTrig = BATTLE_setrep
Act_ActTRig = TRAP_kamikadze

[Trigger]
nickname = TRAP_kamikadze
{{ script.ends(1330) }}
{{ direct.spawn_ship('sig42', 'matome_trap', matome, ol='ol_matome_trap') }}
{{ matome.invulnerable() }}
Act_SpawnFormation = kamikadze_group
{{ kamikadze.invulnerable() }}
Act_GiveObjList = kamikadze_group, ol_kamikadze_trap


Act_ActTrig = TRAP_rtc
Act_ActTrig = TRAP_matome_hit
Act_ActTrig = TRAP_kamikadze_hit


[Trigger]
nickname = TRAP_rtc
Cnd_true = no_params
{{ thorn_m9_kamikadze.call() }}
Act_ActTrig = DESTROYER_clean_up_defence
{{ script.line(1340) }}
{{ script.line(1350) }}
{{ script.line(1355) }}
{{ script.line(1360) }}

Act_ActTrig = TRAP_rtc_done

[Trigger]
nickname = TRAP_matome_hit
{{ direct.inside_pos('sig42', 'm9_bbs1_explode', 100, obj=matome.name) }}
{{ matome.explode_all() }}
{{ bbs1.fuse('b_battleship_body_fuse') }}

[Trigger]
nickname = TRAP_kamikadze_hit
{{ direct.inside_pos('sig42', 'm9_ldr1_explode', 100, obj=kamikadze.member(1)) }}
{{ kamikadze.explode_all() }}
{{ ldr1.fuse('l_dreadnought_fuse') }}

[Trigger]
nickname = TRAP_rtc_done
Cnd_Timer = 33
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_escape') }}
Act_RelocateShip = darcy, {{ direct.pos_orient('sig42', 'darcy_escape') }}
Act_RelocateShip = kim, {{ direct.pos_orient('sig42', 'kim_escape') }}}
Act_PlayMusic = none, none, none, music_solemn_and_grave
Act_ActTrig = TRAP_rtc_revert
Act_ActTRig = BATTLE_silent_setrep

[Trigger]
nickname = TRAP_rtc_revert
Cnd_Timer = 1
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_GiveObjList = Player, escape_follow_player
Act_ActTrig = ESCAPE_init

[Trigger]
nickname = ESCAPE_init
Cnd_Timer = 1
{{ script.dialog(1400, 1410) }}
{{ nn_randevoue.set() }}
Act_ActTrig = ESCAPE_musashi_far

[Trigger]
nickname = ESCAPE_musashi_far
{{ direct.inside_pos('sig42', 'torp_musashi', 10000) }}
Act_PlayMusic = none, none, none, music_victory
{{ torp_musashi.spawn() }}
Act_ActTrig = DESTROYER_clean_up_torpedo
Act_ActTrig = BATTLE_silent_setrep
Act_ActTrig = ESCAPE_the_musashi

[Trigger]
nickname = ESCAPE_the_musashi
Cnd_Timer = 1
{{ script.dialog(1420, 1500) }}
{{ nn_dock_musashi.set() }}
Act_ActTrig = ESCAPE_musashi_close
Act_ActTrig = ESCAPE_musashi_close_near
Act_ActTrig = MUSASHI_inside

[Trigger]
nickname = ESCAPE_musashi_close
{{ direct.inside_pos('sig42', 'torp_musashi', 1000) }}
Act_ActTrig = DESTROYER_clean_up_bship

[Trigger]
nickname = ESCAPE_musashi_close_near
{{ direct.inside_pos('sig42', 'm9_torp_musashi_zone_close', 100) }}
{{ darcy.hide_all() }}
{{ kim.hide_all() }}

[Trigger]
nickname = MUSASHI_inside
Cnd_BaseEnter = sig42_98_base
{{ rtc.add('final') }}
Act_ActTrig = MUSASHI_in_xen

[Trigger]
nickname = MUSASHI_in_xen
Cnd_BaseEnter = xen_99_base
{{ history.item('h903') }}
{{ direct.lock_docks }}
Act_AdjAcct = 15000
Act_ChangeState = SUCCEED

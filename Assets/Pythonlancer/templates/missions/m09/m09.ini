[Mission]
npc_ship_file = missions\m09\npcships.ini

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

;--------------------------------

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player


;--------------------------

;;;gen msn ships

{{ com_sat.define('com_sat_m9', 'order_com_sat', label='the_com_sat') }}
{{ check1.define('gas_collector', 'gas_collector', label='the_checker') }}
{{ torp_musashi.define() }}


{{ objects_definitions }}

;-------------------------------------
;waypoints

{{ nn_objectives_list }}




[Trigger]
nickname = initialize_init
InitState = ACTIVE
Cnd_True = no_params
;Act_ChangeState = SUCCEED
Act_ActTrig = tttt


[Trigger]
nickname = tttt
Cnd_Timer = 1
;;Act_ActTrig = TORP_demo
;;Act_ActTrig = FORMATION_demo
;;Act_ActTrig = FORMATION_demo
;;Act_ActTrig = KIM_CHECK_demo
;;Act_ActTrig = GUNBOAT_demo
Act_ActTrig = DESTROYER_demo




[Trigger]
nickname = DEBUG_force_dock
;;InitState = ACTIVE  ; DEBUG ONLY
Cnd_Timer = 1
Act_ForceLand = ku_tgk_01_base

[Trigger]
nickname = start
;;InitState = ACTIVE
Act_ActTrig = OFFER_space
Act_ActTrig = TEKAGI_bar

[Trigger]
nickname = OFFER_off
Cnd_True = no_params
;;;

[Trigger]
nickname = TEKAGI_bar
Cnd_BaseEnter = ku_tgk_01_base
{{ rtc.add('yokohama') }}
{{ rtc.add('order') }}
Act_ActTrig = TEKAGI_do_accept

[Trigger]
nickname = TEKAGI_do_accept
Cnd_MsnResponse = accept
;;Act_DeActTrig = wilham_vendor
{{ rtc.remove('yokohama') }}
{{ rtc.remove('order') }}
Act_PlayerCanDock = false
Act_PlayerCanTradelane = false

Act_ActTrig = tekagi_in_space
{{ nn_launch.set() }}

{{ offer.init() }}
Act_ActTrig = OFFER_off

Act_ActTrig = MSN_REP_BEFORE


[Trigger]
nickname = tekagi_in_space
Cnd_SpaceEnter = ku_tgk
Act_ActTrig = tekagi_spawn_formation
Act_ActTrig = TEKAGI_launch_complete

[Trigger]
nickname = tekagi_spawn_formation
Cnd_Timer = 1
{{ direct.spawn_ship('ku_tgk', 'darcy_start', darcy) }}
{{ direct.spawn_ship('ku_tgk', 'kim_start', kim) }}
{{ direct.spawn_ship('ku_tgk', 'matome_start', matome) }}
Act_ActTrig = FRIEND_setrep

[ObjList]
nickname = tekagi_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic_player_forward, {{ matome.name }}, {{ kim.name }}, {{ darcy.name }}

[ObjList]
nickname = escape_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic_player_forward, {{ kim.name }}, {{ darcy.name }}

[Trigger]
nickname = TEKAGI_launch_complete
Cnd_LaunchComplete = Player
Act_ActTrig = TEKAGI_launch_little_delay
Act_GiveObjList = Player, tekagi_follow_player
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}

[Trigger]
nickname = TEKAGI_launch_little_delay
Cnd_Timer = 1

{{ nag.nag_voice }}
{{ nn_tgk_tlr_1.set() }}

Act_ActTrig = tgk_tlr_1_inside

[Trigger]
nickname = tgk_tlr_1_inside
{{ tgk_tlr_1.enter }}

Act_ActTrig = tgk_tlr_1_exit

[Trigger]
nickname = tgk_tlr_1_exit
{{ tgk_tlr_1.exit }}

{{ nn_tgk_tlr_2.set() }}

Act_ActTrig = tgk_tlr_2_inside

[Trigger]
nickname = tgk_tlr_2_inside
{{ tgk_tlr_2.enter }}

Act_ActTrig = tgk_tlr_2_exit

[Trigger]
nickname = tgk_tlr_2_exit
{{ tgk_tlr_2.exit }}

{{ nn_goto_sirius.set() }}

Act_ActTrig = tgk_to_sirius_NEAR

[Trigger]
nickname = tgk_to_sirius_NEAR
{{ direct.inside_pos('ku_tgk', 'jh1', 3000) }}
{{ nn_jump_sirius.set() }}

Act_ActTrig = ___

{{ nn_to_train.set() }}



[Trigger]
nickname = FORMATION_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_train') }}
{{ direct.spawn_ship('sig42', 'darcy_train', darcy) }}
{{ direct.spawn_ship('sig42', 'kim_train', kim) }}
{{ direct.spawn_ship('sig42', 'matome_train', matome) }}
Act_ActTrig = FORMATION_spawn_ships
Act_ActTrig = FRIEND_setrep

{{ direct.ol_goto('sig42', 'train_target', 'ol_train', 'goto_cruise') }}


[MsnFormation]
nickname = train_formation
formation = order_train
position = {{ direct.pos('sig42', 'train') }}
orientation = {{ direct.orient('sig42', 'train') }}
ship = {{ train.name }}
ship = {{ lifter.name }}
ship = {{ repair.name }}

[ObjList]
nickname = ol_train_init_form
SetPriority = ALWAYS_EXECUTE
MakeNewFormation = order_train

[ObjList]
nickname = ol_train_regroup
SetPriority = ALWAYS_EXECUTE
MakeNewFormation = order_train, {{ lifter.name }}, {{ repair.name }}, {{ suzuki.member_list() }}, {{ matome.name }}, {{ kim.name }}, {{ darcy.name }}

[Trigger]
nickname = FORMATION_spawn_ships
Cnd_Timer = 1
Act_SpawnFormation = train_formation
{{ suzuki.spawn_all_slide() }}
Act_ActTrig = FORMATION_regroup
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = FORMATION_regroup
Cnd_Timer = 2
Act_GiveObjList = train, ol_train_regroup

{{ nn_train_formation.set() }}

Act_ActTrig = FORMATION_begin_flight

[Trigger]
nickname = FORMATION_begin_flight
Cnd_PlayerManeuver = formation, train
Act_LockManeuvers = true
Act_GiveObjList = train, ol_train

{{ nn_train_follow.set() }}

Act_ActTrig = FORMATION_construction_point_reached

[Trigger]
nickname = FORMATION_construction_point_reached
{{ direct.inside_pos('sig42', 'train_target', 500) }}
Act_GiveObjList = {{ train.name }}, force_stop
Act_ActTrig = FORMATION_break

[Trigger]
nickname = FORMATION_break
Cnd_Timer = 1
Act_LockManeuvers = false
Act_GiveObjList = {{ darcy.name }}, unform
Act_GiveObjList = {{ kim.name }}, unform
Act_GiveObjList = {{ matome.name }}, unform
{{ sakura.unmark_all() }}
{{ darcy.unmark_all() }}
{{ matome.unmark_all() }}

Act_ActTrig = TO_RADAR_init

[Trigger]
nickname = FORMATION_clean_up
Cnd_True = no_params
{{ train.hide_all() }}
{{ lifter.hide_all() }}
{{ repair.hide_all() }}
{{ darcy.hide_all() }}
{{ matome.hide_all() }}

[ObjList]
nickname = ol_kim_follow_trent
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ kim.name }}

[ObjList]
nickname = ol_kim_check_position
BreakFormation = no_params
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 100, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 200, true, 50
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 100, true, 20
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'kim_check') }}, 25, false, 10
avoidance = true

[ObjList]
nickname = ol_pursuit_regroup
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ kim.name }}, {{ sakura.member_list() }}

[Trigger]
nickname = KIM_CHECK_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'kim_check_dbg_player') }}
{{ direct.spawn_ship('sig42', 'kim_check_dbg', kim, ol='ol_kim_check_position') }}

{{ check1.spawn() }}
Act_ActTrig = TO_RADAR_set

[Trigger]
nickname = TO_RADAR_init
Cnd_True = no_params
{{ check1.spawn() }}
Act_GiveObjList = Player, ol_kim_follow_trent
Act_ActTrig = TO_RADAR_set

[Trigger]
nickname = TO_RADAR_set
Cnd_Timer = 1
{{ nn_to_check.set() }}
Act_ActTrig = TO_RADAR_sakura
Act_ActTrig = TO_RADAR_near

[Trigger]
nickname = TO_RADAR_sakura
{{ direct.inside_pos('sig42', 'check1', 2500) }}
Act_ActTrig = FORMATION_clean_up
{{ direct.spawn_ship_member('sig42', 'sakura1', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura2', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura3', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura4', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura5', sakura.member_obj(5)) }}
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = TO_RADAR_near
{{ direct.inside_pos('sig42', 'check1', 1000) }}
Act_GiveObjList = kim, ol_kim_check_position
{{ nn_stay_for_check.set() }}
Act_ActTrig = RADAR_wait_for_objectives

[Trigger]
nickname = RADAR_wait_for_objectives
Cnd_Timer = 20
Act_ActTrig = PATROL_PURSUIT_init


[;;;;
;; TODO: todo when sound will arrive
Act_ActTrig = RADAR_patrol_near

[Trigger]
nickname = RADAR_patrol_near
Cnd_True = no_params
{{ nn_stay_near_check_close.set() }}
Act_ActTrig = RADAR_patrol_recheck_player_timeout

[Trigger]
nickname = RADAR_patrol_recheck_player_timeout
Cnd_Timer = 5
Act_ActTRig = RADAR_patrol_recheck_player

[Trigger]
nickname = RADAR_patrol_recheck_player
{{ direct.outside_pos('sig42', 'check1', 350) }}
;;; TALK: Trent you are idiot



[Trigger]
nickname = PATROL_PURSUIT_init
Cnd_True = no_params
{{ nn_ship_patrol.set() }}
Act_GiveObjList = Player, ol_pursuit_regroup
Act_ActTrig = PATROL_PURSUIT_near

;;dbg
Act_ActTrig = COM_SAT_init

[ObjList]
nickname = enemy_to_player
StayInRange = Player, 1000

[Trigger]
nickname = PATROL_PURSUIT_near
{{ direct.inside_pos('sig42', 'ship_patrol', 3000) }}
{{ patroller_a.spawn_all_slide(objlist='enemy_to_player') }}
{{ patroller_b.spawn_all_slide(objlist='enemy_to_player') }}
{{ patroller_a.mark_all() }}
{{ patroller_b.mark_all() }}
Act_ActTrig = BATTLE_setrep

{{ nn_destroy_ship_patrol.set() }}
Act_ActTrig = PATROL_PURSUIT_destroyed
Act_ActTrig = PATROL_PURSUIT_near_close

[Trigger]
nickname = PATROL_PURSUIT_near_close
{{ direct.inside_pos('sig42', 'ship_patrol', 2000) }}
{{ kim.give_objlist_all('unform') }}
{{ sakura.give_objlist_all('unform') }}

[Trigger]
nickname = FRIEND_setrep
Cnd_Timer = 1
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}

[Trigger]
nickname = BATTLE_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'order', 'asf') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'enemy') }}

[Trigger]
nickname = BATTLE_silent_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_NEUTRAL', 'order', 'asf') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_NEUTRAL', 'enemy') }}

[Trigger]
nickname = PATROL_PURSUIT_destroyed
Cnd_Destroyed = ship_patroller, -1
{{ nn_destroy_ship_patrol.hide() }}

Act_GiveObjList = Player, ol_pursuit_regroup
Act_ActTrig = GUNBOAT_init

[Trigger]
nickname = GUNBOAT_init
Cnd_True = no_params
{{ nn_gunboat_patrol.set() }}
Act_ActTrig = GUNBOAT_near

[Trigger]
nickname = GUNBOAT_demo
Cnd_True = no_params

Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_bgb') }}
{{ direct.spawn_ship('sig42', 'kim_bgb', kim) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb1', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb2', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb3', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb4', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura_bgb5', sakura.member_obj(5)) }}


Act_ActTrig = GUNBOAT_near

[Trigger]
nickname = GUNBOAT_near
{{ direct.inside_pos('sig42', 'm9_gunboat_zone', 3000) }}
{{ bgb_support_a.spawn_all_slide(objlist='enemy_to_player') }}
{{ bgb_support_b.spawn_all_slide(objlist='enemy_to_player') }}
{{ bgb_support_a.mark_all() }}
{{ bgb_support_b.mark_all() }}
{{ direct.spawn_capital_group('sig42', 'BGB') }}
{{ direct.mark_capital_group('BGB') }}
Act_ActTrig = BATTLE_setrep

{{ nn_destroy_gunboat_patrol.set() }}
Act_ActTrig = GUNBOAT_destroyed
Act_ActTrig = GUNBOAT_near_close

[Trigger]
nickname = GUNBOAT_near_close
{{ direct.inside_pos('sig42', 'm9_gunboat_zone', 2000) }}
{{ kim.give_objlist_all('unform') }}
{{ sakura.give_objlist_all('unform') }}

[Trigger]
nickname = GUNBOAT_destroyed
Cnd_Destroyed = bgb, -1
{{ nn_destroy_ship_patrol.hide() }}

Act_GiveObjList = Player, ol_pursuit_regroup
Act_ActTrig = DESTROYER_init


[Trigger]
nickname = DESTROYER_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_bdr') }}
{{ direct.spawn_ship('sig42', 'kim_bdr', kim) }}
{{ direct.spawn_ship_member('sig42', 'sakura1_bdr', sakura.member_obj(1)) }}
{{ direct.spawn_ship_member('sig42', 'sakura2_bdr', sakura.member_obj(2)) }}
{{ direct.spawn_ship_member('sig42', 'sakura3_bdr', sakura.member_obj(3)) }}
{{ direct.spawn_ship_member('sig42', 'sakura4_bdr', sakura.member_obj(4)) }}
{{ direct.spawn_ship_member('sig42', 'sakura5_bdr', sakura.member_obj(5)) }}


Act_ActTrig = COM_SAT_init
Act_ActTRig = TRAP_init
;;Act_ActTrig = DESTROYER_init
;;Act_ActTrig = DESTROYER_fireship_demo

{# {{ direct.ol_goto('sig42', 'bdr_a1_target', 'ol_bdr_a1', 'goto_cruise') }} #}
{# {{ direct.ol_goto('sig42', 'bdr_a2_target', 'ol_bdr_a2', 'goto_cruise') }} #}
{# {{ direct.ol_goto('sig42', 'bdr_a3_target', 'ol_bdr_a3', 'goto_cruise') }} #}



[ObjList]
nickname = ol_bdr_a1
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bdr_a1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_a2
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bdr_a2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_a3
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bdr_a3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_b1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_b1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_b2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_b2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_b3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_b3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_c1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_c1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_c2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_c2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_c3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_c3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_d1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_d1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_d2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_d2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_d3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_d3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_e1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_e1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_e2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_e2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_e3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_e3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_f1
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_f1_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_f2
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_f2_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59

[ObjList]
nickname = ol_bdr_f3
GotoVec = goto_cruise, {{ direct.pos('sig42', 'bdr_f3_target') }}, 300, true, 100
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 4900, false, 59


[ObjList]
nickname = ol_bdr__final
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'com_sat') }}, 500, false, 5

[Trigger]
nickname = DESTROYER_fireship_demo
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a1, 'bdr01_test') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
Act_ActTrig = DESTROYER_fireship_demo_slow_down


[Trigger]
nickname = DESTROYER_fireship_demo_slow_down
Cnd_Timer = 2
Act_GiveObjList = bdr_a1, ol_bdr__final

[Trigger]
nickname = DESTROYER_A
Cnd_True = no_params
Act_ActTrig = BDR_A1_INSIDE
Act_ActTrig = BDR_A2_INSIDE
Act_ActTrig = BDR_A3_INSIDE
Act_ActTrig = BDR_A1
Act_ActTrig = BDR_A2
Act_ActTrig = BDR_A3

[Trigger]
nickname = BDR_A1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a1, 'bdr_a1', ol='ol_bdr_a1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_A2
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a2, 'bdr_a2', ol='ol_bdr_a2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_A3
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_a3, 'bdr_a3', ol='ol_bdr_a3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = DESTROYER_B
Cnd_True = no_params
Act_ActTrig = BDR_B1_INSIDE
Act_ActTrig = BDR_B2_INSIDE
Act_ActTrig = BDR_B3_INSIDE
Act_ActTrig = BDR_B1
Act_ActTrig = BDR_B2
Act_ActTrig = BDR_B3

[Trigger]
nickname = BDR_B1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_b1, 'bdr_b1', ol='ol_bdr_b1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_B2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_b2, 'bdr_b2', ol='ol_bdr_b2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_B3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_b3, 'bdr_b3', ol='ol_bdr_b3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = DESTROYER_C
Cnd_True = no_params
Act_ActTrig = BDR_C1_INSIDE
Act_ActTrig = BDR_C2_INSIDE
Act_ActTrig = BDR_C3_INSIDE
Act_ActTrig = BDR_C1
Act_ActTrig = BDR_C2
Act_ActTrig = BDR_C3

[Trigger]
nickname = BDR_C1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_c1, 'bdr_c1', ol='ol_bdr_c1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_C2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_c2, 'bdr_c2', ol='ol_bdr_c2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_C3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_c3, 'bdr_c3', ol='ol_bdr_c3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = DESTROYER_D
Cnd_True = no_params
Act_ActTrig = BDR_D1_INSIDE
Act_ActTrig = BDR_D2_INSIDE
Act_ActTrig = BDR_D3_INSIDE
Act_ActTrig = BDR_D1
Act_ActTrig = BDR_D2
Act_ActTrig = BDR_D3

[Trigger]
nickname = BDR_D1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_d1, 'bdr_d1', ol='ol_bdr_d1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_D2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_d2, 'bdr_d2', ol='ol_bdr_d2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_D3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_d3, 'bdr_d3', ol='ol_bdr_d3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = DESTROYER_E
Cnd_True = no_params
Act_ActTrig = BDR_E1_INSIDE
Act_ActTrig = BDR_E2_INSIDE
Act_ActTrig = BDR_E3_INSIDE
Act_ActTrig = BDR_E1
Act_ActTrig = BDR_E2
Act_ActTrig = BDR_E3

[Trigger]
nickname = BDR_E1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_e1, 'bdr_e1', ol='ol_bdr_e1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_E2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_e2, 'bdr_e2', ol='ol_bdr_e2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_E3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_e3, 'bdr_e3', ol='ol_bdr_e3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = DESTROYER_F
Cnd_True = no_params
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep
Act_ActTrig = BDR_F1_INSIDE
Act_ActTrig = BDR_F2_INSIDE
Act_ActTrig = BDR_F3_INSIDE
Act_ActTrig = BDR_F1
Act_ActTrig = BDR_F2
Act_ActTrig = BDR_F3

[Trigger]
nickname = BDR_F1
Cnd_True = no_params
{{ direct.spawn_capital('sig42', bdr_f1, 'bdr_f1', ol='ol_bdr_f1') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_F2
Cnd_Timer = 5
{{ direct.spawn_capital('sig42', bdr_f2, 'bdr_f2', ol='ol_bdr_f2') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_F3
Cnd_Timer = 10
{{ direct.spawn_capital('sig42', bdr_f3, 'bdr_f3', ol='ol_bdr_f3') }}
Act_ActTrig = BATTLE_setrep
Act_ActTrig = TORPEDO_setrep

[Trigger]
nickname = BDR_A1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_a1') }}
Act_GiveObjList = bdr_a1, ol_bdr__final

[Trigger]
nickname = BDR_A2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_a2') }}
Act_GiveObjList = bdr_a2, ol_bdr__final

[Trigger]
nickname = BDR_A3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_a3') }}
Act_GiveObjList = bdr_a3, ol_bdr__final

[Trigger]
nickname = BDR_B1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_b1') }}
Act_GiveObjList = bdr_b1, ol_bdr__final

[Trigger]
nickname = BDR_B2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_b2') }}
Act_GiveObjList = bdr_b2, ol_bdr__final

[Trigger]
nickname = BDR_B3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_b3') }}
Act_GiveObjList = bdr_b3, ol_bdr__final

[Trigger]
nickname = BDR_C1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_c1') }}
Act_GiveObjList = bdr_c1, ol_bdr__final

[Trigger]
nickname = BDR_C2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_c2') }}
Act_GiveObjList = bdr_c2, ol_bdr__final

[Trigger]
nickname = BDR_C3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_c3') }}
Act_GiveObjList = bdr_c3, ol_bdr__final

[Trigger]
nickname = BDR_D1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_d1') }}
Act_GiveObjList = bdr_d1, ol_bdr__final

[Trigger]
nickname = BDR_D2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_d2') }}
Act_GiveObjList = bdr_d2, ol_bdr__final

[Trigger]
nickname = BDR_D3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_d3') }}
Act_GiveObjList = bdr_d3, ol_bdr__final

[Trigger]
nickname = BDR_E1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_e1') }}
Act_GiveObjList = bdr_e1, ol_bdr__final

[Trigger]
nickname = BDR_E2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_e2') }}
Act_GiveObjList = bdr_e2, ol_bdr__final

[Trigger]
nickname = BDR_E3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_e3') }}
Act_GiveObjList = bdr_e3, ol_bdr__final

[Trigger]
nickname = BDR_F1_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_f1') }}
Act_GiveObjList = bdr_f1, ol_bdr__final

[Trigger]
nickname = BDR_F2_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_f2') }}
Act_GiveObjList = bdr_f2, ol_bdr__final

[Trigger]
nickname = BDR_F3_INSIDE
{{ direct.inside_pos('sig42', 'com_sat', 4880, obj='bdr_f3') }}
Act_GiveObjList = bdr_f3, ol_bdr__final


[Trigger]
nickname = TORPEDO_setrep
Cnd_True = no_params
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'torpedo_attack', 'com_sat') }}

{{ bdr_support_b.define_respawn('BATTLE_setrep') }}
{{ bdr_support_c.define_respawn('BATTLE_setrep') }}
{{ bdr_support_d.define_respawn('BATTLE_setrep') }}
{{ bdr_support_e.define_respawn('BATTLE_setrep') }}
{{ bdr_support_f.define_respawn('BATTLE_setrep') }}


[ObjList]
nickname = ol_defend_com_sat
StayInRange = {{ direct.pos('sig42', 'com_sat') }}, 5000

[Trigger]
nickname = DESTROYER_init
Cnd_True = no_params
{{ bdr_support_a.spawn_all_slide() }}
Act_ActTrig = DESTROYER_com_sat_defence_delay
Act_ActTrig = DESTROYER_A
Act_ActTrig = DESTROYER_B_delay
Act_ActTrig = DESTROYER_C_delay
Act_ActTrig = DESTROYER_D_delay
Act_ActTrig = DESTROYER_E_delay
Act_ActTrig = DESTROYER_F_delay

[Trigger]
nickname = DESTROYER_com_sat_defence_delay
Cnd_Timer = 30
Act_ActTrig = COM_SAT_defence

[Trigger]
nickname = DESTROYER_B_delay
Cnd_Timer = 60
{{ bdr_support_b.spawn_all_slide() }}
{{ bdr_support_b.turn_respawn_on() }}
Act_ActTrig = DESTROYER_B

[Trigger]
nickname = DESTROYER_C_delay
Cnd_Timer = 120
{{ bdr_support_c.spawn_all_slide() }}
{{ bdr_support_c.turn_respawn_on() }}
Act_ActTrig = DESTROYER_C

[Trigger]
nickname = DESTROYER_D_delay
Cnd_Timer = 150
{{ bdr_support_d.spawn_all_slide() }}
{{ bdr_support_d.turn_respawn_on() }}
Act_ActTrig = DESTROYER_D

[Trigger]
nickname = DESTROYER_E_delay
Cnd_Timer = 200
{{ bdr_support_e.spawn_all_slide() }}
{{ bdr_support_e.turn_respawn_on() }}
Act_ActTrig = DESTROYER_E

[Trigger]
nickname = DESTROYER_F_delay
Cnd_Timer = 230
{{ bdr_support_f.spawn_all_slide() }}
{{ bdr_support_f.turn_respawn_on() }}
Act_ActTrig = DESTROYER_F

[Trigger]
nickname = DESTROYER_off
Cnd_True = no_params
{{ bdr_support_b.turn_respawn_off() }}
{{ bdr_support_c.turn_respawn_off() }}
{{ bdr_support_d.turn_respawn_off() }}
{{ bdr_support_e.turn_respawn_off() }}
{{ bdr_support_f.turn_respawn_off() }}


[Trigger]
nickname = DESTROYER_clean_up_defence
Cnd_True = no_params
{{ suzuki_bdr.hide_all() }}
{{ yanagi_bdr.hide_all() }}
{{ sakura.hide_all() }}
Act_ActTrig = DESTROYER_off

[Trigger]
nickname = DESTROYER_clean_up_torpedo
Cnd_True = no_params
{{ direct.hide_capital_group('BDR_TORP') }}
{{ bdr_support_a.hide_all() }}
{{ bdr_support_b.hide_all() }}
{{ bdr_support_c.hide_all() }}
{{ bdr_support_d.hide_all() }}
{{ bdr_support_e.hide_all() }}
{{ bdr_support_f.hide_all() }}

[Trigger]
nickname = DESTROYER_clean_up_bship
Cnd_True = no_params
{{ direct.hide_capital_group('ASF_CAP') }}




[Trigger]
nickname = COM_SAT_init
Cnd_True = no_params
{{ com_sat.spawn() }}

[Trigger]
nickname = COM_SAT_defence
Cnd_True = no_params
{{ suzuki_bdr.spawn_all_slide(objlist='ol_defend_com_sat') }}
{{ yanagi_bdr.spawn_all_slide(objlist='ol_defend_com_sat') }}
{{ suzuki_bdr.invulnerable() }}
{{ yanagi_bdr.invulnerable() }}
{{ direct.spawn_ship('sig42', 'darcy_bdr', darcy) }}
Act_ActTrig = BATTLE_setrep



[ObjList]
nickname = ol_matome_trap
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'bbs1') }}, 10, true, 100

[ObjList]
nickname = ol_kamikadze_trap
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig42', 'ldr1') }}, 10, true, 100


[MsnFormation]
nickname = kamikadze_group
formation = kamikadze_line
position = {{ direct.pos('sig42', 'kamikadze_trap') }}
orientation = {{ direct.orient('sig42', 'kamikadze_trap') }}
{{ kamikadze.formation_members() }}

[Trigger]
nickname = TRAP_init
Cnd_True = no_params
{{ direct.spawn_capital_group('sig42', 'ASF_CAP') }}
{{ direct.spawn_ship('sig42', 'matome_trap', matome, ol='ol_matome_trap') }}
{{ matome.invulnerable() }}
Act_SpawnFormation = kamikadze_group
{{ kamikadze.invulnerable() }}
Act_GiveObjList = kamikadze_group, ol_kamikadze_trap

Act_ActTrig = BATTLE_setrep
Act_ActTrig = TRAP_rtc
Act_ActTrig = TRAP_matome_hit
Act_ActTrig = TRAP_kamikadze_hit


[Trigger]
nickname = TRAP_rtc
Cnd_Timer = 1
{{ thorn_m9_kamikadze.call() }}

Act_ActTrig = TRAP_rtc_done


[Trigger]
nickname = TRAP_matome_hit
{{ direct.inside_pos('sig42', 'm9_bbs1_explode', 100, obj=matome.name) }}
{{ matome.explode_all() }}
{{ bbs1.fuse('b_battleship_body_fuse') }}

[Trigger]
nickname = TRAP_kamikadze_hit
{{ direct.inside_pos('sig42', 'm9_ldr1_explode', 100, obj=kamikadze.member(1)) }}
{{ kamikadze.explode_all() }}
{{ ldr1.fuse('l_dreadnought_fuse') }}

[Trigger]
nickname = TRAP_rtc_done
Cnd_Timer = 33
Act_RelocateShip = Player, {{ direct.pos_orient('sig42', 'player_escape') }}
Act_RelocateShip = darcy, {{ direct.pos_orient('sig42', 'darcy_escape') }}
Act_RelocateShip = kim, {{ direct.pos_orient('sig42', 'kim_escape') }}
Act_ActTrig = TRAP_rtc_revert
Act_ActTRig = BATTLE_silent_setrep

[Trigger]
nickname = TRAP_rtc_revert
Cnd_Timer = 1
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_GiveObjList = Player, escape_follow_player
Act_ActTrig = ESCAPE_init

[Trigger]
nickname = ESCAPE_init
Cnd_True = no_params
{{ nn_randevoue.set() }}
Act_ActTrig = ESCAPE_musashi_far

[Trigger]
nickname = ESCAPE_musashi_far
{{ direct.inside_pos('sig42', 'torp_musashi', 6000) }}
{{ torp_musashi.spawn() }}
Act_ActTrig = DESTROYER_clean_up_torpedo
Act_ActTrig = BATTLE_silent_setrep
Act_ActTrig = ESCAPE_the_musashi

[Trigger]
nickname = ESCAPE_the_musashi
Cnd_Timer = 1
{{ nn_dock_musashi.set() }}
Act_ActTrig = ESCAPE_musashi_close
Act_ActTrig = ESCAPE_musashi_close_near
Act_ActTrig = MUSASHI_inside

[Trigger]
nickname = ESCAPE_musashi_close
{{ direct.inside_pos('sig42', 'torp_musashi', 1000) }}
Act_ActTrig = DESTROYER_clean_up_bship

[Trigger]
nickname = ESCAPE_musashi_close_near
{{ direct.inside_pos('sig42', 'm9_torp_musashi_zone_close', 80) }}
{{ darcy.hide_all() }}
{{ kim.hide_all() }}

[Trigger]
nickname = MUSASHI_inside
Cnd_SpaceExit = no_params
Act_AdjAcct = 10000
Act_ChangeState = SUCCEED

[Mission]
npc_ship_file = missions\m05\npcships.ini

;--------------------------------

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = NNVoice

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player, 1500, -100, 50, -200

[Trigger]
nickname = hatcher_triggers
Cnd_True = no_params
Act_Invulnerable = hatcher, true
Act_MarkObj = hatcher, 1
Act_SetVibe = hatcher, Player, REP_FRIEND_MAXIMUM
Act_SetVibe = Player, hatcher, REP_FRIEND_MAXIMUM




;--------------------------

;;;gen msn ships

{{ objects_definitions }}


[MsnFormation]
nickname = military_formation
formation = ms5_military_wing
{{ military.formation_members() }}

{{ smuggler_storage.define() }}
{{ research_base.define() }}

{{ scient_pods.define_objects() }}

;-------------------------------------
;waypoints

{{ nn_objectives_list }}





; ---------

[Trigger]
nickname = init_ms5
Cnd_True = no_params
InitState = ACTIVE
{{ history.item('h500') }}
Act_ActTrig = init_objective
Act_ActTrig = ms5_create_vendor

Act_ActTrig = first_message_not_in_space
Act_ActTrig = first_message_in_space
Act_ActTrig = first_message_on_planet
Act_ActTrig = vendorbase_open_forever

Act_LockDock = Player, {{ detroit.name }}, lock


[Trigger]
nickname = first_message_not_in_space
Cnd_InSpace = false
Act_DeActTrig = first_message_in_space

[Trigger]
nickname = first_message_in_space
Cnd_InSpace = true
Act_ActTrig = first_message_init_message
Act_DeActTrig = first_message_on_planet

[Trigger]
nickname = first_message_on_planet
Cnd_LaunchComplete = Player
Act_ActTrig = first_message_wait_and_call

[Trigger]
nickname = first_message_wait_and_call
Cnd_Timer = 1
Act_ActTrig = first_message_init_message

[Trigger]
nickname = first_message_init_message
Cnd_True = no_params
Act_ActTrig = vendor_message

[Trigger]
nickname = vendorbase_open_forever
Cnd_True = no_params
repeatable = true
Act_SetVibeOfferBaseHack = Li_for_dock_ring

[Trigger]
nickname = vendor_message
Cnd_Timer = 2
;Vendor: Greetings, Freelancer
{{ script.line(0) }}


[Trigger]
nickname = init_objective
Cnd_True = no_params
{{ nn_meet_vendor.set_as_path() }}

[Trigger]
nickname = ms5_create_vendor
system = li_for
Cnd_LocEnter = Bar, li_for_01_base
Act_AddRTC = missions\m05\vendor_msn.ini
Act_ActTrig = ms5_do_accept
repeatable = true

[Trigger]
nickname = ms5_do_accept
system = li_for
Cnd_MsnResponse = accept
Act_DeactTrig = ms5_create_vendor
Act_RemoveRTC = missions\m05\vendor_msn.ini
Act_PlayerCanDock = false
Act_RandomPop = false

Act_DeActTrig = first_message_in_space
Act_DeActTrig = first_message_not_in_space
Act_DeActTrig = first_message_on_planet
Act_DeActTrig = vendorbase_open_forever

{{ nn_launch.set() }}

Act_ActTrig = ms5_launch_complete
{{ offer.init() }}

Act_ActTrig = MSN_REP_BEFORE


[Trigger]
nickname = ms5_launch_complete
Cnd_LaunchComplete = Player
Act_ActTrig = FOR_TLR_init

[Trigger]
nickname = FOR_TLR_init
Cnd_Timer = 1
{{ nag.nag_voice }}
{{ script.line(2) }}
{{ nn_for_tlr_1.set() }}
Act_ActTrig = FOR_TLR_inside

[Trigger]
nickname = FOR_TLR_inside
{{ for_tlr_1.enter }}
Act_ActTrig = FOR_TLR_complete

[Trigger]
nickname = FOR_TLR_complete
{{ for_tlr_1.exit }}
{{ nn_first_dock_detroit.set() }}
Act_ActTrig = DETROIT_A_try_dock

[Trigger]
nickname = DETROIT_A_try_dock
Cnd_True = no_params
;Player: This is Freelancer Alpha 1/1. This is request to dock
{{ script.line(5) }}

;Detroit: Freelancer Alpha 1/1, access not granted. You need to have access key
{{ script.line(10) }}

;Player: Where to find?
{{ script.line(20) }}

;Detroit: That's your problems, leave
{{ script.line(30) }}

;Player: Ok...
{{ script.line(40) }}

Act_ActTrig = DETROIT_A_try_dock_COMPLETE

[Trigger]
nickname = DETROIT_A_try_dock_COMPLETE
{{ script.ends(40) }}
{{ nag.nag_off() }}
Act_ActTrig = DETROIT_A_trent_minds

[Trigger]
nickname = DETROIT_A_trent_minds
Cnd_Timer = 1
;Player: What I can do...
{{ script.line(50) }}

Act_ActTrig = DETROIT_A_trent_minds_done

[Trigger]
nickname = DETROIT_A_trent_minds_done
{{ script.ends(50) }}
Act_ActTrig = DETROIT_A_request_to_alaric

[Trigger]
nickname = DETROIT_A_request_to_alaric
Cnd_Timer = 2
;Player: Alaric, help me
{{ script.line(60) }}

Act_ActTrig = DETROIT_A_request_to_alaric_done

[Trigger]
nickname = DETROIT_A_request_to_alaric_done
{{ script.ends(60) }}
Act_ActTrig = DETROIT_A_response_from_alaric

[Trigger]
nickname = DETROIT_A_response_from_alaric
Cnd_Timer = 2
;Alaric: Find on pirates depot
{{ script.line(70) }}

;Player: Ok, I'll try
{{ script.line(80) }}

Act_ActTrig = MONTGOMERY_init

[Trigger]
nickname = MONTGOMERY_init
Cnd_True = no_params
{{ history.item('h501') }}
{{ nn_goto_piratebase.set() }}
Act_SetVibeOfferBaseHack = {{ piratebase.name }}
Act_ActTrig = MONTGOMERY_near

[Trigger]
nickname = MONTGOMERY_near
Cnd_DistShip = inside, Player, {{ piratebase.name }}, 3000
{{ nn_dock_piratebase.set() }}
Act_ActTrig = MONTGOMERY_base_enter

[Trigger]
nickname = MONTGOMERY_base_enter
Cnd_BaseEnter = {{ piratebase.base }}
Act_AddRTC = missions\m05\smuggler_msn.ini
Act_ActTrig = STORAGE_init


;-----------------

[MsnLoot]
nickname = key_loot
archetype = key_li_for_02_base
string_id = 095204
rel_pos_obj = {{ smuggler_storage.name }}
rel_pos_offset = 0, -50, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true



[ObjList]
nickname = ol_smuggler_fly_away
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_cruise, -150000, 20000, 0, 100, false

[ObjList]
nickname = ol_smuggler_1_turn_fwd
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('li_for', 'smuggler_cinema1_goto') }}, 50, false

[ObjList]
nickname = ol_hatcher_goto_player
SetPriority = ALWAYS_EXECUTE
GotoShip = goto_cruise, Player, 300, false

;-----------------

[Trigger]
nickname = STORAGE_init
{{ nn_launch.set() }}
Cnd_True = no_params
{{ history.item('h502') }}
Act_ActTrig = STORAGE_launch_complete

[Trigger]
nickname = STORAGE_launch_complete
Cnd_LaunchComplete = Player
Act_PlayerCanDock = false
Act_RandomPop = false
{{ smuggler_storage.spawn() }}
{{ smuggler_storage.invulnerable() }}
{{ nn_goto_storage.set() }}
Act_ActTrig = STORAGE_near

[Trigger]
nickname = STORAGE_setrep_neutral
Cnd_True = no_params
Act_SetVibeLblToShip = smuggler, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, smuggler, REP_NEUTRAL

[Trigger]
nickname = STORAGE_setrep_enemy
Cnd_True = no_params
Act_SetVibeLblToShip = smuggler, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, smuggler, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = smuggler, hatcher, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = hatcher, smuggler, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = STORAGE_spawn_smugglers
Cnd_True = no_params
{{ smuggler_wing1.spawn_all_slide() }}
{{ smuggler_wing2.spawn_all_slide() }}

[Trigger]
nickname = STORAGE_spawn_smugglers_cinema
Cnd_True = no_params
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema1', smuggler_cinema.member_obj(1)) }}
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema2', smuggler_cinema.member_obj(2)) }}
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema3', smuggler_cinema.member_obj(3)) }}

[Trigger]
nickname = STORAGE_spawn_smugglers_cinema_go
Cnd_True = no_params
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema1', smuggler_cinema_go.member_obj(1)) }}
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema2', smuggler_cinema_go.member_obj(2)) }}
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema3', smuggler_cinema_go.member_obj(3)) }}


;----

[Trigger]
nickname = STORAGE_near
Cnd_DistShip = inside, Player, {{ smuggler_storage.name }}, 2000
Act_Pobjidle = no_params
{{ nag.nag_off() }}
Act_ActTrig = STORAGE_spawn_smugglers_cinema
Act_ActTrig = STORAGE_SCENE_init

[Trigger]
nickname = STORAGE_SCENE_init
Cnd_Timer = 0.1
Act_RelocateShip = Player, {{ direct.pos_orient('li_for', 'player_smuggler') }}
Act_ActTrig = STORAGE_SCENE_dlg_hello_player_init

[Trigger]
nickname = STORAGE_SCENE_dlg_hello_player_init
Cnd_True = no_params
Act_Pobjidle = no_params
{{ thorn_m05_smuggler_player.call() }}
Act_ActTrig = STORAGE_SCENE_dlg_hello_player

[Trigger]
nickname = STORAGE_SCENE_dlg_hello_player
Cnd_Timer = 1
;Player:
{{ script.line(100) }}

Act_ActTrig = STORAGE_SCENE_dlg_hello_player_done

[Trigger]
nickname = STORAGE_SCENE_dlg_hello_player_done
{{ script.ends(100) }}
Act_Destroy = {{ smuggler_cinema.member_obj(1) }}, SILENT

Act_ActTrig = STORAGE_SCENE_dlg_hello_smuggler_1

[Trigger]
nickname = STORAGE_SCENE_dlg_hello_smuggler_1
Cnd_Timer = 1
{{ thorn_m05_smuggler3.call() }}


;Smuggler:
{{ script.line(110) }}

Act_ActTrig = STORAGE_SCENE_dlg_hello_smuggler_2

[Trigger]
nickname = STORAGE_SCENE_dlg_hello_smuggler_2
{{ script.ends(110) }}
{{ thorn_m05_smuggler1.call() }}
;Smuggler:
{{ script.line(120) }}

Act_ActTrig = STORAGE_SCENE_dlg_reaction_player_init

[Trigger]
nickname = STORAGE_SCENE_dlg_reaction_player_init
{{ script.ends(120) }}
{{ thorn_m05_smuggler_player.call() }}
Act_ActTrig = STORAGE_SCENE_dlg_reaction_player

[Trigger]
nickname = STORAGE_SCENE_dlg_reaction_player
Cnd_True = no_params
{{ smuggler_cinema.hide_all() }}

;Player:
{{ script.line(130) }}

Act_ActTrig = STORAGE_SCENE_dlg_reaction_player_done

[Trigger]
nickname = STORAGE_SCENE_dlg_reaction_player_done
{{ script.ends(130) }}


{#{{ direct.spawn_ship_member('li_for', 'smuggler_cinema1', smuggler_cinema_go.member_obj(1)) }}#}
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema2', smuggler_cinema_go.member_obj(2)) }}
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema3', smuggler_cinema_go.member_obj(3)) }}

;;;Act_ActTrig = STORAGE_spawn_smugglers_cinema_go

Act_ActTrig = STORAGE_SCENE_dlg_reaction_smuggler_3

[Trigger]
nickname = STORAGE_SCENE_dlg_reaction_smuggler_3
Cnd_Timer = 1
{{ thorn_m05_smuggler3.call() }}
;Smuggler:
{{ script.line(140) }}

Act_ActTrig = STORAGE_SCENE_remove_smuggler_1_cinema_ship
Act_ActTrig = STORAGE_SCENE_dlg_reaction_smuggler_1

[Trigger]
nickname = STORAGE_SCENE_remove_smuggler_1_cinema_ship
Cnd_Timer = 2
{{ direct.spawn_ship_member('li_for', 'smuggler_cinema1', smuggler_cinema_go.member_obj(1)) }}

[Trigger]
nickname = STORAGE_SCENE_dlg_reaction_smuggler_1
{{ script.ends(140) }}
{{ thorn_m05_smuggler1b.call() }}
;Smuggler:
{{ script.line(150) }}

Act_ActTrig = STORAGE_SCENE_dlg_reaction_smuggler_1_done

[Trigger]
nickname = STORAGE_SCENE_dlg_reaction_smuggler_1_done
{{ script.ends(150) }}
Act_ActTrig = STORAGE_SCENE_smuggler1_turn_fwd
Act_ActTrig = STORAGE_SCENE_done

[Trigger]
nickname = STORAGE_SCENE_smuggler1_turn_fwd
Cnd_True = no_params
Act_GiveObjList = {{ smuggler_cinema_go.member(1) }}, ol_smuggler_1_turn_fwd
Act_ActTrig = STORAGE_spawn_smugglers

[Trigger]
nickname = STORAGE_SCENE_done
Cnd_Timer = 2
Act_RevertCam = no_params
Act_Invulnerable = Player, false
{{ history.item('h503') }}
Act_ActTrig = STORAGE_complete_LETS_FIGHT


[Trigger]
nickname = STORAGE_spawn_smugglers_reinforcement
Cnd_True = no_params
;; is it required?
Act_ActTrig = STORAGE_setrep_enemy




[Trigger]
nickname = STORAGE_complete_LETS_FIGHT
Cnd_True = no_params
Act_ActTrig = STORAGE_BATTLE_init
{{ direct.save('smuggler') }}

{{ nag.nag_voice }}
{{ smuggler_storage.spawn() }}
Act_RelocateShip = Player, {{ direct.pos_orient('li_for', 'player_smuggler') }}
Act_ActTrig = STORAGE_spawn_smugglers
Act_ActTrig = STORAGE_spawn_smugglers_cinema_go
Act_ActTrig = STORAGE_BATTLE_init
;dbg
;
;Act_SpawnSolar = smuggler_storage
;Act_ActTrig = STORAGE_spawn_smugglers_cinema
;Act_ActTrig = STORAGE_SCENE_init

[Trigger]
nickname = STORAGE_BATTLE_init
Cnd_Timer = 0.2
{{ nn_destroy_smugglers.set() }}
Act_ActTrig = STORAGE_setrep_enemy
Act_ActTrig = STORAGE_BATTLE_hatcher_arrive

[Trigger]
nickname = STORAGE_BATTLE_hatcher_arrive
Cnd_Timer = 4
{{ direct.spawn_ship('li_for', 'hatcher_smuggler', hatcher, ol='ol_hatcher_goto_player') }}

Act_ActTrig = hatcher_triggers
Act_ActTrig = STORAGE_setrep_enemy
;Hatcher: how can I help?
{{ script.line(160) }}

;Player: Sure
{{ script.line(170) }}

Act_PlayerEnemyClamp = 1, 3
Act_ActTRig = STORAGE_BATTLE_storage_mission_init

[Trigger]
nickname = STORAGE_BATTLE_storage_mission_init
{{ script.ends(170) }}
{{ nn_destroy_storage.set() }}
Act_MarkObj = smuggler_storage, 1
Act_Invulnerable = smuggler_storage, false
;Hatcher: I'll kill them, find the key
{{ script.line(180) }}

Act_ActTrig = STORAGE_BATTLE_mission_description
Act_ActTrig = STORAGE_spawn_smugglers_reinforcement

[Trigger]
nickname = STORAGE_BATTLE_mission_description
{{ script.ends(180) }}
;Author's help: how to destroy random base
{{ direct.dialog('smuggler') }}
Act_ActTrig = STORAGE_BATTLE_drop_key

[Trigger]
nickname = STORAGE_BATTLE_drop_key
Cnd_Destroyed = smuggler_storage
Act_SpawnLoot = key_loot
Act_ActTrig = player_got_key_loot
Act_ActTrig = key_loot_not_getted
Act_NagOff = smuggler_store_battle
{{ nn_get_a_key.set() }}
Act_MarkObj = key_loot, 1
Act_Invulnerable = key_loot, true


[Trigger]
nickname = key_loot_not_getted
Cnd_Timer = 60
Act_ChangeState = FAIL

[Trigger]
nickname = player_got_key_loot
Cnd_LootAcquired = key_loot, Player
Act_RemoveCargo = key_loot
Act_DeActTrig = key_loot_not_getted
Act_ActTrig = STORAGE_BATTLE_smuggler_fly_away
Act_ActTrig = DETROIT_B_init

[Trigger]
nickname = STORAGE_BATTLE_smuggler_fly_away
Cnd_True = no_params
{{ smuggler_cinema_go.give_objlist_all('ol_smuggler_fly_away') }}
{{ smuggler_wing1.give_objlist_all('ol_smuggler_fly_away') }}
{{ smuggler_wing2.give_objlist_all('ol_smuggler_fly_away') }}
Act_ActTrig = STORAGE_setrep_neutral

[Trigger]
nickname = DETROIT_B_init
Cnd_True = no_params
;Player: I did it
{{ script.line(190) }}

Act_ActTrig = DETROIT_B_init_msn

[Trigger]
nickname = DETROIT_B_init_msn
{{ script.ends(190) }}
;Hatcher: Go to Detroit
{{ script.line(200) }}

{{ nn_go_back_detroit.set() }}
Act_LockDock = Player, {{ detroit.name }}, unlock
Act_GiveObjList = hatcher, follow_player
Act_ActTrig = DETROIT_B_base_enter
Act_ActTrig = DETROIT_B_dlg_trent_awesome
Act_ActTrig = DETROIT_B_near_base

[Trigger]
nickname = DETROIT_B_dlg_trent_awesome
Cnd_Timer = 30
;Player:
{{ script.line(210) }}

;Hatcher:
{{ script.line(220) }}

;Player:
{{ script.line(230) }}

;Hatcher:
{{ script.line(240) }}


[ObjList]
nickname = ol_hatcher_parking_around_detroit
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_cruise, {{ direct.pos('li_for', 'station1_hatcher_parking') }}, 500, false

[Trigger]
nickname = DETROIT_B_near_base
Cnd_DistShip = inside, Player, {{ detroit.name }}, 5000
{{ history.item('h504') }}
Act_GiveObjList = hatcher, ol_hatcher_parking_around_detroit
{{ nn_dock_detroit.set() }}

[Trigger]
nickname = DETROIT_B_base_enter
Cnd_BaseEnter = {{ detroit.base }}
Act_AddRTC = missions\m05\barman_msn.ini
{{ nn_launch.set() }}
{{ history.item('h505') }}
Act_RandomPop = false
Act_ActTrig = DETROIT_B_launch_complete

[Trigger]
nickname = DETROIT_B_launch_complete
Cnd_LaunchComplete = Player
Act_PlayerCanDock = false
{{ nn_for_tlr_2.set() }}
Act_ActTrig = TOSIG17_init

[Trigger]
nickname = TOSIG17_init
Cnd_True = no_params
Act_ActTrig = TOSIG17_around_close
Act_ActTrig = TOSIG17_dialog
Act_GiveObjList = hatcher, follow_player
Act_ActTrig = TOSIG17_tlr1_inside

[Trigger]
nickname = TOSIG17_tlr1_inside
{{ for_tlr_2.enter }}
Act_ActTrig = TOSIG17_tlr1_exit

[Trigger]
nickname = TOSIG17_tlr1_exit
{{ for_tlr_2.exit }}
{{ nn_for_tlr_3.set() }}
Act_ActTrig = TOSIG17_tlr2_inside

[Trigger]
nickname = TOSIG17_tlr2_inside
{{ for_tlr_3.enter }}
Act_ActTrig = SIG17_tlr_dialog
Act_ActTRig = TOSIG17_tlr2_exit

[Trigger]
nickname = TOSIG17_tlr2_exit
{{ for_tlr_3.exit }}
{{ nn_sig17_jump.set() }}
Act_ActTrig = welcome_sig17

[Trigger]
nickname = TOSIG17_dialog
Cnd_Timer = 1
;Player:
{{ script.line(300) }}

;Player:
{{ script.line(310) }}

;Hatcher:
{{ script.line(320) }}

;Player:
{{ script.line(330) }}



;----------------------

[Trigger]
nickname = welcome_sig17
Cnd_SystemEnter = sig17
{{ nag.nag_off() }}
Act_ActTrig = sig17_wait_for_team
Act_RandomPop = False

[Trigger]
nickname = sig17_wait_for_team
Cnd_NPCSystemEnter = sig17, Player, hatcher
{{ nag.nag_voice }}
{{ research_base.spawn() }}
Act_GiveObjList = hatcher, follow_player
Act_RandomPop = false
Act_PlayerCanDock = false
{{ nn_sig17_tlr_1.set() }}
Act_ActTrig = SIG17_player_tlr

[Trigger]
nickname = SIG17_player_tlr
{{ sig17_tlr_1.enter }}
;;Act_ActTrig = SIG17_tlr_dialog
Act_ActTrig = SIG17_tlr_complete

[Trigger]
nickname = SIG17_tlr_dialog
Cnd_Timer = 3
;Hatcher:
{{ script.line(340) }}

;Player:
{{ script.line(350) }}

;Hatcher:
{{ script.line(360) }}

;Player:
{{ script.line(370) }}

;Hatcher:
{{ script.line(380) }}

;Player:
{{ script.line(390) }}


[Trigger]
nickname = SIG17_tlr_complete
{{ sig17_tlr_1.exit }}
{{ nn_reach_research.set() }}
Act_RandomPop = false
Act_ActTrig = SIG17_near_research

[Trigger]
nickname = SIG17_near_research
Cnd_DistShip = inside, Player, {{ research_base.name }}, 3000
{{ nn_try_to_dock_on_research.set() }}
Act_ActTrig = DOCKING_TRY_init
Act_PlayMusic = none, none, none, music_anticipation_light

;-----------


;-----------

[Trigger]
nickname = DOCKING_TRY_init
Cnd_Timer = 2
;Player:
{{ script.line(395) }}

;Research base: You can't. Access key is required
{{ script.line(400) }}

;Player:
{{ script.line(410) }}

Act_ActTrig = DOCKING_TRY_help_messages

[Trigger]
nickname = DOCKING_TRY_help_messages
{{ script.ends(410) }}
;Transport: Kendal, we need help.
{{ script.line(420) }}

;Research base: Request acquired
{{ script.line(430) }}

Act_ActTrig = CONVOY_init

[Trigger]
nickname = spawn_convoy
Cnd_True = no_params
{{ direct.spawn_capital('sig17', armored, 'convoy_transport') }}
{{ armored.mark() }}

[Trigger]
nickname = spawn_pirates
Cnd_True = no_params
{{ convoy_pir1.spawn_all_slide() }}
{{ convoy_pir2.spawn_all_slide() }}
{{ convoy_pir1.mark_all() }}
{{ convoy_pir2.mark_all() }}

[Trigger]
nickname = CONVOY_setrep
Cnd_Timer = 0.25
Act_SetVibeLblToShip = pirates, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, pirates, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = pirates, armored, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = armored, pirates, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = pirates, hatcher, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = hatcher, pirates, REP_HOSTILE_MAXIMUM
Act_SetVibe = armored, Player, REP_FRIEND_MAXIMUM
Act_SetVibe = Player, pirate, REP_FRIEND_MAXIMUM

[Trigger]
nickname = CONVOY_init
{{ script.ends(430) }}
{{ history.item('h506') }}
{{ nn_goto_convoy.set() }}
Act_ActTrig = spawn_convoy
Act_ActTrig = CONVOY_dialog_trent_ready_to_battle
Act_ActTrig = CONVOY_finded
Act_PlayMusic = no_params

[Trigger]
nickname = CONVOY_dialog_trent_ready_to_battle
Cnd_True = no_params
;Player: I will help
{{ script.line(440) }}

;Hatcher:
{{ script.line(450) }}


[Trigger]
nickname = CONVOY_finded
Cnd_DistShip = inside, Player, armored, 3000
{{ direct.inside_pos('sig17', 'convoy', 3200) }}
Act_ActTrig = spawn_pirates
Act_GiveObjList = hatcher, unform
{{ nag.nag_off() }}
Act_ActTrig = CONVOY_BATTLE_init

{{ direct.save('convoy') }}

Act_RelocateShip = Player, {{ direct.pos_orient('sig17', 'convoy_player') }}
{{ nag.nag_voice }}
{{ research_base.spawn() }}
Act_ActTrig = spawn_convoy
Act_ActTrig = spawn_pirates
Act_SpawnShip = hatcher, no_ol, {{ direct.pos_orient('sig17', 'convoy_player') }}
Act_ActTrig = hatcher_triggers
Act_ActTrig = CONVOY_BATTLE_init

[Trigger]
nickname = CONVOY_BATTLE_init
Cnd_Timer = 0.2
Act_ActTrig = CONVOY_setrep
{{ nn_destroy_pirates.set() }}
Act_ActTrig = CONVOY_BATTLE_complete
Act_ActTrig = CONVOY_BATTLE_hatcher_return_back
Act_PlayerEnemyClamp = 2, 4

[ObjList]
nickname = hatcher_goto_armored
avoidance = false
GotoShip = goto_no_cruise, armored, 300, false

[Trigger]
nickname = CONVOY_BATTLE_hatcher_return_back
Cnd_DistShip = outside, hatcher, armored, 2000
Act_GiveObjList = hatcher, hatcher_goto_armored
Act_ActTrig = CONVOY_BATTLE_hatcher_return_back_reset

[Trigger]
nickname = CONVOY_BATTLE_hatcher_return_back_reset
Cnd_DistShip = inside, hatcher, armored, 1800
Act_ActTrig = CONVOY_BATTLE_hatcher_return_back

[Trigger]
nickname = CONVOY_BATTLE_hatcher_return_back_turn_off
Cnd_True = no_params
Act_DeActTrig = CONVOY_BATTLE_hatcher_return_back
Act_DeActTrig = CONVOY_BATTLE_hatcher_return_back_reset

[Trigger]
nickname = CONVOY_BATTLE_complete
Cnd_Destroyed = pirates, -1, ALL
Act_ActTrig = CONVOY_BATTLE_hatcher_return_back_turn_off
Act_GiveObjList = hatcher, follow_player
{{ history.item('h507') }}

;Transport:
{{ script.line(460) }}

;Player:
{{ script.line(470) }}

Act_ActTrig = CONVOY_F4_init

[Trigger]
nickname = CONVOY_F4_init
{{ script.ends(470) }}
{{ nn_join_transport_formation.set() }}
;Transport:
{{ script.line(480) }}

Act_ActTrig = CONVOY_F4_joined

[Trigger]
nickname = CONVOY_F4_joined
Cnd_PlayerManeuver = Formation, armored
Act_LockManeuvers = true
{{ nag.nag_off() }}
Act_GiveObjList = armored, ol_armored_goto_base
{{ nn_follow_transport.set() }}
;Transport:
{{ script.line(490) }}

Act_ActTrig = CONVOY_F4_dock_request

[ObjList]
nickname = ol_armored_goto_base
GotoShip = goto_cruise, research_base, 200, false

[Trigger]
nickname = CONVOY_F4_dock_request
Cnd_DistShip = inside, armored, research_base, 3000
;Transport:
{{ script.line(500) }}

;Research base: Request acquired
{{ script.line(510) }}

Act_ActTrig = CONVOY_F4_dock_request_acquired

[Trigger]
nickname = CONVOY_F4_dock_request_acquired
{{ script.ends(510) }}
;Transport:
{{ script.line(520) }}

Act_ActTrig = CONVOY_F4_docking_prepare

[Trigger]
nickname = CONVOY_F4_docking_prepare
Cnd_DistShip = inside, armored, research_base, 2000
Act_GiveObjList = armored, force_stop
Act_ActTrig = CONVOY_F4_docking_init

[ObjList]
nickname = ol_dock_research_base
BreakFormation = no_params
Dock = research_base

[Trigger]
nickname = CONVOY_F4_docking_init
Cnd_Timer = 2
Act_GiveObjList = armored, ol_dock_research_base
{{ nn_wait_for_docking_approve.set() }}
Act_ActTrig = ARMORED_DOCKED
Act_PlayMusic = none, none, none, music_anticipation_more_forboding

[Trigger]
nickname = ARMORED_DOCKED
Cnd_Destroyed = armored, -1, SILENT
{{ history.item('h508') }}
Act_ActTrig = RESEARCH_EXPLODE_init
{{ direct.save('scient') }}
Act_SpawnShip = nag_voice
Act_SpawnSolar = research_base
Act_RelocateShip = Player, {{ direct.pos_orient('sig17', 'player_research') }}
Act_SpawnShip = hatcher, no_ol, {{ direct.pos_orient('sig17', 'hatcher_research') }}
Act_ActTrig = hatcher_triggers
Act_ActTrig = RESEARCH_EXPLODE_player_position
;Act_ActTrig = RESEARCH_EXPLODE_init
Act_ActTrig = LOOT_MISSION_init
Act_LightFuse = research_base, pirate_base_explode_fuse_fast

[Trigger]
nickname = RESEARCH_EXPLODE_init
Cnd_True = no_params
;Mandrake:
{{ script.line(530) }}

;Transport:
{{ script.line(540) }}

;Mandrake:
{{ script.line(550) }}

;Transport:
{{ script.line(560) }}

;Research base:
{{ script.line(570) }}

Act_ActTrig = RESEARCH_EXPLODE_first_damage

[Trigger]
nickname = RESEARCH_EXPLODE_first_damage
{{ script.ends(570) }}
Act_LightFuse = research_base, pirate_base_explode_fuse_min
;Research base:
{{ script.line(580) }}

Act_ActTrig = RESEARCH_EXPLODE_begin_explosion

[Trigger]
nickname = RESEARCH_EXPLODE_begin_explosion
{{ script.ends(580) }}
;Research base:
{{ script.line(590) }}

Act_ActTrig = RESEARCH_EXPLODE_start_explosion

[Trigger]
nickname = RESEARCH_EXPLODE_player_position
Cnd_True = no_params
Act_Pobjidle = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sig17', 'player_research') }}
Act_RelocateShip = hatcher, {{ direct.pos_orient('sig17', 'hatcher_research') }}

[Trigger]
nickname = RESEARCH_EXPLODE_start_explosion
Cnd_Timer = 2
Act_ActTrig = RESEARCH_EXPLODE_player_position
Act_LightFuse = research_base, pirate_base_explode_fuse
Act_CallThorn = scripts\mod\m05_research_explode.thn, research_base
Act_ActTrig = RESEARCH_EXPLODE_done
Act_ActTrig = LOOT_MISSION_init

{{ scient_pods.define_triggers() }}

[Trigger]
nickname = RESEARCH_EXPLODE_done
Cnd_Destroyed = research_base
Act_RevertCam = no_params
Act_LockManeuvers = false
Act_Invulnerable = Player, false
Act_GiveObjList = hatcher, unform



[Trigger]
nickname = LOOT_MISSION_init
Cnd_Destroyed = research_base
Act_PlayMusic = none, none, none, music_tau_danger
{{ hatcher.unmark_all() }}
{{ scient_pods.turn() }}
;Hatcher:
{{ script.line(600) }}
;Player:
{{ script.line(610) }}
{{ nn_find_madrake_and_tractor_him.set() }}
Act_ActTrig  = LOOT_MISSION_info
Act_ActTrig = LOOT_MISSION_hatcher_watching

[Trigger]
nickname = LOOT_MISSION_info
{{ script.ends(600) }}
{{ direct.dialog('scient_pod') }}

[Trigger]
nickname = LOOT_MISSION_perfect_objective
Cnd_True = no_params
{{ nn_save_all_scients.set() }}

[Trigger]
nickname = LOOT_MISSION_hatcher_watching
Cnd_Timer = 1
Act_GiveObjList = hatcher, ol_hatcher_watch_loot_mission

[ObjList]
nickname = ol_hatcher_watch_loot_mission
SetPriority = ALWAYS_EXECUTE
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_1') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_2') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_3') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_4') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_5') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_1') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_2') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_3') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_4') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_5') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_1') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_2') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_3') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_4') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_5') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_1') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_2') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_3') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_4') }}, 50, false
GotoVec = goto_no_cruise, {{ direct.pos('sig17', 'hatcher_go_5') }}, 50, false



[Trigger]
nickname = SCIENT_PODS_exit
Cnd_True = no_params
Act_ActTrig = LOOT_MISSION_final_dialogs


;----------DROPPED PEOPLE

;------ ROADHOME

[Trigger]
nickname = LOOT_MISSION_final_dialogs
Cnd_Timer = 1
Act_PlayMusic = no_params
;Player:
{{ script.line(620) }}

;Mandrake:
{{ script.line(630) }}

;Mandrake:
{{ script.line(640) }}

;Player:
{{ script.line(650) }}

;Mandrake:
{{ script.line(660) }}

;Player:
{{ script.line(670) }}


Act_GiveObjList = hatcher, follow_player
{{ hatcher.mark_all() }}

Act_ActTrig = ROADHOME_init

[Trigger]
nickname = ROADHOME_init
{{ script.ends(670) }}
{{ nn_goto_bship_tlr.set() }}
Act_PlayerCanDock = false
Act_PlayerCanTradelane = false
Act_ActTrig = ROADHOME_dialog_continues
Act_ActTrig = ROADHOME_tlr

[Trigger]
nickname = ROADHOME_dialog_continues
Cnd_True = no_params
;Mandrake:
{{ script.line(680) }}

;Mandrake:
{#{{ script.line(690) }}#}

;Hatcher:
{#{{ script.line(700) }}#}

;Player:
{{ script.line(710) }}


[Trigger]
nickname = ROADHOME_tlr
{{ direct.inside_pos('sig17', 'bship_tlr2', 750) }}
Act_ActTrig = MILITARY_scene_init
{{ direct.save('arrest_battle') }}
Act_RandomPop = false
Act_SpawnShip = nag_voice
Act_RelocateShip = Player,  -16750, 0, 28600, 0.22, 0, 0.78, 0
Act_SpawnShip = hatcher, no_ol, -50000, -50000, 50000, 1, 0, 0, 0
Act_ActTrig = MSN_REP_BEFORE


; Act_ActTrig = MILITARY_scene_init ; debug
; [;

Act_ActTrig = MILITARY_spawn_police
Act_ActTrig = MILITARY_prebattle




[ObjList]
nickname = ol_military_goto_player
avoidance = false
GotoShip = goto_no_cruise, Player, 80, false

[trigger]
nickname = MILITARY_player_init_pos
Cnd_True = no_params
Act_Pobjidle = no_params
Act_RelocateShip = Player, -16750, 0, 28600, 0.22, 0, 0.78, 0

[Trigger]
nickname = MILITARY_hatcher_offscreen
Cnd_True = no_params
Act_GiveObjList = hatcher, unform
Act_RelocateShip = hatcher, -50000, -50000, 50000, 1, 0, 0, 0

[Trigger]
nickname = MILITARY_scene_init
Cnd_True = no_params
Act_ActTrig = MILITARY_player_init_pos
Act_ActTrig = MILITARY_hatcher_offscreen
Act_ActTrig = MILITARY_tlr_distrupted
Act_PlayMusic = none, none, none, music_reveal_challenging

[Trigger]
nickname = MILITARY_distrupt_tlr1
Cnd_Timer = 1
Act_LightFuse = SIG17_F_Trade_Lane_Ring_L3_01, msn5_tradelane_collapse

[Trigger]
nickname = MILITARY_tlr_distrupted
Cnd_True = no_params
Act_CallThorn = scripts\mod\m05_arrest_camera01.thn, Player
Act_ActTrig = MILITARY_distrupt_tlr1
Act_ActTrig = MILITARY_military_appeared

[Trigger]
nickname = MILITARY_spawn_police
Cnd_True = no_params
Act_SpawnFormation = military_formation, -15500, 0, 26200, 0.22, 0, 0.78, 0

[Trigger]
nickname = MILITARY_first_turn
Cnd_True = no_params
Act_GiveObjList = {{ military.member(1) }}, ol_military_goto_player

[Trigger]
nickname = MILITARY_military_appeared
Cnd_Timer = 1
Act_ActTrig = MILITARY_spawn_police
Act_ActTrig = MILITARY_first_turn
Act_ActTrig = MILITARY_military_appeared_cam

[Trigger]
nickname = MILITARY_military_appeared_cam
Cnd_Timer = 1
Act_CallThorn = scripts\mod\m05_arrest_camera02.thn, {{ military.member(1) }}
Act_ActTrig = MILITARY_military_appeared_dlg

[Trigger]
nickname = MILITARY_military_appeared_dlg
Cnd_Timer = 3
;Military:
{{ script.line(720) }}

Act_ActTrig = MILITARY_military_appeared_complete

[Trigger]
nickname = MILITARY_military_appeared_complete
{{ script.ends(720) }}
Act_ActTrig = MILITARY_arrest_reaction

[Trigger]
nickname = MILITARY_arrest_reaction
Cnd_Timer = 2
Act_RelocateShip = Player, -16750, 0, 28600, -0.8, 0, 0.2, 0
Act_CallThorn = scripts\mod\m05_arrest_camera03.thn, Player

;Player:
{{ script.line(730) }}


Act_ActTrig = MILITARY_military_arrived


; Act_ActTrig = MILITARY_hatcher_hello
; Act_ActTRig = MILITARY_warning_positions
; Act_ActTRig = MILITARY_warning
; Act_ActTrig = MILITARY_rheinlanders_arrive

[Trigger]
nickname = MILITARY_military_arrived
{{ script.ends(730) }}
Act_CallThorn = scripts\mod\m05_arrest_camera04.thn, {{ military.member(1) }}
;Military:
{{ script.line(740) }}

Act_ActTrig = MILITARY_hatcher_hello

[ObjList]
nickname = ol_hatcher_arrive
GotoVec = goto_no_cruise, -16730, 0, 28580, 40, false

[Trigger]
nickname = MILITARY_hatcher_hello
{{ script.ends(740) }}
Act_RelocateShip = hatcher, -16750, 0, 28800, -0.8, 0, 0.2, 0
Act_ActTrig = MILITARY_hatcher_hello_cam

[Trigger]
nickname = MILITARY_hatcher_hello_cam
Cnd_Timer = 1
Act_GiveObjList = hatcher, ol_hatcher_arrive
Act_CallThorn = scripts\mod\m05_arrest_camera05.thn, Player
;Hatcher:
{{ script.line(750) }}

Act_ActTrig = MILITARY_battleship_view

[Trigger]
nickname = MILITARY_battleship_view
{{ script.ends(750) }}
Act_CallThorn = scripts\mod\m05_arrest_camera06.thn, Player
;Tilton:
{{ script.line(760) }}

Act_ActTrig = MILITARY_top_view

[Trigger]
nickname = MILITARY_top_view
{{ script.ends(760) }}
Act_CallThorn = scripts\mod\m05_arrest_camera07.thn, hatcher
;Tilton:
{{ script.line(770) }}

Act_ActTrig = MILITARY_trent_final

[Trigger]
nickname = MILITARY_trent_final
{{ script.ends(770) }}
Act_CallThorn = scripts\mod\m05_arrest_camera03.thn, Player
;Player:
{{ script.line(780) }}

Act_ActTrig = MILITARY_warning_positions
Act_ActTrig = MILITARY_trent_reaction

[Trigger]
nickname = MILITARY_trent_reaction
{{ script.ends(780) }}
Act_CallThorn = scripts\mod\m05_arrest_camera08.thn, hatcher
;Hatcher:
{{ script.line(790) }}

Act_ActTrig = MILITARY_warning

[Trigger]
nickname = MILITARY_warning_positions
Cnd_Timer = 1
Act_GiveObjList = {{ military.member(3) }}, unform
Act_GiveObjList = {{ military.member(2) }}, unform
Act_GiveObjList = {{ military.member(1) }}, unform
Act_ActTrig = MILITARY_warning_positions_relocate

[Trigger]
nickname = MILITARY_warning_positions_relocate
Cnd_Timer = 1
Act_RelocateShip = {{ military.member(1) }}, -16670, 0, 28400, 0.22, 0, 0.78, 0
Act_RelocateShip = {{ military.member(2) }}, -16640, 0, 28400, 0.22, 0, 0.78, 0
Act_RelocateShip = {{ military.member(3) }}, -16690, 0, 28380, 0.22, 0, 0.78, 0

[ObjList]
nickname = ol_military_warning1
avoidance = false
GotoVec = goto_no_cruise, -16900, 0, 28500, 40, false

[ObjList]
nickname = ol_military_warning2
avoidance = false
GotoVec = goto_no_cruise, -16900, 0, 28500, 100, false

[ObjList]
nickname = ol_military_warning3
avoidance = false
GotoVec = goto_no_cruise, -16900, 0, 28500, 200, false

[Trigger]
nickname = MILITARY_warning
{{ script.ends(790) }}
Act_GiveObjList = {{ military.member(1) }}, ol_military_warning1
Act_CallThorn = scripts\mod\m05_arrest_camera09.thn, {{ military.member(1) }}
Act_ActTrig = MILITARY_warning_second_step

[Trigger]
nickname = MILITARY_warning_second_step
Cnd_Timer = 1
Act_GiveObjList = {{ military.member(2) }}, ol_military_warning2
Act_GiveObjList = {{ military.member(3) }}, ol_military_warning3
;Military: Rheinlanders is appeared
{{ script.line(810) }}

Act_ActTrig = MILITARY_arrest_done

[Trigger]
nickname = MILITARY_arrest_done
{{ script.ends(810) }}
Act_ActTrig = MILITARY_prebattle

[Trigger]
nickname = MILITARY_prebattle
Cnd_True = no_params
Act_ActTrig = MILITARY_rheinlanders_arrive
Act_ActTrig = MILITARY_prebattle_units_pos
; Act_ActTrig = MILITARY_spawn_extra_military_units

[Trigger]
nickname = MILITARY_spawn_extra_military_units
Cnd_True = no_params
Act_SpawnShip = military_extra_1, no_ol, -16850, 0, 28200, 0, 0, -1, 0
Act_SpawnShip = military_extra_1, no_ol, -16700, 0, 28250, 0, 0, -1, 0

[Trigger]
nickname = MILITARY_prebattle_units_pos
Cnd_Timer = 1
Act_RelocateShip = Player, -16650, 0, 28500, 0.5, 0, 0.5, 0
Act_RelocateShip = hatcher, -16700, -5, 28550, 0.5, 0, 0.5, 0
Act_RelocateShip = {{ military.member(1) }}, -16850, -10, 28520, 0.5, 0, 0.5, 0
Act_RelocateShip = {{ military.member(2) }}, -16800, -15, 28550, 0.5, 0, 0.5, 0
Act_RelocateShip = {{ military.member(3) }}, -16800, -15, 28480, 0.5, 0, 0.5, 0

[Trigger]
nickname = MILITARY_rheinlanders_arrive
Cnd_True = no_params
Act_SpawnShip = {{ rheinland.member(1) }}, no_ol, -18990, -55, 28535, 0.5, 0, -0.5, 0
Act_SpawnShip = {{ rheinland.member(2) }}, no_ol, -19000, -50, 28500, 0.5, 0, -0.5, 0
Act_SpawnShip = {{ rheinland.member(3) }}, no_ol, -19000, -55, 28475, 0.5, 0, -0.5, 0
Act_SpawnShip = {{ rheinland.member(4) }}, no_ol, -19050, -75, 28500, 0.5, 0, -0.5, 0
Act_SpawnShip = {{ rheinland.member(5) }}, no_ol, -19045, -50, 28550, 0.5, 0, -0.5, 0
Act_SpawnShip = {{ rheinland.member(6) }}, no_ol, -19050, -40, 28500, 0.5, 0, -0.5, 0
Act_CallThorn = scripts\mod\m05_rheinlanders_camera.thn, {{ rheinland.member(2) }}
Act_ActTrig = decloaking
Act_ActTrig = MILITARY_rheinlanders_dialog
Act_Invulnerable = {{ military.member(1) }}, true
Act_Invulnerable = {{ military.member(2) }}, true
Act_Invulnerable = {{ military.member(3) }}, true
Act_Invulnerable = hatcher, true

[Trigger]
nickname = decloaking
Cnd_Timer = 1
Act_ActTrig = decloak_rh_1
Act_ActTrig = decloak_rh_2
Act_ActTrig = decloak_rh_3
Act_ActTrig = decloak_rh_4
Act_ActTrig = decloak_rh_5
Act_ActTrig = decloak_rh_6

[Trigger]
nickname = decloak_rh_1
Cnd_Timer = 5
Act_Cloak = {{ rheinland.member(1) }}, false

[Trigger]
nickname = decloak_rh_2
Cnd_Timer = 1
Act_Cloak = {{ rheinland.member(2) }}, false

[Trigger]
nickname = decloak_rh_3
Cnd_Timer = 5.5
Act_Cloak = {{ rheinland.member(3) }}, false

[Trigger]
nickname = decloak_rh_4
Cnd_Timer = 6
Act_Cloak = {{ rheinland.member(4) }}, false

[Trigger]
nickname = decloak_rh_5
Cnd_Timer = 5.25
Act_Cloak = {{ rheinland.member(5) }}, false

[Trigger]
nickname = decloak_rh_6
Cnd_Timer = 6.75
Act_Cloak = {{ rheinland.member(6) }}, false

[Trigger]
nickname = MILITARY_rheinlanders_dialog
Cnd_Timer = 2
;Rheinlander: Prepare to die, freelancer
{{ script.line(820) }}

Act_ActTrig = MILITARY_lets_fight

[Trigger]
nickname = MILITARY_lets_fight
{{ script.ends(820) }}
Act_ActTrig = MILITARY_setrep
Act_ActTrig = RH_FIGHT_init
Act_PlayMusic = none, none, none, music_dangerous_chase

;debug

; Act_AdjHealth = {{ rheinland.member(1) }}, -0.99

; Act_Destroy = {{ rheinland.member(2) }}, EXPLODE
; Act_Destroy = {{ rheinland.member(3) }}, EXPLODE
; Act_Destroy = {{ rheinland.member(4) }}, EXPLODE
; Act_Destroy = {{ rheinland.member(5) }}, EXPLODE
; Act_Destroy = {{ rheinland.member(6) }}, EXPLODE

[;

[Trigger]
nickname = MILITARY_setrep
Cnd_True = no_params
Act_SetVibeLblToShip = rheinland, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = Player, rheinland, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = friend, rheinland, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = rheinland, friend, REP_HOSTILE_MAXIMUM
Act_SetVibe = hatcher, Player, REP_FRIEND_MAXIMUM
Act_SetVibe = Player, hatcher, REP_FRIEND_MAXIMUM

[Trigger]
nickname = RH_FIGHT_init
Cnd_Timer = 2
Act_LockManeuvers = false
Act_GiveObjList = Player, cancel_obj
Act_RevertCam = no_params
Act_Invulnerable = Player, false
{{ nn_destroy_rheinland_fighters.set() }}
Act_ActTrig = RH_FIGHT_dialog
Act_ActTrig = RH_FIGHT_complete
Act_MarkObj = hatcher, 1
Act_MarkObj = {{ rheinland.member(1) }}, 1
Act_MarkObj = {{ rheinland.member(2) }}, 1
Act_MarkObj = {{ rheinland.member(3) }}, 1
Act_MarkObj = {{ rheinland.member(4) }}, 1
Act_MarkObj = {{ rheinland.member(5) }}, 1
Act_MarkObj = {{ rheinland.member(6) }}, 1
Act_GiveObjList = {{ military.member(1) }}, unform
Act_GiveObjList = {{ military.member(2) }}, unform
Act_GiveObjList = {{ military.member(3) }}, unform
Act_PlayerEnemyClamp = 3, 4


[Trigger]
nickname = RH_FIGHT_dialog
Cnd_Timer = 2
;Military: Rheinlanders is appeared
{{ script.line(830) }}

;Tilton: Destroy them all
{{ script.line(840) }}


[Trigger]
nickname = RH_FIGHT_complete
Cnd_Destroyed = rheinland, -1, ALL_IGNORE_LANDING
Act_GiveObjList = hatcher, follow_player
;Tilton
{{ script.line(850) }}

;Hatcher:
{{ script.line(860) }}

;Tilton
{{ script.line(870) }}

;Hatcher:
{{ script.line(880) }}

;Tilton
{{ script.line(890) }}

;Hatcher:
{{ script.line(900) }}

Act_ActTrig = BACK_TO_FOR_TLR_init
Act_PlayMusic = no_params

[Trigger]
nickname = BACK_TO_FOR_TLR_init
{{ script.ends(900) }}
;Tilton
{{ script.line(910) }}

;Player:
{{ script.line(920) }}

;Hatcher:
{{ script.line(930) }}

{{ nn_sig17_tlr_2.set() }}
Act_ActTrig = BACK_TO_FOR_TLR_inside

[Trigger]
nickname = BACK_TO_FOR_TLR_inside
{{ sig17_tlr_2.enter }}
{{ history.item('h509') }}
Act_ActTrig = BACK_TO_FOR_TLR_dialog
Act_ActTrig = BACK_TO_FOR_TLR_complete

[Trigger]
nickname = BACK_TO_FOR_TLR_dialog
Cnd_Timer = 1
;Player:
{{ script.line(950) }}

;Hatcher:
{{ script.line(960) }}

;Player:
{{ script.line(970) }}


[Trigger]
nickname = BACK_TO_FOR_TLR_complete
{{ sig17_tlr_2.exit }}
{{ nn_for_jump.set() }}
Act_ActTrig = welcome_back_to_forbes





[Trigger]
nickname = welcome_back_to_forbes
Cnd_SystemEnter = li_for
{{ nag.nag_off() }}
Act_ActTrig = forbes_welcome_back_wait_for_hatcher

[Trigger]
nickname = forbes_welcome_back_wait_for_hatcher
Cnd_NPCSystemEnter = li_for, Player, hatcher
{{ nag.nag_voice }}
{{ nn_for_tlr_4.set() }}
Act_GiveObjList = hatcher, follow_player
Act_Invulnerable = hatcher, true
Act_ActTrig = FINAL_MSN_player_tlr

[Trigger]
nickname = FINAL_MSN_player_tlr
{{ for_tlr_4.enter }}
Act_ActTrig = FINAL_MSN_tlr_complete

[Trigger]
nickname = FINAL_MSN_tlr_complete
{{ for_tlr_4.exit }}
{{ nn_final_planet.set() }}
Act_ActTrig = FINAL_MSN_close_to_forbes
Act_ActTrig = FINAL_MSN_on_base

[Trigger]
nickname = FINAL_MSN_close_to_forbes
Cnd_DistShip = inside, Player, {{ vendor_planet.name }}, 500
Act_GiveObjList = hatcher, ol_dock_forbes

[Trigger]
nickname = FINAL_MSN_on_base
Cnd_BaseEnter = {{ vendor_planet.base }}
Act_AddRTC = missions\m05\equip_rtc.ini
Act_ActTrig = loc_enter_Cityscape

[Trigger]
nickname = loc_enter_Cityscape
Cnd_LocEnter = Cityscape, {{ vendor_planet.base }}
Act_AdjAcct = 12500
{{ history.item('h510') }}
Act_ActTrig = MSN_REP_AFTER
Act_ChangeState = SUCCEED




[ObjList]
nickname = ol_dock_forbes
BreakFormation = no_params
;;;Dock = li_for_dock_ring


[Trigger]
nickname = MSN_REP_BEFORE
Cnd_True = no_params
Act_SetRep = Player, li_grp, 0.4
Act_SetRep = Player, lc_grp, 0.4
Act_SetRep = Player, lx_grp, -0.3
Act_SetRep = Player, pi_grp, -0.3
Act_SetRep = Player, rh_grp, 0

[Trigger]
nickname = MSN_REP_AFTER
Cnd_True = no_params
Act_SetRep = Player, li_grp, 0.5
Act_SetRep = Player, lc_grp, 0.5
Act_SetRep = Player, lx_grp, -0.65
Act_SetRep = Player, pi_grp, -0.65
Act_SetRep = Player, rh_grp, -0.65

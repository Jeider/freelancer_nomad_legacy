[Mission]
npc_ship_file = missions\m02\npcships.ini

[NPC]
nickname = npc_nnvoice
affiliation = fc_uk_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = NNVoice

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

[MsnShip]
nickname = nag_target
NPC = npc_nnvoice
jumper = false
label = the_nagtarget

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player, 1500, -100, 50, -200

[Trigger]
nickname = Wilham_Armor
Cnd_Timer = 1
Act_Invulnerable = Wilham, true, false, 0.590000

[Trigger]
nickname = Jacobo_Armor
Cnd_Timer = 1
Act_Invulnerable = Jacobo, true, false, 0.200000

;;;gen msn ships

{{ objects_definitions }}

;-------------------------------------
;waypoints

{{ nn_objectives_list }}


;INIT MSN - MEET VENDOR

[Trigger]
nickname = init_ms2
Cnd_True = no_params
InitState = ACTIVE
Act_ActTrig = init_objective
Act_ActTrig = dock_on_vendor_station
Act_ActTrig = wilham_vendor

Act_ActTrig = first_message_not_in_space
Act_ActTrig = first_message_in_space
Act_ActTrig = first_message_on_planet
Act_ActTrig = vendorbase_open_forever

{{ history.item('h200') }}


[Trigger]
nickname = first_message_not_in_space
Cnd_InSpace = false
Act_DeActTrig = first_message_in_space

[Trigger]
nickname = first_message_in_space
Cnd_InSpace = true
Act_ActTrig = first_message_init_message
Act_DeActTrig = first_message_on_planet

[Trigger]
nickname = first_message_on_planet
Cnd_LaunchComplete = Player
Act_ActTrig = first_message_wait_and_call
repeatable = true

[Trigger]
nickname = first_message_wait_and_call
Cnd_Timer = 1
Act_ActTrig = init_objective
Act_ActTrig = first_message_init_message

[Trigger]
nickname = first_message_init_message
Cnd_True = no_params
Act_ActTrig = vendor_popup

[Trigger]
nickname = vendorbase_open_forever
Cnd_True = no_params
repeatable = true
Act_SetVibeOfferBaseHack = rh_biz_03

[Trigger]
nickname = vendor_popup
Cnd_Timer = 2
{{ direct.dialog('vendor') }}

[Trigger]
nickname = init_objective
Cnd_True = no_params
{{ nn_meet_vendor.set_as_path() }}

[Trigger]
nickname = dock_on_vendor_station
Cnd_BaseEnter = {{ battleship.base }}
;;;

;---msn02_vendor

[Trigger]
nickname = wilham_vendor
system = rh_biz
Cnd_LocEnter = Bar, {{ battleship.base }}
Act_AddRTC = missions\m02\wilham_msn.ini
Act_ActTrig = ms2_do_accept

[Trigger]
nickname = ms2_do_accept
system = rh_biz
Cnd_MsnResponse = accept
{{ history.item('h201') }}
Act_DeActTrig = wilham_vendor
Act_RemoveRTC = missions\m02\wilham_msn.ini
Act_PlayerCanDock = false
Act_PlayerCanTradelane = false
Act_ActTrig = fortran_in_space
Act_ActTrig = fortran_launch_complete
{{ nn_launch.set() }}

{{ offer.init() }}

Act_DeActTrig = first_message_in_space
Act_DeActTrig = first_message_not_in_space
Act_DeActTrig = first_message_on_planet
Act_DeActTrig = vendorbase_open_forever

Act_ActTrig = MSN_REP_BEFORE


;-BEGIN MISSION



[Trigger]
nickname = fortran_in_space
Cnd_InSpace = true
{{ thorn_m02_battleship_launch.call() }}
;; Act_StaticCam = -25463, -47, 18654, 1, 0, 0.60, 0
Act_SpawnShip = wilham, no_ol, {{ wilham_init.pos_orient }}

Act_ActTrig = fortran_space_formation
Act_EnableManeuver = formation, false

[Trigger]
nickname = fortran_space_formation
Cnd_Timer = 4
Act_GiveObjList = wilham, follow_player

[Trigger]
nickname = fortran_launch_complete
Cnd_LaunchComplete = Player
Act_ActTrig = Wilham_Armor
Act_ActTrig = Wilham_Triggers
Act_ActTrig = dialog_FirstSpace

[Trigger]
nickname = Wilham_Triggers
Cnd_True = no_params
Act_MarkObj = wilham, 1
Act_SetVibeLblToShip = friend, Player, REP_FRIEND_THRESHOLD
Act_SetVibeShipToLbl = Player, friend, REP_FRIEND_THRESHOLD

[Trigger]
nickname = dialog_FirstSpace
Cnd_Timer = 1
Act_ActTrig = dialog_after_firstSpace

{{ nag.nag_voice }}
{{ nn_biz_tlr_1.set() }}

Act_ActTrig = biz_tlr_1_player_inside

[Trigger]
nickname = biz_tlr_1_player_inside
{{ biz_tlr_1.enter }}

Act_ActTrig = biz_tlr_1_player_exit

;Act_ActTrig = dialog_after_firstSpace

[Trigger]
nickname = dialog_after_firstSpace
Cnd_Timer = 1

;Player: Can you do it without me?
{{ script.line(30) }}

;Wilham: That's because of... (1)
{{ script.line(40) }}

;Wilham: That's because of... (2)
{{ script.line(45) }}

;Wilham: That's because of... (3)
{{ script.line(50) }}

;Wilham: That's because of... (4)
{{ script.line(55) }}

;Player: Ok, got it
{{ script.line(60) }}



[Trigger]
nickname = biz_tlr_1_player_exit
{{ biz_tlr_1.exit }}

{{ nn_biz_to_om15.set() }}

Act_ActTrig = welcome_to_om15

;OM15 SYSTEM



[Trigger]
nickname = welcome_to_om15
Cnd_NPCSystemEnter = om15, wilham, Player

{{ nag.nag_off() }}

Act_RandomPop = False
Act_ActTrig = om15_welcome_complete

[Trigger]
nickname = om15_welcome_complete
Cnd_Timer = 1

Act_ActTrig = dialog_welcome_om15
Act_EnableManeuvers = formation, false

[ObjList]
nickname = ol_wilham_go_away
BreakFormation = no_params
GotoVec = goto_cruise, {{ om15_virtual_depot.pos }}, 2000, true

[Trigger]
nickname = wilham_go_away
Cnd_True = no_params
Act_MarkObj = wilham, 0
Act_GiveObjList = wilham, ol_wilham_go_away
Act_ActTrig = om15_hide_wilham

[Trigger]
nickname = om15_hide_wilham
Cnd_DistShip = outside, Player, wilham, 8000
Act_Destroy = wilham, SILENT

[Trigger]
nickname = dialog_welcome_om15
Cnd_Timer = 1
;Wilham: Go to miner
{{ script.line(70) }}

Act_ActTrig = dialog_welcome_om15_COMPLETE

[Trigger]
nickname = dialog_welcome_om15_COMPLETE
{{ script.ends(70) }}
;Wilham: He is Jacobo
{{ script.line(75) }}

Act_ActTrig = wilham_go_away

Act_ActTrig = REFRESH_LOCKS

{{ nn_om15_tlr_1.set() }}

Act_ActTrig = om15_in_TLR

[Trigger]
nickname = om15_in_TLR
{{ om15_tlr_1.enter }}
Act_ActTrig = om15_leave_TLR

[Trigger]
nickname = om15_leave_TLR
{{ om15_tlr_1.exit }}
Act_ActTrig = INIT_MINER_MISSION

;;;

[MsnSolar]
nickname = test_ast1
string_id = 1
faction = fc_uk_grp
system = om15
position = {{ demo_ast1.pos }}
orientation = {{ demo_ast1.orient }}
archetype = om15_mineast_super
loadout = demo_om15_xast_ultra
label = ast
radius = 0

[MsnSolar]
nickname = test_ast2
string_id = 1
faction = fc_uk_grp
system = om15
position = {{ demo_ast2.pos }}
orientation = {{ demo_ast2.orient }}
archetype = om15_mineast_super
loadout = demo_om15_xast_empty
label = ast
radius = 0



;;;

[Trigger]
nickname = HELP_ASTEROIDS
Cnd_True = no_params
Act_SpawnSolar = test_ast1
Act_SpawnSolar = test_ast2
Act_ActTrig = AST_CAM

[Trigger]
nickname = AST_CAM
Cnd_True = no_params
{{ thorn_m02_demo_ast01.call() }}

{{ script.line(7000) }}
{{ script.line(7010) }}

Act_ActTrig = AST_valid_explode

[Trigger]
nickname = AST_valid_explode
{{ script.ends(7010) }}
Act_LightFuse = test_ast1, xast_dmg_ast07

Act_ActTrig = AST_valid_explode_timeout

[Trigger]
nickname = AST_valid_explode_timeout
Cnd_Timer = 5
{{ script.line(7020) }}

Act_ActTrig = AST_valid_mass_explode_init

[Trigger]
nickname = AST_valid_mass_explode_init
{{ script.ends(7020) }}
Act_ActTrig = AST_valid_new_dmg2
Act_ActTrig = AST_valid_new_dmg3
Act_ActTrig = AST_valid_new_dmg4
Act_ActTrig = AST_valid_new_dmg5
Act_ActTrig = AST_valid_dmg_done

[Trigger]
nickname = AST_valid_new_dmg2
Cnd_Timer = 1
Act_LightFuse = test_ast1, xast_dmg_ast02

[Trigger]
nickname = AST_valid_new_dmg3
Cnd_Timer = 2
Act_LightFuse = test_ast1, xast_dmg_ast05

[Trigger]
nickname = AST_valid_new_dmg4
Cnd_Timer = 3
Act_LightFuse = test_ast1, xast_dmg_ast10

[Trigger]
nickname = AST_valid_new_dmg5
Cnd_Timer = 4
Act_LightFuse = test_ast1, xast_dmg_ast09

[Trigger]
nickname = AST_valid_dmg_done
Cnd_Timer = 9
{{ thorn_m02_demo_ast02.call() }}
{{ script.line(7030) }}

Act_ActTrig = AST_invalid_explode

[Trigger]
nickname = AST_invalid_explode
{{ script.ends(7030) }}
Act_LightFuse = test_ast2, xast_dmg_ast03
Act_ActTrig = AST_invalid_new_dmg2
Act_ActTrig = AST_invalid_new_dmg3
Act_ActTrig = AST_invalid_new_dmg4

Act_ActTrig = AST_invalid_explode_timeout

[Trigger]
nickname = AST_invalid_new_dmg2
Cnd_Timer = 1
Act_LightFuse = test_ast2, xast_dmg_ast01

[Trigger]
nickname = AST_invalid_new_dmg3
Cnd_Timer = 2
Act_LightFuse = test_ast2, xast_dmg_ast04

[Trigger]
nickname = AST_invalid_new_dmg4
Cnd_Timer = 5
Act_LightFuse = test_ast2, xast_dmg_ast08

[Trigger]
nickname = AST_invalid_explode_timeout
Cnd_Timer = 10
Act_Destroy = test_ast1, SILENT
Act_Destroy = test_ast2, SILENT
Act_RevertCam = no_params
Act_Invulnerable = Player, false

[Trigger]
nickname = INIT_MINER_MISSION
Cnd_True = no_params
{{ nn_om15_jacobo_miner.set() }}

Act_LockDock = Player, om15_66, unlock

Act_ActTrig = vendor_jacobo
Act_ActTrig = near_locked_miner
Act_ActTrig = DEMO_FIELD_prepare

[Trigger]
nickname = DEMO_FIELD_prepare
Cnd_Timer = 5
{{ demo_astfield.remove_originals() }}
Act_ActTrig = DEMO_FIELD_spawn_new

[Trigger]
nickname = DEMO_FIELD_spawn_new
Cnd_Timer = 0.25
{{ demo_astfield.spawn_new_ast() }}

[Trigger]
nickname = near_locked_miner
Cnd_DistShip = inside, Player, {{ om15_jacobo_miner.name }}, 2000
Act_ActTrig = miner_popup_true
{{ direct.dialog('mining') }}
{{ history.item('h202') }}

[Trigger]
nickname = miner_popup_true
Cnd_PopupDialog = YES
Act_PObjIdle = no_params
Act_ActTrig = HELP_ASTEROIDS


[Trigger]
nickname = vendor_jacobo
Cnd_LocEnter = Deck, {{ om15_jacobo_miner.base }}
{{ nag.nag_off() }}
Act_AddRTC = missions\m02\jacobo_msn.ini
Act_ActTrig = vendor_jacobo_done
repeatable = true


[Trigger]
nickname = vendor_jacobo_done
Cnd_RTCDone = missions\m02\jacobo_msn.ini
Act_RemoveRTC = missions\m02\jacobo_msn.ini
Act_DeActTrig = vendor_jacobo

Act_ActTrig = jacoboMSN_inSpace
Act_ActTrig = jacoboMSN_launchComplete
Act_ActTrig = roid_miner_force_exit

{{ nn_launch.set() }}
Act_RandomPop = false
Act_PlayerCanDock = false

[Trigger]
nickname = roid_miner_force_exit
Cnd_LocEnter = Deck, {{ om15_jacobo_miner.base }}
Act_AddRTC = missions\m02\roid_miner_force_exit.ini

Act_ActTrig = jacoboMSN_inSpace
Act_ActTrig = jacoboMSN_launchComplete
Act_ActTrig = jacoboMSN_playerLaunch
Act_PlayerCanDock = false

[Trigger]
nickname = jacoboMSN_inSpace
Cnd_InSpace = true
{{ demo_astfield.remove_new_ast() }}
Act_SpawnShip = jacobo, no_ol, {{ jacobo_init.pos_orient }}

[Trigger]
nickname = jacoboMSN_launchComplete
Cnd_LaunchComplete = Player
{{ history.item('h203') }}
Act_ActTrig = Jacobo_Armor
Act_ActTrig = Jacobo_Triggers
Act_ActTrig = dialog_jacoboMSN
Act_ActTrig = spawn_suprises
;reset nag_voice
Act_Destroy = nag_voice, SILENT
Act_PlayerCanDock = false

[Trigger]
nickname = Jacobo_Triggers
Cnd_True = no_params
Act_MarkObj = Jacobo, 1
Act_SetVibeLblToShip = outcast, Player, REP_FRIEND_MAXIMUM
Act_SetVibeShipToLbl = Player, outcast, REP_FRIEND_MAXIMUM

[Trigger]
nickname = dialog_jacoboMSN
Cnd_Timer = 2
;Jacobo: Objectives loaded
{{ script.line(1030) }}

Act_ActTrig = dialog_jacoboMSN_COMPLETE
Act_GiveObjList = Jacobo, follow_player

[Trigger]
nickname = dialog_jacoboMSN_COMPLETE
{{ script.ends(1030) }}
Act_ActTrig = init_SUPRISE_MSN

[Trigger]
nickname = spawn_suprises
Cnd_True = no_params
Act_SpawnShip = suprise_waypoint01_ship01
Act_SpawnShip = suprise_waypoint01_ship02
Act_SpawnShip = suprise_waypoint02_ship01
Act_SpawnShip = suprise_waypoint02_ship02
Act_SpawnShip = suprise_waypoint02_ship03
Act_Invulnerable = suprise_waypoint02_ship01, true
Act_Invulnerable = suprise_waypoint02_ship02, true
Act_Invulnerable = suprise_waypoint02_ship03, true


;SUPRISES

[NPC]
nickname = npc_suprise
affiliation = fc_uk_grp
npc_ship_arch = ms2_suprise_ship
individual_name = 092201
voice = null

[MsnShip]
nickname = suprise_waypoint01_ship01
NPC = npc_suprise
position = {{ ship1.pos }}
orientation = {{ ship1.orient_random }}
label = suprise

[MsnShip]
nickname = suprise_waypoint01_ship02
NPC = npc_suprise
position = {{ ship2.pos }}
orientation = {{ ship2.orient_random }}
label = suprise

[MsnShip]
nickname = suprise_waypoint02_ship01
NPC = npc_suprise
position = {{ shipa1.pos }}
orientation = {{ shipa1.orient_random }}
label = suprise

[MsnShip]
nickname = suprise_waypoint02_ship02
NPC = npc_suprise
position = {{ shipa2.pos }}
orientation = {{ shipa2.orient_random }}
label = suprise

[MsnShip]
nickname = suprise_waypoint02_ship03
NPC = npc_suprise
position = {{ shipa3.pos }}
orientation = {{ shipa3.orient_random }}
label = suprise






;END

[Trigger]
nickname = init_SUPRISE_MSN
Cnd_True = no_params

{{ nag.nag_voice }}
{{ nn_scan_wp1.set() }}

Act_ActTrig = around_WAYPOINT1
Act_ActTrig = dialog_jacobo_afterStart

[Trigger]
nickname = dialog_jacobo_afterStart
Cnd_Timer = 2
;Player: What is junkers?
{{ script.line(100) }}

;Jacobo: Is a badguys
{{ script.line(110) }}

;Jacobo: Is a badguys
{{ script.line(112) }}

;Jacobo: Is a badguys
{{ script.line(115) }}


[Trigger]
nickname = around_WAYPOINT1
Cnd_DistVec = inside, Player, {{ waypoint1.pos }}, 1000
;Act_GiveObjList = Player, force_stop
Act_PlayMusic = music_reveal_and_exposition, none, none, none

;Jacobo: Let's scan
{{ script.line(120) }}

{{ nn_scan_objects.set() }}
Act_MarkObj = suprise_waypoint01_ship01, 1
Act_MarkObj = suprise_waypoint01_ship02, 1
Act_ActTrig = WP1_scanned_LEFT
Act_ActTrig = WP1_scanned_RIGHT

[Trigger]
nickname = WP1_scanned_LEFT
Cnd_CargoScanned = Player, suprise_waypoint01_ship01
Act_ActTrig = WP1_scanned_RIGHT_after_LEFT
Act_MarkObj = suprise_waypoint01_ship01, 0
Act_DeActTrig = WP1_scanned_RIGHT
Act_ActTrig = WP1_scan_in_progress

[Trigger]
nickname = WP1_scanned_RIGHT_after_LEFT
Cnd_CargoScanned = Player, suprise_waypoint01_ship02
Act_ActTrig = WP1_scan_done

[Trigger]
nickname = WP1_scanned_RIGHT
Cnd_CargoScanned = Player, suprise_waypoint01_ship02
Act_ActTrig = WP1_scanned_LEFT_after_RIGHT
Act_MarkObj = suprise_waypoint01_ship02, 0
Act_DeActTrig = WP1_scanned_LEFT
Act_ActTrig = WP1_scan_in_progress

[Trigger]
nickname = WP1_scanned_LEFT_after_RIGHT
Cnd_CargoScanned = Player, suprise_waypoint01_ship01
Act_ActTrig = WP1_scan_done

[Trigger]
nickname = WP1_scan_in_progress
Cnd_True = no_params
;Player: Scanning..
{{ script.line(130) }}


[Trigger]
nickname = WP1_scan_done
Cnd_Timer = 3
;Player: Nothing is found
{{ script.line(140) }}

Act_ActTrig = WP1_objective_complete
Act_ActTrig = clear_WP1_MSN

[Trigger]
nickname = WP1_objective_complete
{{ script.ends(140) }}
Act_ActTrig = init_WP2

[Trigger]
nickname = clear_WP1_MSN
Cnd_Timer = 2
Act_MarkObj = suprise_waypoint01_ship01, 0
Act_MarkObj = suprise_waypoint01_ship02, 0
{{ nag.nag_off() }}

;WP2 NPC

;v2 enemies

[;

9 total

1 - CSV
1 - sabre
3 - stiletto
4 - dagger

[ObjList]
nickname = cinema_attack
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, 28275, 45, 42030, 50, true



[NPC]
nickname = npc_suprise_freighter
affiliation = fc_uk_grp
npc_ship_arch = ms2_suprise_ship_freighter
individual_name = 092201
voice = null

[MsnShip]
nickname = suprise_waypoint02_static_ship01
NPC = npc_suprise_freighter
position = 28580, 38, 42000
orientation = 0.55, -0.1, 0.2, -0.15
label = suprise
radius = 0




[NPC]
nickname = npc_csv_cinema
affiliation = fc_uk_grp
npc_ship_arch = ms2_csv_cinema

[NPC]
nickname = npc_junker_fighter_cinema
affiliation = fc_uk_grp
npc_ship_arch = ms2_junker_fighter

[NPC]
nickname = npc_junker_elite_cinema
affiliation = fc_uk_grp
npc_ship_arch = ms2_junker_elite


[MsnShip]
nickname = junker_cinema1
NPC = npc_csv_cinema
jumper = false
random_name = true
radius = 0
position = 28570, 41, 42005
orientation = 0.65, 0, -0.35, 0
; rotate = 0, -60, 0

[MsnShip]
nickname = junker_cinema2
NPC = npc_junker_fighter_cinema
jumper = false
random_name = true
radius = 0
position = 28575, 45, 42030
orientation = 0.5, 0, 0.5, 0
; rotate = 0, 90, 0

[MsnShip]
nickname = junker_cinema3
NPC = npc_junker_elite_cinema
jumper = false
random_name = true
radius = 0
position = 28575, 40, 42050
orientation = 0.65, 0, 0.35, 0
; rotate = 0, 60, 0

[MsnShip]
nickname = junker_cinema4
NPC = npc_junker_elite_cinema
jumper = false
random_name = true
radius = 0
position = 28595, 40, 42045
orientation = 0.65, 0, 0.35, 0
; rotate = 0, 60, 0

;-->end



[Trigger]
nickname = init_WP2
Cnd_True = no_params
{{ nn_scan_wp2.set() }}
;Jacobo:
{{ script.line(150) }}

Act_ActTrig = around_WAYPOINT2

[Trigger]
nickname = spawn_junkers
Cnd_True = no_params
{{ junker_fighter.spawn_all() }}
{{ junker_elite.spawn_all() }}
{{ junker_csv.spawn_all() }}

[Trigger]
nickname = mark_junkers
Cnd_Timer = 0.1
{{ junker_fighter.mark_all() }}
{{ junker_elite.mark_all() }}
{{ junker_csv.mark_all() }}


[Trigger]
nickname = junker_fight_setrep
Cnd_Timer = 0.1
Act_SetVibeLbl = outcast, junker, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = junker, outcast, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = junker, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, junker, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = around_WAYPOINT2
Cnd_DistVec = inside, Player, {{ waypoint2.pos }}, 1000
Act_GiveObjList = Player, force_stop
Act_GiveObjList = Jacobo, jacobo_fighting

;Jacobo: What is that...
{{ script.line(155) }}

;Player: May be junkers...
{{ script.line(160) }}

Act_ActTrig = INIT_JUNK_cinema


[Trigger]
nickname = INIT_JUNK_cinema
{{ script.ends(160) }}
Act_GiveObjList = Player, force_stop
Act_GiveObjList = Jacobo, force_stop

Act_CallThorn = scripts\mod\m02_junkers.thn, Player

Act_ActTrig = JUNK_freighter_suprise
Act_SpawnShip = junker_cinema1
Act_SpawnShip = junker_cinema2
Act_SpawnShip = junker_cinema3
Act_SpawnShip = junker_cinema4

Act_LightFuse = junker_cinema1, fuse_m02_force_lapa_fx

Act_ActTrig = VOICE_junker2
Act_ActTrig = VOICE_junker3
Act_ActTrig = VOICE_junker4
Act_ActTrig = VOICE_junker2_1

Act_ActTrig = JUNK_cinema_voice_done
Act_ActTrig = JUNK_cinema_done


[Trigger]
nickname = JUNK_freighter_suprise
Cnd_True = no_params
Act_SpawnShip = suprise_waypoint02_static_ship01
Act_LightFuse = suprise_waypoint02_static_ship01, fuse_suprise_rh_freighter

[Trigger]
nickname = VOICE_junker2
Cnd_Timer = 10
;Junker1 #1
{{ script.line(170) }}

[Trigger]
nickname = VOICE_junker3
Cnd_Timer = 17
;Junker2 #1
{{ script.line(180) }}

[Trigger]
nickname = VOICE_junker4
Cnd_Timer = 20
;Junker3 #1
{{ script.line(190) }}

[Trigger]
nickname = VOICE_junker2_1
Cnd_Timer = 25
;Junker1 #1
{{ script.line(200) }}

[Trigger]
nickname = JUNK_cinema_voice_done
{{ script.ends(200) }}
Act_ActTrig = JUNK_junker2_attack
Act_ActTrig = JUNK_junker3_attack
Act_ActTrig = JUNK_junker4_attack
Act_ActTrig = JUNK_junker2_attack

[Trigger]
nickname = JUNK_junker2_attack
Cnd_True = no_params
Act_GiveObjList = junker_cinema2, cinema_attack

[Trigger]
nickname = JUNK_junker3_attack
Cnd_Timer = 0.5
Act_GiveObjList = junker_cinema3, cinema_attack

[Trigger]
nickname = JUNK_junker4_attack
Cnd_Timer = 1
Act_GiveObjList = junker_cinema4, cinema_attack

[Trigger]
nickname = JUNK_cinema_remove_actors
Cnd_True = no_params
Act_Destroy = junker_cinema2, SILENT
Act_Destroy = junker_cinema3, SILENT
Act_Destroy = junker_cinema4, SILENT
Act_ActTrig = JUNK_cinema_remove_csv_job

[Trigger]
nickname = JUNK_cinema_remove_csv_job
Cnd_Timer = 0.5
Act_Destroy = suprise_waypoint02_static_ship01, SILENT
Act_Destroy = junker_cinema1, SILENT

[Trigger]
nickname = JUNK_cinema_done
Cnd_Timer = 33

Act_RelocateShip = Player, {{ player_scan_save.pos_orient }}
Act_RelocateShip = jacobo, {{ jacobo_scan_save.pos_orient }}

Act_ActTrig = JUNK_cinema_remove_actors
Act_ActTrig = JUNK_last_second_before_battle
Act_ActTrig = JUNK_activate_player


{{ direct.save('junker_battle') }}

Act_RelocateShip = Player, {{ player_scan_save.pos_orient }}
Act_SpawnShip = jacobo, no_ol, {{ jacobo_scan_save.pos_orient }}
Act_SpawnShip = nag_voice
Act_ActTrig = spawn_junkers
Act_ActTrig = spawn_suprises
Act_ActTrig = INIT_JUNK_BATTLE_wait

[Trigger]
nickname = JUNK_activate_player
Cnd_Timer = 0.5
Act_RevertCam = no_params

[Trigger]
nickname = JUNK_last_second_before_battle
Cnd_Timer = 1
Act_Invulnerable = Player, false
Act_ActTrig = spawn_junkers
Act_ActTrig = INIT_JUNK_BATTLE_wait

[Trigger]
nickname = INIT_JUNK_BATTLE_wait
Cnd_Timer = 0.2
Act_ActTrig = Jacobo_Armor
Act_ActTrig = Jacobo_Triggers
Act_ActTrig = INIT_JUNK_BATTLE


[Trigger]
nickname = INIT_JUNK_BATTLE
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_omega_battle
{{ nn_destroy_junkers.set() }}
Act_ActTrig = mark_junkers
Act_ActTrig = junker_fight_setrep
Act_ActTrig = junkers_destroyed
{{ nag.combat('scan_combat', jacobo) }}
Act_PlayerEnemyClamp = 2, 3

[Trigger]
nickname = junkers_destroyed
Cnd_Destroyed = junker, -1, ALL_IGNORE_LANDING
Act_PlayMusic = none, none, none, music_anticipation_light
{{ nn_scan_wp2.set() }}
;Jacobo: Try to scan
{{ script.line(210) }}

Act_GiveObjList = Jacobo, follow_player
Act_ActTrig = init_WP2_SEARCH

[Trigger]
nickname = init_WP2_SEARCH
Cnd_Timer = 2
Act_MarkObj = suprise_waypoint02_ship01, 1
Act_MarkObj = suprise_waypoint02_ship02, 1
Act_MarkObj = suprise_waypoint02_ship03, 1
{{ nn_scan_objects.set() }}
Act_ActTrig = IS_FINDED

[Trigger]
nickname = IS_FINDED
Cnd_CargoScanned = Player, suprise_waypoint02_ship02

;Player: Finded!
{{ script.line(230) }}

Act_Invulnerable = suprise_waypoint02_ship01, false
Act_Invulnerable = suprise_waypoint02_ship02, false
Act_Invulnerable = suprise_waypoint02_ship03, false
{{ nn_drop_objects.set() }}
Act_SetVibe = suprise_waypoint02_ship02, Player, REP_HOSTILE_MAXIMUM
Act_SetVibe = Player, suprise_waypoint02_ship02, REP_HOSTILE_MAXIMUM
Act_ActTrig = Spawn_BlackBox

Act_MarkObj = suprise_waypoint02_ship01, 0
Act_MarkObj = suprise_waypoint02_ship03, 0



[Trigger]
nickname = Spawn_BlackBox
Cnd_HealthDec = suprise_waypoint02_ship02, 0.50000
Act_SpawnLoot = black_box
Act_MarkObj = suprise_waypoint02_ship02, 0
Act_MarkObj = black_box, 1
Act_ActTrig = Player_GetBlackBox
Act_ActTrig = black_box_exploded
{{ nn_get_objects.set() }}

[Trigger]
nickname = black_box_exploded
Cnd_Destroyed = black_box
Act_ChangeState = FAIL, 092102


[Trigger]
nickname = Player_GetBlackBox
Cnd_LootAcquired = black_box, Player
Act_DeActTrig = black_box_exploded
Act_RemoveCargo = black_box
;Player: Lets go back home
{{ script.line(240) }}

Act_ActTrig = init_WP3
Act_ActTrig = remove_WP2
Act_NagOff = waypoint2x

[Trigger]
nickname = remove_WP2
Cnd_DistVec = outside, Player, {{ waypoint2.pos }}, 5000
Act_PlayMusic = no_params

[Trigger]
nickname = init_WP3
{{ script.ends(240) }}
{{ nn_om15_tlr_2.set() }}
Act_ActTrig = dialog_route_to_WP3
Act_ActTrig = around_WP3
Act_ActTrig = Jacobo_goes_home

[Trigger]
nickname = dialog_route_to_WP3
Cnd_DistVec = outside, Player, {{ waypoint2.pos }}, 2000
;Jacobo: Can you job for hire?
{{ script.line(250) }}

;Player: Yes, I can.
{{ script.line(260) }}

;Jacobo: Can you help sometime?
{{ script.line(270) }}

;Player: Yes, of course.
{{ script.line(280) }}

;Jacobo: Ok, I'll find you later
{{ script.line(290) }}

;Player: No problem!
{{ script.line(300) }}


[Trigger]
nickname = Jacobo_goes_home
{{ script.ends(300) }}
Act_MarkObj = Jacobo, 0
Act_GiveObjList = jacobo, jacobo_goes_home

[Trigger]
nickname = around_WP3
Cnd_DistShip = inside, Player, {{ om15_tlr_2.start_ring }}, 3000
Act_ActTrig = MINER_MSN_COMPLETE


[MsnLoot]
nickname = black_box
archetype = ms2_black_box
string_id = 217112
rel_pos_obj = suprise_waypoint02_ship02
rel_pos_offset = 0, -10, 0
velocity = 0, -10, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true

[ObjList]
nickname = jacobo_fighting
BreakFormation = no_params
GotoShip = goto_no_cruise, junker1, 5000, true

[ObjList]
nickname = jacobo_goes_home
SetPriority = ALWAYS_EXECUTE
BreakFormation = no_params
Dock = {{ om15_jacobo_miner.name }}

[Trigger]
nickname = MINER_MSN_COMPLETE
Cnd_True = no_params
;Wilham: Trent, go to bizmark jumpgate
{{ script.line(310) }}

Act_ActTrig = BACK_TO_WILHAM

[Trigger]
nickname = BACK_TO_WILHAM
{{ script.ends(310) }}
{{ history.item('h204') }}

Act_RandomPop = false
Act_ActTrig = BACK_TO_WILHAM_in_TLR

[Trigger]
nickname = BACK_TO_WILHAM_in_TLR
{{ om15_tlr_2.enter }}

Act_ActTrig = BACK_TO_WILHAM_spawn_ships
Act_ActTrig = BACK_TO_WILHAM_tlr_exit

[MsnFormation]
nickname = punishers
formation = punishers
{{ punisher.formation_members() }}



[Trigger]
nickname = BACK_TO_WILHAM_spawn_ships
Cnd_True = no_params
Act_SpawnFormation = punishers, {{ punisher_init.pos_orient }}
Act_GiveObjList = punisher1, unform
Act_SpawnShip = {{ wilham.member() }}, no_ol, {{ wilham_back_init.pos_orient }}
Act_ActTrig = around_punishers

[Trigger]
nickname = BACK_TO_WILHAM_tlr_exit
{{ om15_tlr_2.exit }}

;Wilham: Trent, please send data to punishers
{{ script.line(320) }}

Act_ActTrig = Meeting_prepare_Friends
Act_ActTrig = MEETING_first_dialog_ends
{{ nn_wait_for_transfer_data.set() }}

[Trigger]
nickname = Meeting_prepare_Friends
Cnd_True = no_params
Act_ActTrig = Wilham_Armor
Act_ActTrig = Wilham_Triggers
Act_SetVibeLblToShip = punisher, Player, REP_FRIEND_THRESHOLD
Act_SetVibeShipToLbl = Player, punisher, REP_FRIEND_THRESHOLD

[Trigger]
nickname = MEETING_first_dialog_ends
{{ script.ends(320) }}
Act_ActTrig = MEETING_mad_trent_dlg

[Trigger]
nickname = MEETING_mad_trent_dlg
Cnd_Timer = 1
;Player: Why you leave me alone?
{{ script.line(330) }}

;Wilham: This is part of plan
{{ script.line(340) }}

Act_ActTrig = MEETING_mad_trent_dlg_complete

[Trigger]
nickname = MEETING_mad_trent_dlg_complete
{{ script.ends(340) }}
Act_ActTrig = blackbox_readed

[Trigger]
nickname = blackbox_readed
Cnd_Timer = 1
;Punisher_A: We found the depot
{{ script.line(350) }}

;Wilham: Good, give me coords.  Trent, are you join us?
{{ script.line(360) }}

;Player: Can I say no?
{{ script.line(370) }}

;Wilham: Heh, no
{{ script.line(380) }}


Act_ActTrig = blackbox_readed_words_ends

[Trigger]
nickname = blackbox_readed_words_ends
{{ script.ends(360) }}
{{ history.item('h205') }}
Act_ActTrig = init_ROUTE_TO_DEPOT

{{ direct.save('meet_punishers') }}

Act_RelocateShip = Player, {{ player_back_save.pos_orient }}
{{ nag.nag_voice }}
Act_SpawnShip = {{ wilham.member() }}, no_ol, {{ wilham_back_init.pos_orient }}
Act_SpawnFormation = punishers, {{ punisher_init.pos_orient }}
Act_GiveObjList = punisher1, unform
Act_ActTrig = MEET_PUNISHERS_ROUTE_init
Act_ActTrig = Meeting_prepare_Friends

[Trigger]
nickname = MEET_PUNISHERS_ROUTE_init
Cnd_Timer = 0.3
Act_ActTrig = init_ROUTE_TO_DEPOT

[ObjList]
nickname = friends_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic_player_forward, {{ wilham.member() }}, {{ punisher.member_list() }}

[ObjList]
nickname = friends_follow_player_except_catcher
SetPriority = NORMAL
FollowPlayer = fighter_basic_player_forward, {{ wilham.member() }}, {{ punisher.member_list(exclude=[4]) }}

[Trigger]
nickname = remove_friend_formation
Cnd_Timer = 2
Act_GiveObjList = Player, unform
Act_GiveObjList = Player, force_stop
Act_GiveObjList = {{ wilham.member() }}, unform
{{ punisher.give_objlist_all('unform') }}

[Trigger]
nickname = init_ROUTE_TO_DEPOT
Cnd_True = no_params
;Player: So, let's go
{{ script.line(390) }}

Act_GiveObjList = Player, friends_follow_player
Act_ActTrig = init_DEPOT_BATTLE
{{ nn_find_corsair_depot.set() }}

;depots

[MsnSolar]
nickname = depot1
string_id = 092207
faction = co_grp
system = om15
position = 25100, 0, -52500
orientation = 1, 0, 0, 0
archetype = space_tanklx4
label = depot
radius = 0

[MsnSolar]
nickname = depot2
string_id = 092207
faction = co_grp
system = om15
position = 24900, 0, -52500
orientation = 1, 0, 0, 0
archetype = space_tanklx4
label = depot
radius = 0


;;; flyback


[ObjList]
nickname = back_to_depot
SetPriority = ALWAYS_EXECUTE
GotoVec = goto, {{ depot_waypoint1.pos }}, 500, true

[Trigger]
nickname = depot_check_outside
Cnd_True = no_params
Act_ActTrig = depot_wilham_outside
Act_ActTrig = depot_punisher1_outside
;Act_ActTrig = depot_punisher2_outside
Act_ActTrig = depot_punisher3_outside
Act_ActTrig = depot_punisher4_outside
Act_ActTrig = depot_punisher5_outside

[Trigger]
nickname = depot_check_outside_turn_off
Cnd_True = no_params
Act_DeActTrig = depot_wilham_outside
Act_DeActTrig = depot_punisher1_outside
;Act_DeActTrig = depot_punisher2_outside
Act_DeActTrig = depot_punisher3_outside
Act_DeActTrig = depot_punisher4_outside
Act_DeActTrig = depot_punisher5_outside
Act_DeActTrig = depot_wilham_outside_check_again
Act_DeActTrig = depot_punisher1_outside_check_again
;Act_DeActTrig = depot_punisher2_outside_check_again
Act_DeActTrig = depot_punisher3_outside_check_again
Act_DeActTrig = depot_punisher4_outside_check_again
Act_DeActTrig = depot_punisher5_outside_check_again

[Trigger]
nickname = depot_wilham_outside
Cnd_DistVec = outside, wilham, {{ depot_waypoint1.pos }}, 5000
Act_GiveObjList = wilham, back_to_depot
Act_ActTrig = depot_wilham_outside_check_again

[Trigger]
nickname = depot_wilham_outside_check_again
Cnd_DistVec = inside, wilham, {{ depot_waypoint1.pos }}, 1000
Act_ActTrig = depot_wilham_outside

[Trigger]
nickname = depot_punisher1_outside
Cnd_DistVec = outside, punisher1, {{ depot_waypoint1.pos }}, 5000
Act_GiveObjList = punisher1, back_to_depot
Act_ActTrig = depot_punisher1_outside_check_again

[Trigger]
nickname = depot_punisher1_outside_check_again
Cnd_DistVec = inside, punisher1, {{ depot_waypoint1.pos }}, 1000
Act_ActTrig = depot_punisher1_outside

[Trigger]
nickname = depot_punisher2_outside
Cnd_DistVec = outside, punisher2, {{ depot_waypoint1.pos }}, 5000
Act_GiveObjList = punisher2, back_to_depot
Act_ActTrig = depot_punisher2_outside_check_again

[Trigger]
nickname = depot_punisher2_outside_check_again
Cnd_DistVec = inside, punisher2, {{ depot_waypoint1.pos }}, 1000
Act_ActTrig = depot_punisher2_outside

[Trigger]
nickname = depot_punisher3_outside
Cnd_DistVec = outside, punisher3, {{ depot_waypoint1.pos }}, 5000
Act_GiveObjList = punisher3, back_to_depot
Act_ActTrig = depot_punisher3_outside_check_again

[Trigger]
nickname = depot_punisher3_outside_check_again
Cnd_DistVec = inside, punisher3, {{ depot_waypoint1.pos }}, 1000
Act_ActTrig = depot_punisher3_outside

[Trigger]
nickname = depot_punisher4_outside
Cnd_DistVec = outside, punisher4, {{ depot_waypoint1.pos }}, 5000
Act_GiveObjList = punisher4, back_to_depot
Act_ActTrig = depot_punisher4_outside_check_again

[Trigger]
nickname = depot_punisher4_outside_check_again
Cnd_DistVec = inside, punisher4, {{ depot_waypoint1.pos }}, 1000
Act_ActTrig = depot_punisher4_outside

[Trigger]
nickname = depot_punisher5_outside
Cnd_DistVec = outside, punisher5, {{ depot_waypoint1.pos }}, 5000
Act_GiveObjList = punisher5, back_to_depot
Act_ActTrig = depot_punisher5_outside_check_again

[Trigger]
nickname = depot_punisher5_outside_check_again
Cnd_DistVec = inside, punisher5, {{ depot_waypoint1.pos }}, 1000
Act_ActTrig = depot_punisher5_outside


;OBJLIST

[ObjList]
nickname = fall_back
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ base1.pos }}, 500, true

[ObjList]
nickname = fall_back_force
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_cruise, {{ base1.pos }}, 500, true

[ObjList]
nickname = catcher_pursuit
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ catching.pos }}, 500, true

[ObjList]
nickname = catcher_pursuit_force
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_cruise, {{ catching.pos }}, 500, true



;ENDS

[Trigger]
nickname = init_DEPOT_BATTLE
Cnd_True = no_params
Act_ActTrig = depot_far
Act_ActTrig = prepare_depot
Act_ActTrig = near_depot

[Trigger]
nickname = depot_far
Cnd_DistVec = inside, Player, {{ depot_waypoint1.pos }}, 7000
Act_PlayMusic = none, none, none, music_reveal_contraband

[Trigger]
nickname = prepare_depot
Cnd_DistVec = inside, Player, {{ depot_waypoint1.pos }}, 5000
Act_SpawnSolar = depot1
Act_SpawnSolar = depot2


[Trigger]
nickname = near_depot
Cnd_DistVec = inside, Player, {{ depot_waypoint1.pos }}, 2000
Act_ActTrig = remove_friend_formation
Act_ActTrig = depot_check_outside
Act_PlayerEnemyClamp = 2, 3
{{ nag.combat('depot_combat', wilham) }}
{{ nn_destroy_corsairs.set() }}

Act_PlayMusic = music_omega_space, music_omega_danger, music_omega_battle

Act_ActTrig = depot_battle_dialog
Act_ActTrig = depot_spawn_emenies

Act_ActTrig = do_not_destroy_freighters
Act_ActTrig = freighters_fall_back
Act_ActTrig = freighters_catching

[Trigger]
nickname = depot_battle_dialog
Cnd_True = no_params
;Punisher_A: I see enemy!
{{ script.line(1050) }}

;Wilham: Engage the enemy, catch the freighters
{{ script.line(1060) }}

;Punisher_the_Catcher: Got it!
{{ script.line(1070) }}


[Trigger]
nickname = depot_spawn_emenies
Cnd_True = no_params
Act_SpawnShip = {{ depot_freighter.member(1) }}, no_ol, {{ shipd1.pos_orient }}
Act_SpawnShip = {{ depot_freighter.member(2) }}, no_ol, {{ shipd1.pos_orient }}
{{ depot_fighter.spawn_all_with_pos_orient() }}
Act_ActTrig = depot_prepare_enemies
Act_ActTrig = depot_fighters_destroyed


[Trigger]
nickname = depot_prepare_enemies
Cnd_True = no_params
{{ depot_fighter.mark_all() }}
Act_SetVibeLbl = friend, depot_fighters, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = depot_fighters, friend, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = punisher, depot_fighters, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = depot_fighters, punisher, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = friend, depot_freighters, REP_NEUTRAL
Act_SetVibeLbl = depot_freighters, friend, REP_NEUTRAL
Act_SetVibeLbl = punishers, depot_freighters, REP_NEUTRAL
Act_SetVibeLbl = depot_freighters, punishers, REP_NEUTRAL
Act_SetVibeLbl = rheinland, depot, REP_NEUTRAL
Act_SetVibeLbl = depot, rheinland, REP_NEUTRAL
Act_SetVibeLblToShip = corsairs, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsairs, {{ punisher.member(4) }}, REP_NEUTRAL
Act_SetVibeShipToLbl = {{ punisher.member(4) }}, corsairs, REP_NEUTRAL

[Trigger]
nickname = freighters_fall_back
Cnd_Timer = 1
Act_GiveObjList = {{ depot_freighter.member(1) }}, fall_back
Act_GiveObjList = {{ depot_freighter.member(2) }}, fall_back
Act_ActTrig = freighters_fall_back_FORCE

[Trigger]
nickname = freighters_fall_back_FORCE
Cnd_Timer = 4
Act_GiveObjList = {{ depot_freighter.member(1) }}, fall_back_force
Act_GiveObjList = {{ depot_freighter.member(2) }}, fall_back_force

[Trigger]
nickname = freighters_catching
Cnd_Timer = 1
Act_GiveObjList = {{ punisher.member(4) }}, catcher_pursuit
Act_ActTrig = freighters_catching_FORCE

[Trigger]
nickname = freighters_catching_FORCE
Cnd_Timer = 4
Act_GiveObjList = {{ punisher.member(4) }}, catcher_pursuit_force




[Trigger]
nickname = do_not_destroy_freighters
Cnd_Timer = 2
Act_ActTrig = freighters_death_FAIL

[Trigger]
nickname = freighters_death_FAIL
Cnd_Destroyed = depot_freighters, -1, ALL_IGNORE_LANDING
Act_ChangeState = FAIL, 092101

[Trigger]
nickname = depot_fighters_destroyed
Cnd_Destroyed = depot_fighters, -1, ALL_IGNORE_LANDING
Act_PlayMusic = none, none, none, music_reveal_contraband
Act_DeActTrig = do_not_destroy_freighters
Act_DeActTrig = freighters_death_FAIL
Act_Destroy = depot1
Act_Destroy = depot2
Act_GiveObjList = Player, friends_follow_player_except_catcher
Act_ActTrig = remove_freighters
Act_ActTrig = depot_fighter_destroyed_dialog
Act_ActTrig = rep_punisher4_neutral
Act_ActTrig = depot_check_outside_turn_off

[Trigger]
nickname = depot_fighter_destroyed_dialog
Cnd_True = no_params
;Wilham: What about freighters?
{{ script.line(410) }}

;Punisher_the_Catcher: That's keep going
{{ script.line(420) }}

Act_ActTrig = depot_fighter_destroyed_dialog_done

[Trigger]
nickname = depot_fighter_destroyed_dialog_done
{{ script.ends(420) }}
{{ history.item('h206') }}
Act_ActTrig = base_founded_dialog

[Trigger]
nickname = base_founded_dialog
Cnd_Timer = 1
;Punisher_the_Catcher: That's keep going
{{ script.line(430) }}

Act_ActTrig = init_BASE

[Trigger]
nickname = remove_freighters
Cnd_Timer = 1
Act_Destroy = depot_freighter1, SILENT
Act_Destroy = depot_freighter2, SILENT

;;;;;

[ObjList]
nickname = back_to_base
SetPriority = ALWAYS_EXECUTE
GotoVec = goto, {{ base1.pos }}, 500, true

[Trigger]
nickname = base_check_outside
Cnd_True = no_params
Act_ActTrig = base_wilham_outside
Act_ActTrig = base_punisher1_outside
Act_ActTrig = base_punisher2_outside
Act_ActTrig = base_punisher3_outside
Act_ActTrig = base_punisher4_outside
Act_ActTrig = base_punisher5_outside

[Trigger]
nickname = base_check_outside_turn_off
Cnd_True = no_params
Act_DeActTrig = base_wilham_outside
Act_DeActTrig = base_punisher1_outside
Act_DeActTrig = base_punisher2_outside
Act_DeActTrig = base_punisher3_outside
Act_DeActTrig = base_punisher4_outside
Act_DeActTrig = base_punisher5_outside
Act_DeActTrig = base_wilham_outside_check_again
Act_DeActTrig = base_punisher1_outside_check_again
Act_DeActTrig = base_punisher2_outside_check_again
Act_DeActTrig = base_punisher3_outside_check_again
Act_DeActTrig = base_punisher4_outside_check_again
Act_DeActTrig = base_punisher5_outside_check_again

[Trigger]
nickname = base_wilham_outside
Cnd_DistVec = outside, wilham, {{ base1.pos }}, 1000, 8000
Act_GiveObjList = wilham, back_to_base
Act_ActTrig = base_wilham_outside_check_again

[Trigger]
nickname = base_wilham_outside_check_again
Cnd_DistVec = inside, wilham, {{ base1.pos }}, 2000
Act_ActTrig = base_wilham_outside

[Trigger]
nickname = base_punisher1_outside
Cnd_DistVec = outside, punisher1, {{ base1.pos }}, 8000
Act_GiveObjList = punisher1, back_to_base
Act_ActTrig = base_punisher1_outside_check_again

[Trigger]
nickname = base_punisher1_outside_check_again
Cnd_DistVec = inside, punisher1, {{ base1.pos }}, 2000
Act_ActTrig = base_punisher1_outside

[Trigger]
nickname = base_punisher2_outside
Cnd_DistVec = outside, punisher2, {{ base1.pos }}, 8000
Act_GiveObjList = punisher2, back_to_base
Act_ActTrig = base_punisher2_outside_check_again

[Trigger]
nickname = base_punisher2_outside_check_again
Cnd_DistVec = inside, punisher2, {{ base1.pos }}, 2000
Act_ActTrig = base_punisher2_outside

[Trigger]
nickname = base_punisher3_outside
Cnd_DistVec = outside, punisher3, {{ base1.pos }}, 8000
Act_GiveObjList = punisher3, back_to_base
Act_ActTrig = base_punisher3_outside_check_again

[Trigger]
nickname = base_punisher3_outside_check_again
Cnd_DistVec = inside, punisher3, {{ base1.pos }}, 2000
Act_ActTrig = base_punisher3_outside

[Trigger]
nickname = base_punisher4_outside
Cnd_DistVec = outside, punisher4, {{ base1.pos }}, 8000
Act_GiveObjList = punisher4, back_to_base
Act_ActTrig = base_punisher4_outside_check_again

[Trigger]
nickname = base_punisher4_outside_check_again
Cnd_DistVec = inside, punisher4, {{ base1.pos }}, 2000
Act_ActTrig = base_punisher4_outside

[Trigger]
nickname = base_punisher5_outside
Cnd_DistVec = outside, punisher5, {{ base1.pos }}, 8000
Act_GiveObjList = punisher5, back_to_base
Act_ActTrig = base_punisher5_outside_check_again

[Trigger]
nickname = base_punisher5_outside_check_again
Cnd_DistVec = inside, punisher5, {{ base1.pos }}, 2000
Act_ActTrig = base_punisher5_outside










;;;;

[Trigger]
nickname = init_BASE
{{ script.ends(430) }}

;Wilham: Begin battle!
{{ script.line(440) }}


Act_ActTrig = prepare_BASE
Act_ActTrig = around_BASE
{{ nn_find_corsair_base.set() }}
Act_PlayMusic = none, none, none, music_upcoming_action_heavy

[Trigger]
nickname = prepare_BASE
Cnd_DistVec = inside, Player, {{ base1.pos }}, 10000
Act_SpawnSolar = base
Act_SpawnSolar = platform1
Act_SpawnSolar = platform2
Act_ActTrig = BASE_set_Rep
Act_SetRep = Player, co_grp, -0.8

[Trigger]
nickname = around_BASE
Cnd_DistVec = inside, Player, {{ base1.pos }}, 3000
Act_ActTrig = init_BASE_fight
{{ nag.nag_off() }}

{{ direct.save('base_assault') }}

Act_RelocateShip = Player, {{ player_base_save.pos_orient }}
Act_SpawnShip = wilham, no_ol, {{ wilham_base.pos_orient }}
Act_SpawnFormation = punishers, {{ punishers_base.pos_orient }}
Act_GiveObjList = punisher1, unform
Act_ActTrig = init_BASE_fight
Act_ActTrig = Meeting_prepare_Friends
Act_SpawnSolar = base
Act_SpawnSolar = platform1
Act_SpawnSolar = platform2
{{ nag.nag_voice }}

[Trigger]
nickname = init_BASE_fight
Cnd_True = no_params
{{ nag.combat('base_combat', wilham) }}
Act_ActTrig = remove_friend_formation
Act_ActTrig = spawn_first_defence
Act_ActTrig = dialog_BASEFIGHT
Act_ActTrig = base_check_outside
Act_PlayMusic = null, null, null, music_dangerous_chase
Act_PlayerEnemyClamp = 1, 1

[Trigger]
nickname = spawn_first_defence
Cnd_True = no_params
Act_SpawnShip = freighter1, no_ol, {{ shipbfr1.pos_orient }}
{{ base_fighter.spawn_all_with_pos_orient() }}
Act_ActTrig = BASE_set_Rep

[Trigger]
nickname = dialog_BASEFIGHT
Cnd_True = no_params
;Wilham: Trent, help the punishers!
{{ script.line(450) }}

Act_ActTrig = init_PLATFORM_MISSION

[Trigger]
nickname = BASE_set_Rep
Cnd_True = no_params
Act_SetVibeLbl = friend, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, friend, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = punisher, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, punisher, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsairs, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsairs, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = REINFORCE_set_Rep
Cnd_True = no_params
Act_SetVibeLbl = friend, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, friend, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = punisher, corsairs, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsairs, punisher, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsairs, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsairs, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = init_PLATFORM_MISSION
{{ script.ends(450) }}
Act_MarkObj = platform1, 1
Act_MarkObj = platform2, 1
Act_ActTrig = platforms_destroyed
Act_ActTrig = single_platform_destroyed
{{ nn_destroy_platforms.set() }}

[Trigger]
nickname = single_platform_destroyed
Cnd_Destroyed = corsair_platform, 1
;Wilham: One remaining
{{ script.line(1080) }}


[Trigger]
nickname = platforms_destroyed
Cnd_Destroyed = corsair_platform, -1, ALL_IGNORE_LANDING
;Wilham: Are we ready to destroy base?
{{ script.line(1090) }}

;Punisher_A: Negative. Too many enemies.
{{ script.line(1100) }}


Act_ActTrig = init_LAST_ENEMY
Act_ActTrig = corsair_reinforcement
Act_PlayerEnemyClamp = 2, 3

[Trigger]
nickname = init_LAST_ENEMY
{{ script.ends(1100) }}
;Wilham: Roger that. Trent, help us.
{{ script.line(1110) }}


{{ nn_destroy_corsairs.set() }}

[Trigger]
nickname = corsair_reinforcement
Cnd_True = no_params
{{ base_reinforcement.spawn_all() }}
Act_ActTrig = REINFORCE_set_Rep
Act_ActTrig = mark_all_fighters
Act_ActTrig = corsair_reinforcement_second

[Trigger]
nickname = corsair_reinforcement_second
Cnd_Timer = 7
{{ base_reinforcement_second.spawn_all() }}
Act_ActTrig = REINFORCE_set_Rep
Act_ActTrig = mark_all_fighters

Act_ActTrig = all_corsais_destroyed

[Trigger]
nickname = mark_all_fighters
Cnd_True = no_params
{{ base_fighter.mark_all() }}
{{ base_reinforcement.mark_all() }}
{{ base_reinforcement_second.mark_all() }}
Act_MarkObj = freighter1, 1

[Trigger]
nickname = all_corsais_destroyed
Cnd_Destroyed = ships, -1, ALL_IGNORE_LANDING
;Punisher_A: Ready to destroy the base
{{ script.line(1120) }}

Act_ActTrig = last_words_done

[Trigger]
nickname = last_words_done
{{ script.ends(1120) }}
Act_ActTrig = destroy_base

[ObjList]
nickname = dock_on_pirate_base
SetPriority = ALWAYS_EXECUTE
Dock = base

; SOLARS

[MsnSolar]
nickname = base
string_id = 092208
faction = co_grp
system = om15
position = {{ base1.pos }}
archetype = miningbase_FragA_ms2
loadout = ms2_the_base
base = om15_01_Base
label = corsair_base
label = co_the_base
label = corsair
radius = 0
visit = UNKNOWABLE

[MsnSolar]
nickname = platform1
string_id = 092209
faction = co_grp
system = om15
position = {{ platform1.pos }}
archetype = wplatform_ms2
loadout = ms2_the_platform
pilot = MSN01b_Weapon_Platform
label = corsair_platform
label = corsair_base
label = corsair
radius = 0
visit = UNKNOWABLE

[MsnSolar]
nickname = platform2
string_id = 092209
faction = co_grp
system = om15
position = {{ platform2.pos }}
archetype = wplatform_ms2
loadout = ms2_the_platform
pilot = MSN01b_Weapon_Platform
label = corsair_base
label = corsair_platform
label = corsair
radius = 0
visit = UNKNOWABLE

;EXPLOSION

[Trigger]
nickname = destroy_base
Cnd_True = no_params
Act_ActTrig = expl_line1
Act_PlayMusic = none, none, none, music_friendly_encouragement

[Trigger]
nickname = expl_line1
Cnd_Timer = 1
Act_CallThorn = scripts\mod\m02_explode_camera.thn, base
Act_LightFuse = base, msn02_expl_fx01
Act_LightFuse = base, msn02_expl_fx04
Act_ActTrig = expl_line2

[Trigger]
nickname = expl_line2
Cnd_Timer = 2
Act_LightFuse = base, msn02_expl_fx02
Act_LightFuse = base, msn02_expl_fx03
Act_ActTrig = expl_line3

[Trigger]
nickname = expl_line3
Cnd_Timer = 2
Act_LightFuse = base, msn02_expl_final
Act_ActTrig = expl_final

[Trigger]
nickname = expl_final
Cnd_Timer = 2
Act_Destroy = Base, EXPLODE
Act_ActTrig = expl_complete

;END

[Trigger]
nickname = expl_complete
Cnd_Timer = 10
Act_Invulnerable = Player, false
Act_NagOff = base_battle
Act_ActTrig = dialog_Well_done
Act_ActTrig = base_check_outside_turn_off

[Trigger]
nickname = dialog_Well_done
Cnd_Timer = 1
;Wilham: Good job everyone
{{ script.line(1130) }}

Act_ActTrig = init_BACK_HOME

[Trigger]
nickname = init_BACK_HOME
{{ script.ends(1130) }}
{{ nn_om15_to_biz_fly.set() }}
Act_ActTrig = around_Biz_Jumpgate
Act_ActTrig = dialog_START_BACK_HOME
Act_GiveObjList = wilham, follow_player
Act_PlayMusic = music_omega_space, music_omega_danger, music_omega_battle

[Trigger]
nickname = dialog_START_BACK_HOME
Cnd_DistVec = outside, Player, {{ base1.pos }}, 5000

{{ history.item('h207') }}

;Wilham: Some admiral want to meet you
{{ script.line(460) }}

;Player: How many admirals you have?
{{ script.line(470) }}

;Wilham: Many
{{ script.line(480) }}

;Player: Ok
{{ script.line(490) }}



[Trigger]
nickname = around_Biz_Jumpgate
Cnd_DistShip = inside, Player, {{ om15_to_biz.name }}, 3000
{{ nn_om15_to_biz.set() }}
Act_ActTrig = welcome_to_biz

[Trigger]
nickname = welcome_to_biz
Cnd_NPCSystemEnter = rh_biz, Player, wilham
Act_NagOff = jumpin_bizmark
{{ nag.nag_voice }}
{{ nn_biz_tlr_2.set() }}
Act_GiveObjList = wilham, follow_player
Act_ActTrig = final_tlr_inside

[Trigger]
nickname = final_tlr_inside
{{ biz_tlr_2.enter }}
Act_ActTrig = final_tlr_exit

[Trigger]
nickname = final_tlr_exit
{{ biz_tlr_2.exit }}
Act_PlayMusic = music_rh_space, music_rh_danger, music_rh_battle, music_victory, 1, true
{{ nn_battleship.set() }}

;Wilham: Trent, you go first
{{ script.line(1140) }}

Act_ActTrig = THE_HOME

[Trigger]
nickname = THE_HOME
Cnd_BaseEnter = {{ battleship.base }}
Act_AddRTC = missions\m02\reichman_msn.ini
Act_ActTrig = loc_enter_Deck
Act_NagOff = dock_battleship

[Trigger]
nickname = loc_enter_Deck
Cnd_LocEnter = Deck, {{ battleship.base }}
{{ history.item('h208') }}
Act_AdjAcct = 10000
Act_ActTrig = MSN_REP_AFTER
Act_ChangeState = SUCCEED



[Trigger]
nickname = MSN_REP_BEFORE
Cnd_True = no_params
Act_SetRep = Player, co_grp, -0.8
Act_SetRep = Player, rx_grp, -0.8
Act_SetRep = Player, pi_grp, -0.8
Act_SetRep = Player, junk_grp, -0.8
Act_ActTrig = REP_HOTFIX

[Trigger]
nickname = MSN_REP_AFTER
Cnd_True = no_params
Act_SetRep = Player, rh_grp, 0.65
Act_SetRep = Player, rx_grp, -0.65
Act_SetRep = Player, pi_grp, -0.65
Act_ActTrig = REP_HOTFIX

[Trigger]
nickname = REP_HOTFIX
Cnd_True = no_params
Act_SetRep = Player, fc_lr_grp, -0.8

[Trigger]
nickname = REFRESH_LOCKS
Cnd_True = no_params
{{ direct.lock_docks }}

{{ demo_astfield.get_msn_solars() }}

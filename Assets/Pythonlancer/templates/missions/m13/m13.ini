[Mission]
npc_ship_file = missions\m13\npcships.ini

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

;--------------------------------

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

[ObjList]
nickname = ol_no_avoid
avoidance = false

;--------------------------

;;;gen msn ships

{{ objects_definitions }}

{{ osiris_arrive1.define() }}
{{ osiris_escape.define() }}

{{ wp1.define() }}
{{ wp2.define() }}
{{ wp3.define() }}
{{ wp4.define() }}
{{ wp5.define() }}
{{ gen1.define() }}
{{ gen2.define() }}
{{ gen3.define() }}

{{ lazer1.define('space_hidden_root', loadout='sph02_laser') }}

{{ krieg1.define('hidden_connect_m13_long', loadout='krieg_static') }}

{{ sph02_door02_open.define('lair_anim_door', loadout='lair_airlock_door_open_forever') }}
{{ sph02_door03_open.define('lair_anim_door', loadout='lair_airlock_door_open_forever') }}
{{ sph02_door03_close.define('lair_anim_door', loadout='lair_airlock_door_close_forever_snd') }}

{{ sph2_core_F01.define() }}
{{ sph2_core_F02.define() }}
{{ sph2_core_F03.define() }}
{{ sph2_core_F04.define() }}
{{ sph2_core_F05.define() }}
{{ sph2_core_F06.define() }}
{{ sph2_core_F07.define() }}
{{ sph2_core_F08.define() }}
{{ sph2_core_G01.define() }}
{{ sph2_core_G02.define() }}
{{ sph2_core_G03.define() }}
{{ sph2_core_G04.define() }}
{{ sph2_core_G05.define() }}
{{ sph2_core_G06.define() }}
{{ sph2_core_G07.define() }}
{{ sph2_core_G08.define() }}

{{ krieg_sleep.define() }}
{{ krieg_opens.define() }}
{{ krieg_collector.define() }}
{{ krieg_opens_force.define() }}
{{ krieg_silent.define() }}

{{ krieg_gen1.define() }}
{{ krieg_gen2.define() }}
{{ krieg_gen3.define() }}
{{ krieg_gen4.define() }}
{{ krieg_gen5.define() }}
{{ krieg_gen6.define() }}

{{ hit_fx.define() }}
{#{{ krieg_fire.define() }}#}

{{ direct.define_solar_group('KRIEG_WP') }}

{{ inside_column1.define() }}
{{ inside_column2.define() }}

{{ direct.define_solar_group('SPHERE_NO_CAP') }}

{{ power_container.define('m11_scient_block') }}

{{ direct.define_solar_group('SPHERE_WALL') }}
{{ direct.define_solar_group('OM13_BS1') }}
{{ direct.define_solar_group('OM13_BS2') }}
{{ direct.define_solar_group('OM13_BS3') }}



;;;;;;;;;;;;;;;;; OMEGA 13

{{ inside_kernel01.define() }}
{{ inside_kernel02.define() }}
{{ direct.define_solar_group('KERNELS1') }}
{{ om13alt_beast_kernel1_01.define() }}
{{ direct.define_solar_group('OM13_WALLS') }}
{{ direct.define_solar_group('OM13_BEAST_KERNELS') }}
{{ om13alt_ast_a_lrg01.define() }}
{{ krieg_far.define() }}

[MsnLoot]
nickname = sphere_power_cell
archetype = lair_power_cell
string_id = 217200
position = {{ direct.pos('sphere2', 'power_cell') }}
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
can_jettison = false

[MsnLoot]
nickname = om13_power_cell
archetype = lair_power_cell
string_id = 217200
position = {{ direct.pos('om13_alt', 'power_cell') }}
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
can_jettison = false

;-------------------------------------
;waypoints

{{ nn_objectives_list }}


[Trigger]
nickname = FRIEND_setrep
Cnd_Timer = 0.1
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}

[Trigger]
nickname = LAZERGEN_setrep
Cnd_True = no_params
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'asf', 'lazergen') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'lazergen') }}

[Trigger]
nickname = SPHERE_init
Cnd_True = no_params
Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM

{{ sph2_core_F01.spawn() }}
{{ sph2_core_F02.spawn() }}
{{ sph2_core_F03.spawn() }}
{{ sph2_core_F04.spawn() }}
{{ sph2_core_F05.spawn() }}
{{ sph2_core_F06.spawn() }}
{{ sph2_core_F07.spawn() }}
{{ sph2_core_F08.spawn() }}
{{ sph2_core_G01.spawn() }}
{{ sph2_core_G02.spawn() }}
{{ sph2_core_G03.spawn() }}
{{ sph2_core_G04.spawn() }}
{{ sph2_core_G05.spawn() }}
{{ sph2_core_G06.spawn() }}
{{ sph2_core_G07.spawn() }}
{{ sph2_core_G08.spawn() }}

{{ krieg_gen1.spawn() }}
{{ krieg_gen2.spawn() }}
{{ krieg_gen3.spawn() }}
{{ krieg_gen4.spawn() }}
{{ krieg_gen5.spawn() }}
{{ krieg_gen6.spawn() }}

{{ krieg_sleep.spawn() }}



{{ sph2_core_F01.invulnerable() }}
{{ sph2_core_F02.invulnerable() }}
{{ sph2_core_F03.invulnerable() }}
{{ sph2_core_F04.invulnerable() }}
{{ sph2_core_F05.invulnerable() }}
{{ sph2_core_F06.invulnerable() }}
{{ sph2_core_F07.invulnerable() }}
{{ sph2_core_F08.invulnerable() }}
{{ sph2_core_G01.invulnerable() }}
{{ sph2_core_G02.invulnerable() }}
{{ sph2_core_G03.invulnerable() }}
{{ sph2_core_G04.invulnerable() }}
{{ sph2_core_G05.invulnerable() }}
{{ sph2_core_G06.invulnerable() }}
{{ sph2_core_G07.invulnerable() }}
{{ sph2_core_G08.invulnerable() }}

{{ krieg_gen1.invulnerable() }}
{{ krieg_gen2.invulnerable() }}
{{ krieg_gen3.invulnerable() }}
{{ krieg_gen4.invulnerable() }}
{{ krieg_gen5.invulnerable() }}
{{ krieg_gen6.invulnerable() }}

{{ krieg_sleep.invulnerable() }}

{{ direct.spawn_solar_group('KRIEG_WP') }}

;{{ krieg_opens.spawn() }}
[;
{{ krieg_opens_force.spawn() }}

[Trigger]
nickname = SPHERE_AWAKEN_init
Cnd_True = no_params
Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM


{{ krieg_opens_force.spawn() }}

{{ krieg_gen1.spawn() }}
{{ krieg_gen2.spawn() }}
{{ krieg_gen3.spawn() }}
{{ krieg_gen4.spawn() }}
{{ krieg_gen5.spawn() }}
{{ krieg_gen6.spawn() }}

{{ krieg_opens_force.invulnerable() }}

Act_Destroy = sphere2_core_box_X10, SILENT
Act_Destroy = sphere2_core_box_X12, SILENT
Act_Destroy = sphere2_core_box_X14, SILENT
Act_Destroy = sphere2_core_box_X16, SILENT
Act_Destroy = sph2_tower05, SILENT
Act_Destroy = sph2_tower06, SILENT
Act_Destroy = sph2_tower07, SILENT
Act_Destroy = sph2_tower08, SILENT

Act_ActTrig = AWAKE_turn_gens_fast
{{ direct.spawn_solar_group('KRIEG_WP') }}

[Trigger]
nickname = LAZERGEN_init
Cnd_True = no_params
{{ gen1.spawn() }}
{{ gen2.spawn() }}
{{ gen3.spawn() }}
{{ wp1.spawn() }}
{{ wp2.spawn() }}
{{ wp3.spawn() }}
{{ wp4.spawn() }}
{{ wp5.spawn() }}
{{ gen1.invulnerable(damage_from_player=True) }}
{{ gen2.invulnerable(damage_from_player=True) }}
{{ gen3.invulnerable(damage_from_player=True) }}



[Trigger]
nickname = initialize_init
InitState = ACTIVE
Cnd_True = no_params
;Act_ChangeState = SUCCEED
Act_ActTrig = tttt


[Trigger]
nickname = tttt
Cnd_Timer = 1

Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM

;; STAGE 1 (sphere)

;;Act_ActTrig = LASER_demo
;;Act_ActTrig = BEAST_REACTOR_demo
;;Act_ActTrig = CATACOMB_demo
;;Act_ActTrig = COME_WITH_ME_demo
;;Act_ActTrig = OSIRIS_HIT_demo

;; STAGE 2 (omega 13)

;;Act_ActTrig = OMEGA13_demo
;;Act_ActTrig = BEAST_KERNEL_ONE_demo
;;Act_ActTrig = MIDDLE_KERNELS_demo
;;Act_ActTrig = MIDDLE_KERNELS_before_beast_demo
;;Act_ActTrig = BEAST_KERNEL_TWO_exit_player
Act_ActTrig = EXIT_CHAMBER_demo
;;Act_ActTrig = BH_ENGINE_demo


[Trigger]
nickname = DEBUG_force_dock
;;InitState = ACTIVE  ; DEBUG ONLY
Cnd_Timer = 1
Act_ForceLand = sphere2_99_base


[Trigger]
nickname = start_M13
;;InitState = ACTIVE
Cnd_BaseEnter = sphere2_99_base
{{ nag.nag_off() }}
{{ offer.init() }}
{{ rtc.add('captured') }}
Act_ActTrig = SPH2_start_ACCEPT

Act_PlayerCanDock = false
Act_PlayerCanTradelane = false
Act_RandomPop = false


[Trigger]
nickname = SPH2_start_ACCEPT
Cnd_MsnResponse = accept
{{ rtc.remove('captured') }}
{{ offer.accept() }}
{{ nn_launch.set() }}
Act_ActTrig = SPH2_player_launch

[Trigger]
nickname = SPH2_player_launch
Cnd_PlayerLaunch = no_params
Act_SpawnSolar = {{ osiris_arrive1.name }}
Act_ActTrig = SPHERE_inspace
Act_ActTrig = SPHERE_launch_complete

{{ direct.ol_goto('sphere2', 'li_dread_arrive_goto', 'ol_li_dread_arrive', 'goto_no_cruise') }}

[Trigger]
nickname = SPHERE_inspace
Cnd_SpaceEnter = sphere2
Act_PlayMusic = none, none, none, music_no_ally_danger
{{ direct.spawn_ship('sphere2', 'darcy_start', darcy, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'alaric_start', alaric, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'hatcher_start', hatcher, no_mark=True) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman01', wingman.member_obj(1)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman02', wingman.member_obj(2)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman03', wingman.member_obj(3)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman04', wingman.member_obj(4)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman05', wingman.member_obj(5)) }}
{{ direct.spawn_capital('sphere2', li_dread, 'li_dread_arrive', ol='ol_li_dread_arrive') }}
Act_ActTrig = FRIEND_setrep
{{ wingman.invulnerable() }}

[ObjList]
nickname = ol_trent_wing_follow
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ hatcher.name }}, {{ alaric.name }}, {{ darcy.name }}, {{ wingman.member_list() }}

[ObjList]
nickname = ol_trent_wing_follow_and_trent
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ hatcher.name }}, {{ alaric.name }}, {{ darcy.name }}, {{ wingman.member_list() }}, {{ edison_trent.name }}

[Trigger]
nickname = SPHERE_launch_complete
Cnd_LaunchComplete = Player
{{ nag.nag_voice }}
Act_GiveObjList = Player, ol_trent_wing_follow
Act_ActTrig = SPHERE_init_obj

[Trigger]
nickname = SPHERE_init_obj
Cnd_Timer = 1
{{ script.line(5) }}
{{ nn_goto_core.set() }}
Act_ActTrig = SPHERE_inside_core
Act_ActTrig = SPHERE_outside_osiris
Act_ActTrig = SPHERE_init

[Trigger]
nickname = SPHERE_outside_osiris
{{ direct.outside_pos('sphere2', 'osiris_arrive1', 1200) }}
{{ script.dialog(10, 120) }}
Act_ActTrig = SPHERE_outside_osiris_comm_continue

[Trigger]
nickname = SPHERE_outside_osiris_comm_continue
{{ script.ends(120) }}
{{ script.dialog(130, 170) }}

[Trigger]
nickname = SPHERE_inside_core
{{ direct.inside_pos('sphere2', 'krieg1', 15000) }}
{{ nn_goto_lazer.set() }}
{{ li_dread.hide() }}
{{ osiris_arrive1.hide() }}
Act_ActTrig = LAZERGEN_init
Act_ActTrig = LAZERGEN_inside

[Trigger]
nickname = LAZERGEN_inside
{{ direct.inside_pos('sphere2', 'sph02_lazergen', 3000) }}
Act_PlayMusic = none, none, none, music_no_ally_battle
Act_ActTrig = LAZERGEN_setrep
{{ nn_destroy_lazergens.set() }}
{{ gen1.mark() }}
{{ gen2.mark() }}
{{ gen3.mark() }}
Act_ActTrig = LAZERGEN_gen1_destroyed
Act_ActTrig = LAZERGEN_gen2_destroyed
Act_ActTrig = LAZERGEN_gens_all_destroyed
{{ script.dialog(180, 210) }}
Act_ActTrig = respawn_caps_inside
Act_ActTrig = LAZERGEN_inside_close

[Trigger]
nickname = LAZERGEN_inside_close
{{ direct.inside_pos('sphere2', 'sph02_lazergen', 1000) }}
{{ darcy.give_objlist_all('unform') }}
{{ alaric.give_objlist_all('unform') }}
{{ hatcher.give_objlist_all('unform') }}
{{ wingman.give_objlist_all('unform') }}

[Trigger]
nickname = LAZERGEN_gen1_destroyed
Cnd_Destroyed = lazer_generators, 1, ALL
{{ script.dialog(220, 230) }}

[Trigger]
nickname = LAZERGEN_gen2_destroyed
Cnd_Destroyed = lazer_generators, 2, ALL
{{ script.dialog(240, 250) }}

[Trigger]
nickname = LAZERGEN_gens_all_destroyed
Cnd_Destroyed = lazer_generators, -1, ALL
Act_ActTrig = LASER_init
{{ wp1.destroy() }}
{{ wp2.destroy() }}
{{ wp3.destroy() }}
{{ wp4.destroy() }}
{{ wp5.destroy() }}
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_laser_offscreen') }}
Act_PObjIdle = no_params

{{ direct.ol_goto('sphere2', 'li_dread_inside_goto', 'ol_li_dread_inside', 'goto_no_cruise') }}
{{ direct.ol_goto('sphere2', 'osiris_inside_goto', 'ol_osiris_inside', 'goto_no_cruise') }}


[Trigger]
nickname = respawn_caps_inside
Cnd_True = no_params
{{ direct.spawn_capital('sphere2', li_dread, 'li_dread_inside', ol='ol_li_dread_inside') }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_inside', ol='ol_osiris_inside') }}
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = LASER_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_laser') }}
Act_ActTrig = SPHERE_init
;;Act_ActTrig = LASER_destroy_columns
;;Act_ActTrig = AWAKE_init
Act_ActTrig = LASER_init
;;Act_ActTrig = LI_DREAD_init
;;Act_ActTrig = BOXX_break

[Trigger]
nickname = BOXX_break
Cnd_Timer = 2
Act_ActTRig = BOXX_01_break
Act_ActTRig = BOXX_columns_break

[Trigger]
nickname = BOXX2_break
Cnd_Timer = 20
Act_ActTRig = BOXX_02_break
;
;[Trigger]
;nickname = BOXX_break
;Cnd_Timer = 1
;Act_ActTRig = BOXX_01_break
;Act_ActTRig = BOXX_02_break
;Act_ActTRig = BOXX_03_break
;Act_ActTRig = BOXX_04_break
;Act_ActTRig = BOXX_columns_break

[Trigger]
nickname = BOXX_columns_break
Cnd_Timer = 8
Act_ActTrig = LASER_destroy_columns

[Trigger]
nickname = BOXX_01_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X10, fuse_sphere_ast_death
Act_ActTrig = BOXX_01_crash_laser

[Trigger]
nickname = BOXX_01_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower05, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower06, fuse_sphere_generator_alt2
Act_LightFuse = sphere2_core_box_X12, fuse_sphere_ast_death
Act_ActTrig = BOXX_01_ends
Act_ActTrig = BOXX_01_reaction

[Trigger]
nickname = BOXX_01_reaction
Cnd_Timer = 1
{{ script.dialog(280, 290) }}

[Trigger]
nickname = BOXX_01_ends
Cnd_Timer = 20
Act_ActTrig = BOXX_04_break

[Trigger]
nickname = BOXX_04_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X14, fuse_sphere_ast_death
Act_ActTrig = BOXX_04_crash_laser

[Trigger]
nickname = BOXX_04_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower07, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower08, fuse_sphere_generator_alt2
Act_LightFuse = sphere2_core_box_X16, fuse_sphere_ast_death

[Trigger]
nickname = BOXX_02_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X02, fuse_sphere_ast_death
Act_ActTrig = BOXX_02_crash_laser

[Trigger]
nickname = BOXX_02_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower01, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower02, fuse_sphere_generator_alt2
Act_ActTrig = BOXX_02_crash_top

[Trigger]
nickname = BOXX_02_crash_top
Cnd_Timer = 10
Act_LightFuse = sphere2_core_box_X04, fuse_sphere_ast_death
Act_ActTrig = BOXX_02_ends

[Trigger]
nickname = BOXX_02_ends
Cnd_Timer = 30
Act_ActTrig = BOXX_03_break

[Trigger]
nickname = BOXX_03_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X06, fuse_sphere_ast_death
Act_ActTrig = BOXX_03_crash_laser

[Trigger]
nickname = BOXX_03_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower03, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower04, fuse_sphere_generator_alt2
Act_ActTrig = BOXX_03_crash_top

[Trigger]
nickname = BOXX_03_crash_top
Cnd_Timer = 10
Act_LightFuse = sphere2_core_box_X08, fuse_sphere_ast_death



[Trigger]
nickname = LASER_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_no_ally_danger

{{ li_dread.hide() }}
{{ osiris.hide() }}
{{ darcy.hide_all() }}
{{ alaric.hide_all() }}
{{ hatcher.hide_all() }}
{{ wingman.hide_all() }}
{{ thorn_m13_laser_fire.call() }}
{{ lazer1.spawn() }}

Act_ActTrig = LASER_hit_fx

[Trigger]
nickname = LASER_hit_fx
Cnd_Timer = 2.7
{{ hit_fx.spawn() }}
Act_ActTrig = LASER_stop_laser

{{ script.line(260) }}

[Trigger]
nickname = LASER_stop_laser
Cnd_Timer = 3
{{ lazer1.hide() }}
Act_PlaySoundEffect = cruise_backfire
Act_ActTrig = LASER_stop_hit

[Trigger]
nickname = LASER_stop_hit
Cnd_Timer = 1
{{ hit_fx.hide() }}
Act_ActTrig = LASER_stop_hit_reaction

[Trigger]
nickname = LASER_stop_hit_reaction
Cnd_Timer = 2
{{ thorn_m13_laser_fire_done.call() }}

{{ script.line(270) }}
Act_ActTrig = LASER_stop_hit_reaction_done

[Trigger]
nickname = LASER_stop_hit_reaction_done
{{ script.ends(270) }}
Act_PlayMusic = none, none, none, music_discordant_psychosis
Act_ActTrig = BOXX_break
;;Act_ActTrig = LASER_destroy_columns

[Trigger]
nickname = destroy_column_1
Cnd_Timer = 4
{{ sph2_core_F01.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G01.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_2
Cnd_Timer = 12
{{ sph2_core_F02.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G02.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_3
Cnd_Timer = 8
{{ sph2_core_F03.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G03.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_4
Cnd_Timer = 11
{{ sph2_core_F04.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G04.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_5
Cnd_Timer = 9
{{ sph2_core_F05.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G05.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_6
Cnd_Timer = 6.5
{{ sph2_core_F06.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G06.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_7
Cnd_Timer = 10
{{ sph2_core_F07.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G07.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_8
Cnd_True = no_params
{{ sph2_core_F08.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G08.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = LASER_destroy_columns
Cnd_Timer = 1
Act_ActTrig = destroy_column_1
Act_ActTrig = destroy_column_2
Act_ActTrig = destroy_column_3
Act_ActTrig = destroy_column_4
Act_ActTrig = destroy_column_5
Act_ActTrig = destroy_column_6
Act_ActTrig = destroy_column_7
Act_ActTrig = destroy_column_8
Act_ActTrig = LASER_columns_destroyed

[Trigger]
nickname = LASER_columns_destroyed
Cnd_Timer = 11
Act_ActTrig = AWAKE_init

[Trigger]
nickname = LASER_hide_columns
Cnd_True = no_params
{{ sph2_core_F01.hide() }}
{{ sph2_core_F02.hide() }}
{{ sph2_core_F03.hide() }}
{{ sph2_core_F04.hide() }}
{{ sph2_core_F05.hide() }}
{{ sph2_core_F06.hide() }}
{{ sph2_core_F07.hide() }}
{{ sph2_core_F08.hide() }}
{{ sph2_core_G01.hide() }}
{{ sph2_core_G02.hide() }}
{{ sph2_core_G03.hide() }}
{{ sph2_core_G04.hide() }}
{{ sph2_core_G05.hide() }}
{{ sph2_core_G06.hide() }}
{{ sph2_core_G07.hide() }}
{{ sph2_core_G08.hide() }}

[Trigger]
nickname = AWAKE_init
Cnd_Timer = 1
;;Act_ActTrig = LASER_hide_columns
{{ krieg_sleep.hide() }}
Act_ActTrig = AWAKE_turn_gens
Act_ActTrig = AWAKE_respawn_and_open_doors


[Trigger]
nickname = AWAKE_respawn_and_open_doors
Cnd_Timer = 0.01
{{ krieg_opens.spawn() }}
{{ thorn_m13_opens.call() }}
Act_ActTrig = AWAKE_gens_loaded

[Trigger]
nickname = AWAKE_gens_loaded
Cnd_Timer = 1
Act_ACtTrig = LI_DREAD_init

{{ script.dialog(300, 320) }}

{{ direct.ol_goto('sphere2', 'li_dread_death2', 'ol_li_dread_death', 'goto_no_cruise') }}

[Trigger]
nickname = LI_DREAD_init
Cnd_True = no_params
{{ direct.spawn_capital('sphere2', li_dread, 'li_dread_death', ol='ol_li_dread_death', invulnerable=False) }}
Act_Invulnerable = li_dread, false
{{ direct.spawn_capital('sphere2', krieg_fire, 'krieg_fire') }}
Act_ActTrig = LI_DREAD_target

[Trigger]
nickname = LI_DREAD_target
{{ direct.inside_pos('sphere2', 'li_dread_death2', 1700, obj='li_dread') }}
Act_ActTrig = LI_DREAD_do_fire
Act_ActTrig = LI_DREAD_target_reaction

[Trigger]
nickname = LI_DREAD_target_reaction
Cnd_True = no_params
{{ script.line(323) }}

[Trigger]
nickname = LI_DREAD_do_fire
Cnd_Timer = 0.1
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', 'krieg_fire', 'li_dread') }}
{{ thorn_m13_beast_fire.call() }}
Act_ActTrig = LI_DREAD_hit

[Trigger]
nickname = LI_DREAD_hit
Cnd_ProjHit = li_dread, 1, krieg_fire
{{ krieg_fire.hide() }}
{{ li_dread.fuse('l_dreadnought_fuse_fast') }}

Act_ActTrig = LI_DREAD_damage


[Trigger]
nickname = turn_gen_1
Cnd_True = no_params
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen1.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_2
Cnd_Timer = 2
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen2.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_6
Cnd_Timer = 4
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen6.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_4
Cnd_Timer = 5.5
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen4.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_3
Cnd_Timer = 7
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen3.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_5
Cnd_Timer = 8.5
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen5.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = AWAKE_turn_gens
Cnd_Timer = 5
Act_ActTrig = turn_gen_1
Act_ActTrig = turn_gen_2
Act_ActTrig = turn_gen_3
Act_ActTrig = turn_gen_4
Act_ActTrig = turn_gen_5
Act_ActTrig = turn_gen_6

[Trigger]
nickname = AWAKE_turn_gens_fast
Cnd_True = no_params
{{ krieg_gen1.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen2.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen6.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen4.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen3.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen5.fuse('fuse_beast_gen_turn_on') }}


[Trigger]
nickname = LASER_destroy_columns
Cnd_Timer = 4
Act_ActTrig = destroy_column_1
Act_ActTrig = destroy_column_2
Act_ActTrig = destroy_column_3
Act_ActTrig = destroy_column_4
Act_ActTrig = destroy_column_5
Act_ActTrig = destroy_column_6
Act_ActTrig = destroy_column_7
Act_ActTrig = destroy_column_8
;;; destroy columns

[Trigger]
nickname = LI_DREAD_damage
Cnd_True = no_params
{{ script.line(326) }}
Act_ActTrig = LI_DREAD_damage_ends

[Trigger]
nickname = LI_DREAD_damage_ends
Cnd_Timer = 8
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_reactor') }}
Act_RevertCam = no_params
Act_ActTrig = BEAST_REACTOR_friends_spawn_only
Act_ActTrig = LI_DREAD_dead

[Trigger]
nickname = LI_DREAD_dead
Cnd_Timer = 1
{{ script.dialog(330, 340) }}
Act_ActTrig = LI_DREAD_dead_ends

[Trigger]
nickname = LI_DREAD_dead_ends
{{ script.ends(340) }}
Act_ActTrig = BEAST_REACTOR_init
Act_ActTrig = BEAST_REACTOR_friends_go

{{ direct.save('beast_reactor') }}
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_reactor') }}
{{ nag.nag_voice }}
Act_ActTrig = SPHERE_AWAKEN_init
Act_ActTrig = BEAST_REACTOR_friends
Act_ActTrig = BEAST_REACTOR_init



[Trigger]
nickname = BEAST_REACTOR_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'asf', 'the_krieg') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'the_krieg') }}

[Trigger]
nickname = BEAST_COLLECTOR_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_NEUTRAL', 'asf', 'the_krieg') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_NEUTRAL', 'the_krieg') }}

[Trigger]
nickname = BEAST_REACTOR_demo
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_no_dyson_battle
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_reactor') }}
Act_ActTrig = SPHERE_AWAKEN_init
Act_ActTrig = BEAST_REACTOR_friends
Act_ActTrig = BEAST_REACTOR_init

[Trigger]
nickname = BEAST_REACTOR_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_no_dyson_battle
{{ script.dialog(350, 370) }}
Act_ActTrig = BOXX2_break
Act_ActTrig = BEAST_REACTOR_objective
Act_ActTrig = BEAST_REACTOR_setrep
Act_ActTrig = BEAST_REACTOR_all_destroyed
Act_ActTrig = BEAST_REACTOR_talk_enough

[Trigger]
nickname = BEAST_REACTOR_talk_enough
{{ script.ends(370) }}
;;Act_ActTrig = BEAST_REACTOR_debug_destroy
Act_ActTrig = OSIRIS_SHIELD_init

[Trigger]
nickname = BEAST_REACTOR_objective
{{ script.ends(350) }}

{{ krieg_gen1.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen2.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen3.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen4.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen5.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen6.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen1.mark() }}
{{ krieg_gen2.mark() }}
{{ krieg_gen3.mark() }}
{{ krieg_gen4.mark() }}
{{ krieg_gen5.mark() }}
{{ krieg_gen6.mark() }}


[Trigger]
nickname = BEAST_REACTOR_debug_destroy
Cnd_Timer = 5
{{ krieg_gen1.destroy() }}
{{ krieg_gen2.destroy() }}
{{ krieg_gen3.destroy() }}
{{ krieg_gen4.destroy() }}
{{ krieg_gen5.destroy() }}
{{ krieg_gen6.destroy() }}





[ObjList]
nickname = ol_kr_gen1
GotoShip = goto, {{ krieg_gen1.name }}, 500, false

[ObjList]
nickname = ol_kr_gen2
GotoShip = goto, {{ krieg_gen2.name }}, 500, false

[ObjList]
nickname = ol_kr_gen3
GotoShip = goto, {{ krieg_gen3.name }}, 500, false

[ObjList]
nickname = ol_kr_gen4
GotoShip = goto, {{ krieg_gen4.name }}, 500, false

[ObjList]
nickname = ol_kr_gen5
GotoShip = goto, {{ krieg_gen5.name }}, 500, false

[ObjList]
nickname = ol_kr_gen6
GotoShip = goto, {{ krieg_gen6.name }}, 500, false

[ObjList]
nickname = ol_to_osiris_hit
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_hit') }}, 500, false

[ObjList]
nickname = ol_osiris_flee_away
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_flee_away') }}, 500, false

[ObjList]
nickname = ol_reactor_osiris
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_reactor2') }}, 500, false
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_reactor3') }}, 500, false
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_hit') }}, 200, false

[Trigger]
nickname = BEAST_REACTOR_friends
Cnd_True = no_params
{{ direct.spawn_ship('sphere2', 'darcy_reactor', darcy, no_mark=True, ol='ol_kr_gen1') }}
{{ direct.spawn_ship('sphere2', 'alaric_reactor', alaric, no_mark=True, ol='ol_kr_gen2') }}
{{ direct.spawn_ship('sphere2', 'hatcher_reactor', hatcher, no_mark=True, ol='ol_kr_gen3') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman01', wingman.member_obj(1), ol='ol_kr_gen4') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman02', wingman.member_obj(2), ol='ol_kr_gen5') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman03', wingman.member_obj(3), ol='ol_kr_gen6') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman04', wingman.member_obj(4), ol='ol_kr_gen1') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman05', wingman.member_obj(5), ol='ol_kr_gen2') }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_reactor', ol='ol_reactor_osiris') }}
Act_ActTrig = FRIEND_setrep
{{ wingman.invulnerable() }}

[Trigger]
nickname = BEAST_REACTOR_friends_spawn_only
Cnd_True = no_params
{{ direct.spawn_ship('sphere2', 'darcy_reactor', darcy, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'alaric_reactor', alaric, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'hatcher_reactor', hatcher, no_mark=True) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman01', wingman.member_obj(1)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman02', wingman.member_obj(2)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman03', wingman.member_obj(3)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman04', wingman.member_obj(4)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman05', wingman.member_obj(5)) }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_reactor', ol='ol_reactor_osiris') }}
Act_ActTrig = FRIEND_setrep
{{ wingman.invulnerable() }}

[Trigger]
nickname = BEAST_REACTOR_friends_go
Cnd_Timer = 1
Act_GiveObjList = {{ darcy.name }}, ol_kr_gen1
Act_GiveObjList = {{ alaric.name }}, ol_kr_gen2
Act_GiveObjList = {{ hatcher.name }}, ol_kr_gen3
Act_GiveObjList = {{ wingman.member(1) }}, ol_kr_gen4
Act_GiveObjList = {{ wingman.member(2) }}, ol_kr_gen5
Act_GiveObjList = {{ wingman.member(3) }}, ol_kr_gen6
Act_GiveObjList = {{ wingman.member(4) }}, ol_kr_gen1
Act_GiveObjList = {{ wingman.member(5) }}, ol_kr_gen2
Act_GiveObjList = {{ osiris.name }}, ol_reactor_osiris

[Trigger]
nickname = OSIRIS_HIT_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_osiris') }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_hit') }}
Act_ActTrig = OSIRIS_HIT_init

[Trigger]
nickname = OSIRIS_HIT_init
Cnd_True = no_params
Act_GiveObjList = osiris, force_stop
Act_RelocateShip = osiris, {{ direct.pos_orient('sphere2', 'osiris_hit') }}
Act_ActTrig = OSIRIS_HIT_shield_warning

[Trigger]
nickname = OSIRIS_HIT_shield_warning
Cnd_True = no_params
{{ script.dialog(380, 390) }}
Act_ActTrig = OSIRIS_HIT_shield_warning_done

[Trigger]
nickname = OSIRIS_HIT_shield_warning_done
{{ script.ends(390) }}
Act_ActTrig = OSIRIS_HIT_shield_reload_timeout

[Trigger]
nickname = OSIRIS_HIT_shield_reload_timeout
Cnd_Timer = 3
Act_ActTrig = OSIRIS_HIT_cam

[Trigger]
nickname = OSIRIS_HIT_cam
Cnd_Timer = 1
{{ thorn_m13_osiris_hit.call() }}
Act_Pobjidle = no_params
Act_ActTrig = OSIRIS_HIT_fx

[Trigger]
nickname = OSIRIS_HIT_fx
Cnd_Timer = 0.5
{{ osiris.fuse('osiris_beast_hit') }}
Act_ActTrig = OSIRIS_HIT_revert

[Trigger]
nickname = OSIRIS_HIT_revert
Cnd_Timer = 10
Act_RevertCam = no_params
Act_ActTrig = OSIRIS_hit_reaction

[Trigger]
nickname = OSIRIS_hit_reaction
Cnd_Timer = 1
{{ script.dialog(400, 410) }}
Act_ActTrig = OSIRIS_hit_reaction_done

[Trigger]
nickname = OSIRIS_hit_reaction_done
{{ script.ends(410) }}
Act_ActTrig = OSIRIS_SECOND_HIT_timeout

[Trigger]
nickname = OSIRIS_SECOND_HIT_timeout
Cnd_Timer = 120
{{ script.dialog(420, 430) }}
Act_ActTrig = OSIRIS_SECOND_HIT_warning_ends

[Trigger]
nickname = OSIRIS_SECOND_HIT_warning_ends
{{ script.ends(430) }}
Act_ActTrig = OSIRIS_SECOND_HIT_final_timeout

[Trigger]
nickname = OSIRIS_SECOND_HIT_final_timeout
Cnd_timer = 60
Act_ChangeState = FAIL



[Trigger]
nickname = OSIRIS_SHIELD_init
Cnd_True = no_params
Act_ActTrig = OSIRIS_FIRST_timeout
Act_ActTrig = OSIRIS_FIRST_wait_second_reactor

[Trigger]
nickname = OSIRIS_FIRST_timeout
Cnd_Timer = 120
Act_DeactTrig = OSIRIS_FIRST_wait_second_reactor
Act_ActTrig = OSIRIS_HIT_init

[Trigger]
nickname = OSIRIS_FIRST_wait_second_reactor
Cnd_Destroyed = krieg_the_gen, 2, ALL
Act_DeActTrig = OSIRIS_FIRST_timeout
Act_ActTrig = OSIRIS_FIRST_second_reactor_turn_hit

[Trigger]
nickname = OSIRIS_FIRST_second_reactor_turn_hit
Cnd_Timer = 2
Act_ActTrig = OSIRIS_HIT_init


[Trigger]
nickname = OSIRIS_HIT_disable
Cnd_True = no_params
Act_DeActTrig = OSIRIS_SHIELD_init
Act_DeActTrig = OSIRIS_FIRST_timeout
Act_DeActTrig = OSIRIS_FIRST_wait_second_reactor
Act_DeActTrig = OSIRIS_FIRST_second_reactor_turn_hit
Act_DeActTrig = OSIRIS_hit_reaction
Act_DeActTrig = OSIRIS_hit_reaction_done
Act_DeActTrig = OSIRIS_SECOND_HIT_timeout
Act_DeActTrig = OSIRIS_SECOND_HIT_warning_ends
Act_DeActTrig = OSIRIS_SECOND_HIT_final_timeout

[Trigger]
nickname = BEAST_REACTOR_friends_regroup_near_osiris
Cnd_True = no_params
{{ darcy.give_objlist_all('ol_to_osiris_hit') }}
{{ alaric.give_objlist_all('ol_to_osiris_hit') }}
{{ hatcher.give_objlist_all('ol_to_osiris_hit') }}
{{ wingman.give_objlist_all('ol_to_osiris_hit') }}


[Trigger]
nickname = BEAST_REACTOR_all_destroyed
Cnd_Destroyed = krieg_the_gen, -1, ALL
Act_PlayMusic = none, none, none, music_no_ally_danger
Act_ActTrig = BEAST_COLLECTOR_setrep
Act_ActTrig = OSIRIS_HIT_disable
Act_ActTrig = BEAST_REACTOR_friends_regroup_near_osiris
{{ script.line(450) }}
Act_ActTrig = BEAST_REACTOR_success_done

[Trigger]
nickname = BEAST_REACTOR_success_done
{{ script.ends(450) }}
Act_ActTrig = COLLECTOR_init

[Trigger]
nickname = COLLECTOR_init
Cnd_Timer = 2
{{ krieg_opens.hide() }}
{{ krieg_opens_force.hide() }}
Act_ActTrig = COLLECTOR_respawn_beast

[Trigger]
nickname = COLLECTOR_respawn_beast
Cnd_Timer = 0.1
{{ krieg_collector.spawn() }}
{{ thorn_m13_beast_collector.call() }}
Act_ActTrig = COLLECTOR_turn_fx

[Trigger]
nickname = COLLECTOR_turn_fx
Cnd_Timer = 5
{{ krieg_collector.fuse('fuse_beast_collecting') }}
Act_ActTrig = COLLECTOR_turn_fx_reaction

[Trigger]
nickname = COLLECTOR_turn_fx_reaction
Cnd_Timer = 2
{{ script.dialog(460, 470) }}
Act_ActTrig = COLLECTOR_turn_fx_reaction_done

[Trigger]
nickname = COLLECTOR_turn_fx_reaction_done
{{ script.ends(470) }}
Act_RevertCam = no_params
Act_ActTrig = COLLECTOR_init_catacomb

[Trigger]
nickname = COLLECTOR_init_catacomb
Cnd_Timer = 1
{{ script.dialog(480, 490) }}
Act_ActTrig = COLLECTOR_catacomb_obj_message_done

[Trigger]
nickname = COLLECTOR_catacomb_obj_message_done
{{ script.ends(490) }}
{{ script.line(500) }}
Act_ActTrig = CATACOMB_init
Act_ActTrig = OSIRIS_LEAVE_init

[Trigger]
nickname = OSIRIS_LEAVE_init
Cnd_Timer = 6
{{ script.dialog(510, 520) }}
Act_GiveObjList = osiris, ol_osiris_flee_away























[Trigger]
nickname = CATACOMB_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_collector') }}
{{ krieg_collector.spawn() }}
{{ krieg_collector.fuse('fuse_beast_collecting') }}
Act_ActTrig = CATACOMB_init



[Trigger]
nickname = CATACOMB_init
Cnd_True = no_params
{{ nn_goto_catacomb.set() }}


Act_ActTrig = CATACOMB_near_obj
Act_ActTrig = TO_INSIDE_near_enter_door

[Trigger]
nickname = CATACOMB_near_obj
{{ direct.inside_pos('sphere2', 'goto_catacomb', 500) }}
{{ nn_goto_catacomb2.set() }}

[Trigger]
nickname = TO_INSIDE_near_enter_door
Cnd_DistVec = inside, Player, {{ sph02_door02.pos }}, 200
Act_Destroy = {{ sph02_door02.name }}, SILENT
{{ sph02_door02_open.spawn() }}
Act_PlaySoundEffect = lair_door_open
;;;Act_SetNNObj = NN_03_enter_the_lair_wp2
Act_PlayerCanDock = false, sph02_to_inside
Act_ActTrig = TO_INSIDE_near_enter_door_ACTIVATE_AIRLOCK

[Trigger]
nickname = TO_INSIDE_near_enter_door_ACTIVATE_AIRLOCK
Cnd_DistVec = inside, Player, {{ sph02_to_inside.pos }}, 250
Act_DockRequest = {{ sph02_to_inside.name }}
Act_ActTrig = THE_INSIDE_welcome

[Trigger]
nickname = THE_INSIDE_welcome
Cnd_SystemEnter = sphere2_inside
Act_PlayMusic = none, none, none, music_discordant_psychosis
{{ nn_goto_catacomb2.hide() }}
{{ nag.nag_voice }}
{{ nag.nag_off() }}
Act_ActTrig = CATACOMB_INSIDE_door_info

{{ nn_inside01.reach() }}
Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM
{{ nn_inside_column1.destroy() }}

{{ nn_inside02.reach() }}
{{ nn_inside02b.reach() }}
{{ nn_inside03.reach() }}
{{ nn_inside04.reach() }}
{{ nn_inside05.reach() }}

{{ inside_column2.invulnerable(godmode=False) }}
{{ nn_inside_column2.destroy() }}

{{ script.line(540) }}
{{ nn_inside06.reach() }}
{{ nn_inside07.reach() }}
Act_ActTrig = THE_INSIDE_allow_exit


[Trigger]
nickname = CATACOMB_INSIDE_door_info
{{ direct.outside_pos('sphere2_inside', 'enter_outside', 600) }}
Act_PlayMusic = none, none, none, music_discordant_psychosis
{{ script.line(530) }}
{{ inside_column1.spawn() }}
{{ inside_column2.spawn() }}
{{ inside_column2.invulnerable() }}


[Trigger]
nickname = THE_INSIDE_allow_exit
Cnd_True = no_params
Act_PlayerCanDock = false, sph02_ins_airlock_exit
Act_ActTrig = THE_INSIDE_activate_exit_airlock

[Trigger]
nickname = THE_INSIDE_activate_exit_airlock
Cnd_DistVec = inside, Player, {{ sph02_ins_airlock_exit.pos }}, 250
Act_DockRequest = {{ sph02_ins_airlock_exit.name }}
Act_ActTrig = EXIT_INSIDE_welcome

[Trigger]
nickname = EXIT_INSIDE_welcome
Cnd_SystemEnter = sphere2
{{ nag.nag_off() }}
Act_PlayMusic = none, none, none, music_no_ally_danger
;;;Act_SetNNObj = NN_04_go_through_entry_tunnels
Act_ActTrig = EXIT_INSIDE_inside_airlock
;;Act_ActTrig = LIGHTS_OFF_init

[Trigger]
nickname = EXIT_INSIDE_inside_airlock
Cnd_DistVec = inside, Player, {{ inside_to_sph02.pos }}, 500
Act_PlayMusic = none, none, none, music_no_ally_danger
Act_Destroy = {{ sph02_door03.name }}, SILENT
Act_PlaySoundEffect = lair_door_open
{{ nag.nag_voice }}
{{ sph02_door03_open.spawn() }}

Act_ActTrig = SPHERE_LIGHTS_OFF_init
Act_ActTrig = EXIT_INSIDE_close_door_back

{{ nn_exit_catacomb1.reach() }}
{{ nn_exit_catacomb2.set() }}

[Trigger]
nickname = EXIT_INSIDE_close_door_back
Cnd_DistVec = outside, Player, {{ inside_to_sph02.pos }}, 400
Act_Destroy = {{ sph02_door03_open.name }}, SILENT
Act_ActTrig = EXIT_INSIDE_close_door_back_delay
Act_ActTrig = LIGHTS_OFF_init

[Trigger]
nickname = EXIT_INSIDE_close_door_back_delay
Cnd_Timer = 0.001
{{ sph02_door03_close.spawn() }}

[Trigger]
nickname = SPHERE_LIGHTS_OFF_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_no_ally_danger

Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM
{{ krieg_silent.spawn() }}
{{ krieg_silent.invulnerable() }}

{{ power_container.spawn() }}
{{ power_container.invulnerable() }}

Act_Destroy = sph2_core_M01, SILENT
Act_Destroy = sph2_core_M02, SILENT
Act_Destroy = sph2_core_M03, SILENT
Act_Destroy = sph2_core_M04, SILENT
Act_Destroy = sph2_core_M05, SILENT
Act_Destroy = sph2_core_M06, SILENT
Act_Destroy = sph2_core_M07, SILENT
Act_Destroy = sph2_core_M08, SILENT
Act_Destroy = sph2_core_K01, SILENT
Act_Destroy = sph2_core_K02, SILENT
Act_Destroy = sph2_core_K03, SILENT
Act_Destroy = sph2_core_K04, SILENT
Act_Destroy = sph2_core_K05, SILENT
Act_Destroy = sph2_core_K06, SILENT
Act_Destroy = sph2_core_K07, SILENT
Act_Destroy = sph2_core_K08, SILENT

Act_Destroy = sphere2_core_box_X10, SILENT
Act_Destroy = sphere2_core_box_X12, SILENT
Act_Destroy = sphere2_core_box_X14, SILENT
Act_Destroy = sphere2_core_box_X16, SILENT
Act_Destroy = sph2_tower05, SILENT
Act_Destroy = sph2_tower06, SILENT
Act_Destroy = sph2_tower07, SILENT
Act_Destroy = sph2_tower08, SILENT
Act_Destroy = sphere2_core_box_X02, SILENT
Act_Destroy = sphere2_core_box_X04, SILENT
Act_Destroy = sphere2_core_box_X06, SILENT
Act_Destroy = sphere2_core_box_X08, SILENT
Act_Destroy = sph2_tower01, SILENT
Act_Destroy = sph2_tower02, SILENT
Act_Destroy = sph2_tower03, SILENT
Act_Destroy = sph2_tower04, SILENT

{{ direct.spawn_ship('sphere2', 'darcy_reactor', darcy, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'alaric_reactor', alaric, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'hatcher_reactor', hatcher, no_mark=True) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman01', wingman.member_obj(1)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman02', wingman.member_obj(2)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman03', wingman.member_obj(3)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman04', wingman.member_obj(4)) }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman05', wingman.member_obj(5)) }}
Act_ActTrig = FRIEND_setrep
{{ wingman.invulnerable() }}

[Trigger]
nickname = LIGHTS_OFF_init
Cnd_Timer = 1
{{ script.dialog(550, 560) }}
{{ direct.spawn_solar_group('SPHERE_NO_CAP') }}
Act_ActTrig = LIGHTS_OFF_nomad_appear

[Trigger]
nickname = SPHERE_NO_setrep
Cnd_True = no_params
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'enemy') }}
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'asf', 'enemy') }}

{{ sph_no_f01.define_respawn('SPHERE_NO_setrep') }}
{{ sph_no_f02.define_respawn('SPHERE_NO_setrep') }}
{{ sph_no_f03.define_respawn('SPHERE_NO_setrep') }}

[Trigger]
nickname = LIGHTS_OFF_nomad_appear
{{ script.ends(560) }}
Act_PlayMusic = none, none, none, music_no_lair_battle
Act_PlayerEnemyClamp = 2, 4
Act_PlaySoundEffect = cloak_no_battleship
Act_Cloak = no_cap, false
Act_ActTrig = LIGHTS_OFF_nomad_appeared
Act_ActTrig = LIGHTS_OFF_fighters

[Trigger]
nickname = LIGHTS_OFF_fighters
Cnd_True = no_params
{{ sph_no_f01.spawn_all_slide() }}
{{ sph_no_f02.spawn_all_slide() }}
{{ sph_no_f03.spawn_all_slide() }}
{{ sph_no_f01.turn_respawn_on() }}
{{ sph_no_f02.turn_respawn_on() }}
{{ sph_no_f03.turn_respawn_on() }}

[Trigger]
nickname = SPHERE_clean_up
Cnd_True = no_params
{{ sph_no_f01.turn_respawn_off() }}
{{ sph_no_f02.turn_respawn_off() }}
{{ sph_no_f03.turn_respawn_off() }}
{{ sph_no_f01.hide_all() }}
{{ sph_no_f02.hide_all() }}
{{ sph_no_f03.hide_all() }}
{{ direct.hide_solar_group('SPHERE_NO_CAP') }}

[Trigger]
nickname = LIGHTS_OFF_nomad_appeared
Cnd_Timer = 3
{{ script.dialog(570, 610) }}
Act_ActTrig = LIGHTS_OFF_need_to_extract_powercell

[Trigger]
nickname = LIGHTS_OFF_need_to_extract_powercell
{{ script.ends(600) }}
Act_ActTrig = EXTRACT_POWERCELL_init

[Trigger]
nickname = EXTRACT_POWERCELL_init
Cnd_True = no_params
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', power_container.name) }}
{{ power_container.invulnerable(damage_from_player=True) }}
{{ nn_destroy_powercell_container.set() }}
Act_ActTrig = EXTRACT_POWERCELL_container_destroyed

[Trigger]
nickname = EXTRACT_POWERCELL_container_destroyed
Cnd_Destroyed = {{ power_container.name }}
Act_SpawnLoot = sphere_power_cell
Act_MarkObj = sphere_power_cell, 1
Act_Invulnerable = sphere_power_cell, true
{{ nn_get_sphere_powercell.set() }}
Act_ActTrig = EXTRACT_POWERCELL_acquired

[Trigger]
nickname = EXTRACT_POWERCELL_acquired
Cnd_LootAcquired = sphere_power_cell, Player
Act_RemoveCargo = sphere_power_cell
{{ nn_get_sphere_powercell.hide() }}
{{ script.dialog(620, 630) }}
Act_ActTrig = EXTRACT_POWERCELL_we_trapped

[Trigger]
nickname = EXTRACT_POWERCELL_we_trapped
{{ script.ends(630) }}
Act_ActTrig = EXTRACT_POWERCELL_need_help

[Trigger]
nickname = EXTRACT_POWERCELL_need_help
Cnd_Timer = 3
Act_ActTrig = COME_WITH_ME_init


[Trigger]
nickname = COME_WITH_ME_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_wall') }}
Act_ActTrig = COME_WITH_ME_init


[Trigger]
nickname = COME_WITH_ME_init
Cnd_True = no_params
Act_ActTrig = COME_WITH_ME_switch_wall

[Trigger]
nickname = COME_WITH_ME_cam
Cnd_True = no_params
{{ thorn_m13_sphere_help.call() }}
Act_PlayMusic = none, none, none, music_reveal_enemy_position_of_strength
Act_ActTrig = COME_WITH_ME_if_you_wanna_live
Act_ActTrig = COME_WITH_ME_spawn_edison_trent

[Trigger]
nickname = COME_WITH_ME_switch_wall
Cnd_True = no_params
Act_Destroy = sphere2_wall01, SILENT
Act_Destroy = sphere2_wall02, SILENT
Act_Destroy = sphere2_wall03, SILENT
Act_Destroy = sphere2_wall04, SILENT
Act_ActTrig = COME_WITH_ME_switch_wall_next

[Trigger]
nickname = COME_WITH_ME_switch_wall_next
Cnd_Timer = 0.1
{{ direct.spawn_solar_group('SPHERE_WALL') }}
Act_ActTrig = COME_WITH_ME_cam

[Trigger]
nickname = COME_WITH_ME_spawn_edison_trent
Cnd_Timer = 4
{{ direct.spawn_ship('sphere2', 'edison', edison_trent) }}
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = COME_WITH_ME_if_you_wanna_live
Cnd_Timer = 8
{{ direct.hide_solar_group('SPHERE_WALL') }}
{{ thorn_m13_sphere_help2.call() }}
Act_ActTrig = COME_WITH_ME_if_you_wanna_live_talk

[Trigger]
nickname = COME_WITH_ME_if_you_wanna_live_talk
Cnd_Timer = 0.5
{{ script.line(640) }}
Act_ActTrig = COME_WITH_ME_if_you_wanna_live_ends

[Trigger]
nickname = COME_WITH_ME_if_you_wanna_live_ends
{{ script.ends(640) }}
Act_ActTrig = COME_WITH_ME_done

[Trigger]
nickname = COME_WITH_ME_done
Cnd_Timer = 1
Act_RevertCam = no_params
Act_ActTrig = SPHERE_ESCAPE_init

[Trigger]
nickname = SPHERE_ESCAPE_init
Cnd_Timer = 1
{{ script.line(650) }}
Act_ActTrig = SPHERE_ESCAPE_legend
Act_GiveObjList = Player, ol_trent_wing_follow

{{ nn_escape1.reach() }}
Act_PlayMusic = none, none, none, music_anticipation_motivated
Act_GiveObjList = Player, ol_trent_wing_follow_and_trent
Act_ActTrig = SPHERE_ESCAPE_new_plan
{{ osiris_escape.spawn() }}

{{ nn_escape2.reach() }}
Act_ActTrig = SPHERE_clean_up
{{ nn_dock_osiris_escape.set() }}
Act_ActTrig = SPHERE_ESCAPE_osiris_near
Act_ActTrig = SPHERE_ESCAPE_osiris_near_close

[Trigger]
nickname = SPHERE_ESCAPE_legend
{{ script.ends(650) }}
Act_ActTrig = SPHERE_ESCAPE_legend_timeout

[Trigger]
nickname = SPHERE_ESCAPE_legend_timeout
Cnd_Timer = 5
{{ script.dialog(660, 670) }}

[Trigger]
nickname = SPHERE_ESCAPE_new_plan
Cnd_Timer = 2
{{ script.dialog(680, 780) }}

[Trigger]
nickname = SPHERE_FRIEND_clean_up
Cnd_True = no_params
{{ darcy.hide_all() }}
{{ alaric.hide_all() }}
{{ hatcher.hide_all() }}
{{ wingman.hide_all() }}
{{ edison_trent.hide_all() }}

[Trigger]
nickname = SPHERE_ESCAPE_osiris_near
{{ direct.inside_pos('sphere2', 'osiris_escape', 1000) }}
{{ darcy.give_objlist_all('unform') }}
{{ alaric.give_objlist_all('unform') }}
{{ hatcher.give_objlist_all('unform') }}
{{ wingman.give_objlist_all('unform') }}
{{ edison_trent.give_objlist_all('unform') }}

[Trigger]
nickname = SPHERE_ESCAPE_osiris_near_close
{{ direct.inside_pos('sphere2', 'osiris_escape_baydoor', 55) }}
Act_ActTrig = SPHERE_FRIEND_clean_up





[Trigger]
nickname = OMEGA13_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'start_player') }}
;;Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'kernel_end_player') }}

Act_ActTrig = START_KERNELS_init

{{ active_kernel.define() }}

[Trigger]
nickname = START_KERNELS_init
Cnd_True = no_params
{{ nag.nag_voice }}

{{ direct.spawn_ship('om13_alt', 'start_edison', edison_trent, ol='follow_player') }}
Act_ActTrig = FRIEND_setrep
{{ script.dialog(1000, 1020) }}


;;Act_PlayMusic = none, none, none, music_reveal_challenging
Act_PlayMusic = none, none, none, music_no_dyson_battle
{{ direct.spawn_solar_group('KERNELS1') }}
{{ om13alt_beast_kernel1_01.spawn() }}
{{ active_kernel.turn() }}
{{ om13alt_ast_b_dmg1.spawn() }}
{{ om13alt_ast_b_dmg2.spawn() }}
Act_ActTrig = START_KERNELS_leave
Act_ActTrig = START_KERNELS_danger_space
{{ nn_kernels1.set() }}

Act_ActTrig = START_KERNELS_timeout
Act_ActTrig = START_KERNELS_briefieng_ends

[Trigger]
nickname = START_KERNELS_briefieng_ends
{{ script.ends(1020) }}
Act_ActTrig = START_KERNELS_about_catapult

[Trigger]
nickname = START_KERNELS_about_catapult
Cnd_Timer = 10
{{ script.dialog(1050, 1070) }}

[Trigger]
nickname = START_KERNELS_timeout
Cnd_Timer = 240
{{ script.line(1100) }}
Act_ActTrig = START_KERNELS_timeout_fail

[Trigger]
nickname = START_KERNELS_timeout_fail
Cnd_Timer = 120
Act_ChangeState = FAIL

[Trigger]
nickname = START_KERNELS_danger_space
{{ direct.inside_pos('om13_alt', 'zone_kernels1', 13500) }}
{{ nn_kernels1_exit.set() }}
{{ script.dialog(1030, 1040) }}
Act_ActTrig = START_KERNELS_near_big_ast

[Trigger]
nickname = START_KERNELS_near_big_ast
{{ direct.inside_pos('om13_alt', 'zone_ast_b01a', 3000) }}
{{ om13alt_ast_b_dmg2.mark() }}
{{ nn_kernels1_door1.set() }}
{{ script.line(1120) }}

{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_b_dmg2.name) }}
Act_ActTrig = START_KERNELS_ast_door1_destroyed

[Trigger]
nickname = START_KERNELS_ast_door1_destroyed
Cnd_Destroyed = {{ om13alt_ast_b_dmg2.name }}
{{ script.line(1130) }}
{{ nn_kernels1_inside.set() }}
{{ nn_kernels1_inside.reach() }}
{{ edison_trent.hide_all() }}
Act_DeActTrig = START_KERNELS_timeout
Act_DeActTrig = START_KERNELS_timeout_fail
{{ nn_kernels1_inside2.set() }}
{{ nn_kernels1_inside2.reach() }}
{{ nn_kernels1_tunnel.set() }}
{{ nn_kernels1_tunnel.reach() }}
{{ script.line(1140) }}
{{ om13alt_ast_b_dmg1.mark() }}
{{ nn_kernels1_door2.set() }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_b_dmg1.name) }}
Act_ActTrig = START_KERNELS_ast_door2_destroyed

[Trigger]
nickname = START_KERNELS_ast_door2_destroyed
Cnd_Destroyed = {{ om13alt_ast_b_dmg1.name }}
{{ nn_kernels1_after.set() }}
{{ script.line(1145) }}

[Trigger]
nickname = START_KERNELS_leave
{{ direct.inside_pos('om13_alt', 'zone_ast_b01', 1100) }}
{{ om13alt_beast_kernel1_01.hide() }}
{{ active_kernel.deactivate() }}
{{ direct.hide_solar_group('KERNELS1') }}
Act_ActTrig = BEAST_KERNEL_ONE_init

[Trigger]
nickname = OUTER_KERNEL_setrep
Cnd_True = no_params
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'friend', 'nomad') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'nomad') }}

[Trigger]
nickname = CHAMBER_setrep
Cnd_True = no_params
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'friend', 'nomad') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'nomad') }}


[Trigger]
nickname = BEAST_KERNEL_ONE_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'beast_kernel1_player') }}
Act_ActTrig = BEAST_KERNEL_ONE_init
;;Act_ActTrig = BEAST_KERNEL_ONE_move_player_inside



[Trigger]
nickname = BEAST_KERNEL_ONE_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_upcoming_action_heavy
Act_ActTrig = BEAST_KERNEL_ONE_near

[Trigger]
nickname = BEAST_KERNEL_ONE_near
{{ direct.inside_pos('om13_alt', 'om13alt_beast_kernel1_01', 400) }}
Act_PObjIdle = no_params
Act_LightFuse = om13alt_beast_kernel1_01, fuse_active_beast_kernel
{{ script.line(1150) }}
{{ inside_kernel01.spawn() }}
{{ nn_kernels1_after.hide() }}
;; some fx
Act_ActTrig = BEAST_KERNEL_ONE_move_player_inside

[Trigger]
nickname = BEAST_KERNEL_ONE_move_player_inside
Cnd_Timer = 1
Act_ActTrig = BEAST_KERNEL_ONE_inside
{{ direct.save('chamber01') }}
{{ inside_kernel01.spawn() }}
{{ nag.nag_voice }}
Act_ActTrig = BEAST_KERNEL_ONE_inside

[Trigger]
nickname = BEAST_KERNEL_ONE_inside
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'chamber1_player') }}
{{ direct.spawn_ship('om13_alt', 'chamber1_edison', edison_trent, ol='ol_no_avoid') }}
Act_ActTrig = FRIEND_setrep
{{ om13alt_beast_kernel1_01.hide() }}
Act_PlayMusic = none, none, none, music_kr_battle
Act_ActTrig = BEAST_KERNEL_ONE_nomads1
Act_ActTrig = BEAST_KERNEL_ONE_nomads2
Act_ActTrig = BEAST_KERNEL_ONE_nomads3
Act_ActTrig = BEAST_KERNEL_ONE_nomads4
Act_ActTrig = BEAST_KERNEL_ONE_nomads5
Act_ActTrig = BEAST_KERNEL_ONE_nomads6
Act_ActTrig = BEAST_KERNEL_ONE_destroyed
{{ script.dialog(1160, 1180) }}
Act_ActTrig = BEAST_KERNEL_ONE_obj

[Trigger]
nickname = BEAST_KERNEL_ONE_obj
{{ script.ends(1170) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', inside_kernel01.name) }}
{{ inside_kernel01.mark() }}
{{ nn_destroy_inside_kernel01.set() }}

[ObjList]
nickname = ol_chamber1
avoidance = false
StayInRange = {{ direct.pos('om13_alt', 'om13_beast_chamber01') }}, 500

[Trigger]
nickname = BEAST_KERNEL_ONE_nomads1
Cnd_Timer = 1
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf1', chamber1_no_fighter.member_obj(1), ol='ol_chamber1') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf2', chamber1_no_fighter.member_obj(2), ol='ol_chamber1') }}
Act_Invulnerable = {{ chamber1_no_fighter.member(1) }}, true, true
Act_Invulnerable = {{ chamber1_no_fighter.member(2) }}, true, true
Act_ActTrig = CHAMBER_setrep

[Trigger]
Cnd_Timer = 3
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf3', chamber1_no_fighter.member_obj(3), ol='ol_chamber1') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf4', chamber1_no_fighter.member_obj(4), ol='ol_chamber1') }}
Act_Invulnerable = {{ chamber1_no_fighter.member(3) }}, true, true
Act_Invulnerable = {{ chamber1_no_fighter.member(4) }}, true, true
Act_ActTrig = CHAMBER_setrep

[Trigger]
nickname = BEAST_KERNEL_ONE_nomads3
Cnd_Timer = 10
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf9', chamber1_no_fighter.member_obj(9), ol='ol_chamber1') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf10', chamber1_no_fighter.member_obj(10), ol='ol_chamber1') }}
Act_Invulnerable = {{ chamber1_no_fighter.member(9) }}, true, true
Act_Invulnerable = {{ chamber1_no_fighter.member(10) }}, true, true
Act_ActTrig = CHAMBER_setrep

[Trigger]
nickname = BEAST_KERNEL_ONE_nomads4
Cnd_Timer = 20
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf11', chamber1_no_fighter.member_obj(11), ol='ol_chamber1') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf12', chamber1_no_fighter.member_obj(12), ol='ol_chamber1') }}
Act_Invulnerable = {{ chamber1_no_fighter.member(11) }}, true, true
Act_Invulnerable = {{ chamber1_no_fighter.member(12) }}, true, true
Act_ActTrig = CHAMBER_setrep

[Trigger]
nickname = BEAST_KERNEL_ONE_nomads5
Cnd_Timer = 30
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf5', chamber1_no_fighter.member_obj(5), ol='ol_chamber1') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf6', chamber1_no_fighter.member_obj(6), ol='ol_chamber1') }}
Act_Invulnerable = {{ chamber1_no_fighter.member(5) }}, true, true
Act_Invulnerable = {{ chamber1_no_fighter.member(6) }}, true, true
Act_ActTrig = CHAMBER_setrep

[Trigger]
nickname = BEAST_KERNEL_ONE_nomads6
Cnd_Timer = 40
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf7', chamber1_no_fighter.member_obj(7), ol='ol_chamber1') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber1_nf8', chamber1_no_fighter.member_obj(8), ol='ol_chamber1') }}
Act_Invulnerable = {{ chamber1_no_fighter.member(7) }}, true, true
Act_Invulnerable = {{ chamber1_no_fighter.member(8) }}, true, true
Act_ActTrig = CHAMBER_setrep

[Trigger]
nickname = BEAST_KERNEL_ONE_clean_up
Cnd_True = no_params
{{ chamber1_no_fighter.hide_all() }}

[Trigger]
nickname = BEAST_KERNEL_ONE_destroyed
Cnd_Destroyed = {{ inside_kernel01.name }}
Act_ActTrig = BEAST_KERNEL_ONE_destroyed_timeout
Act_DeActTrig = BEAST_KERNEL_ONE_nomads1
Act_DeActTrig = BEAST_KERNEL_ONE_nomads2
Act_DeActTrig = BEAST_KERNEL_ONE_nomads3
Act_DeActTrig = BEAST_KERNEL_ONE_nomads4
Act_DeActTrig = BEAST_KERNEL_ONE_nomads5
Act_DeActTrig = BEAST_KERNEL_ONE_nomads6

[Trigger]
nickname = BEAST_KERNEL_ONE_destroyed_timeout
Cnd_Timer = 2
Act_LightFuse = om13_beast_chamber01, fuse_explode_beast_chamber
Act_ActTrig = BEAST_KERNEL_ONE_exit_player

[Trigger]
nickname = BEAST_KERNEL_ONE_exit_player
Cnd_Timer = 1
Act_ActTrig = BEAST_KERNEL_ONE_clean_up
{{ edison_trent.hide_all() }}
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'after_chamber1_player') }}
Act_Destroy = om13_beast_chamber01, SILENT
{{ nag.nag_off() }}
Act_PlayMusic = none, none, none, music_upcoming_action_light
{{ nn_destroy_inside_kernel01.hide() }}
Act_ActTRig = MIDDLE_KERNELS_init




[Trigger]
nickname = MIDDLE_KERNELS_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'after_chamber1_player') }}
Act_ActTrig = MIDDLE_KERNELS_init
;;Act_ActTrig = BEAST_KERNEL_ONE_move_player_inside

[Trigger]
nickname = MIDDLE_KERNELS_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_upcoming_action_light
;;Act_ActTrig = BEAST_KERNEL_ONE_near
Act_ActTrig = MIDDLE_KERNELS_roadback_block
Act_ActTrig = MIDDLE_KERNELS_arrive
Act_ActTrig = MIDDLE_KERNELS_nav
{{ direct.spawn_ship('om13_alt', 'after_chamber1_edison', edison_trent, no_mark=True) }}
Act_ActTrig = FRIEND_setrep




[Trigger]
nickname = MIDDLE_KERNELS_roadback_block
{{ direct.inside_pos('om13_alt', 'zone_ast_b01a', 1200) }}
Act_ChangeState = FAIL

[Trigger]
nickname = MIDDLE_KERNELS_arrive
Cnd_Timer = 2
{{ script.dialog(1200, 1250) }}

[Trigger]
nickname = MIDDLE_KERNELS_nav
Cnd_True = no_params
{{ nn_kernel2_ast1_in.reach() }}
{{ edison_trent.hide_all() }}
{{ om13alt_ast_a_dmg01.spawn() }}
{{ om13alt_ast_a_dmg02.spawn() }}
{{ om13alt_ast_a_dmg01.invulnerable() }}
{{ om13alt_ast_a_dmg02.invulnerable() }}

{{ nn_kernel2_ast1_wall1.reach() }}
{{ script.line(1260) }}
{{ om13alt_ast_a_dmg01.mark() }}
{{ nn_om13alt_ast_a_dmg01.set() }}
{{ om13alt_ast_a_dmg01.invulnerable(godmode=False) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_a_dmg01.name) }}
{{ om13alt_ast_a_dmg01.destroyed() }}

{{ nn_kernel2_ast1_mid1.reach() }}
{{ nn_kernel2_ast1_wall2.reach() }}
{{ script.line(1270) }}
{{ om13alt_ast_a_dmg02.mark() }}
{{ nn_om13alt_ast_a_dmg02.set() }}
{{ om13alt_ast_a_dmg02.invulnerable(godmode=False) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_a_dmg02.name) }}
{{ om13alt_ast_a_dmg02.destroyed() }}

{{ nn_kernel2_ast1_end.reach() }}
{{ script.line(1280) }}

{{ nn_kernel2_ast2_in.reach() }}
{{ nn_kernel2_ast2_mid1.reach() }}
{{ nn_kernel2_ast2_end.reach() }}

{{ nn_kernel2_ast3_in.reach() }}
{{ nn_kernel2_ast3_mid1.reach() }}
{{ nn_kernel2_ast3_exit.reach() }}

{{ nn_kernel2_ast4_in.reach() }}
{{ om13alt_ast_a_inside_kernel01.spawn() }}
{{ om13alt_ast_a_dmg03.spawn() }}
{{ om13alt_ast_a_dmg04.spawn() }}
{{ om13alt_ast_a_dmg03.invulnerable() }}
{{ om13alt_ast_a_dmg04.invulnerable() }}
{{ nn_kernel2_ast4_split.reach() }}


{{ script.line(1290) }}
{{ om13alt_ast_a_dmg04.mark() }}
{{ nn_om13alt_ast_a_dmg04.set() }}
{{ om13alt_ast_a_dmg04.invulnerable(godmode=False) }}
{{ om13alt_ast_a_dmg03.invulnerable(godmode=False) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_a_dmg03.name) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_a_dmg04.name) }}

Act_ActTrig = KERNELS2_MID_AST1_destroyed_first
Act_ActTrig = KERNELS2_MID_AST2_destroyed_first
Act_ActTrig = KERNELS2_MID_near_kernel

[Trigger]
nickname = KERNELS2_MID_near_kernel
{{ direct.inside_pos('om13_alt', 'om13alt_ast_a_inside_kernel01', 300) }}
Act_ChangeState = FAIL

[Trigger]
nickname = KERNELS2_MID_AST1_destroyed_first
Cnd_Destroyed = {{ om13alt_ast_a_dmg04.name }}
{{ om13alt_ast_a_dmg03.invulnerable() }}
Act_DeActTrig = KERNELS2_MID_AST2_destroyed_first
{{ script.dialog(1320, 1330) }}
Act_PlayMusic = none, none, none, music_danger
Act_ActTrig = KERNELS2_MID_AST1_destroy_AST2

[Trigger]
nickname = KERNELS2_MID_AST1_destroy_AST2
{{ script.ends(1320) }}
{{ om13alt_ast_a_dmg03.invulnerable(godmode=False) }}
{{ om13alt_ast_a_dmg03.mark() }}
{{ nn_om13alt_ast_a_dmg03.set() }}
Act_ActTrig = KERNELS2_MID_AST2_destroyed_after

[Trigger]
nickname = KERNELS2_MID_AST2_destroyed_after
Cnd_Destroyed = {{ om13alt_ast_a_dmg03.name }}
Act_DeActTrig = KERNELS2_MID_AST1_destroyed_first
Act_ActTrig = KERNELS2_MID_ROAD_CONTINUE
Act_ActTrig = KERNELS2_MID_AST2_destroyed_after_sector_clear

[Trigger]
nickname = KERNELS2_MID_AST2_destroyed_after_sector_clear
{{ direct.inside_pos('om13_alt', 'kernel2_ast4_mid1', 600) }}
{{ script.line(1340) }}

[Trigger]
nickname = KERNELS2_MID_AST2_destroyed_first
Cnd_Destroyed = {{ om13alt_ast_a_dmg03.name }}
Act_DeActTrig = KERNELS2_MID_AST1_destroyed_first
{{ om13alt_ast_a_dmg04.unmark() }}
{{ script.dialog(1300, 1310) }}
Act_ActTrig = KERNELS2_MID_AST1_destroyed_after
Act_ActTrig = KERNELS2_MID_ROAD_CONTINUE

[Trigger]
nickname = KERNELS2_MID_AST1_destroyed_after
Cnd_Destroyed = {{ om13alt_ast_a_dmg04.name }}
{{ script.line(1320) }}
Act_PlayMusic = none, none, none, music_danger



[Trigger]
nickname = KERNELS2_MID_ROAD_CONTINUE
Cnd_True = no_params
{{ nn_kernel2_ast4_mid1.reach() }}
Act_DeActTrig = KERNELS2_MID_AST1_destroyed_after
Act_PlayMusic = none, none, none, music_upcoming_action_light
{{ nn_kernel2_ast4_exit.reach() }}
{{ om13alt_ast_a_lrg01.spawn() }}
{{ om13alt_ast_a_inside_kernel02.spawn() }}
{{ om13alt_ast_a_dmg05.spawn() }}
{{ om13alt_ast_a_dmg06.spawn() }}
{{ om13alt_ast_a_dmg05.invulnerable() }}
{{ om13alt_ast_a_dmg06.invulnerable() }}
{{ om13alt_ast_a_dmg03.hide() }}
{{ om13alt_ast_a_dmg04.hide() }}

{{ nn_kernel2_ast5_in.reach() }}
{{ nn_kernel2_ast5_wall1.reach() }}

{{ script.line(1350) }}
{{ om13alt_ast_a_dmg05.mark() }}
{{ nn_om13alt_ast_a_dmg05.set() }}
{{ om13alt_ast_a_dmg05.invulnerable(godmode=False) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_a_dmg05.name) }}
{{ om13alt_ast_a_dmg05.destroyed() }}
{{ nn_kernel2_ast5_core.reach() }}
Act_ActTrig = MIDDLE_KERNELS_warning
{{ nn_kernel2_ast5_wall2.reach() }}
{#{{ nn_kernel2_ast5_exit.reach() }}#}

[Trigger]
nickname = MIDDLE_KERNELS_warning
Cnd_True = no_params
{{ script.line(1360) }}
Act_PlayMusic = none, none, none, music_danger
Act_ActTrig = MIDDLE_KERNELS_warning_out

[Trigger]
nickname = MIDDLE_KERNELS_warning_out
{{ script.ends(1360) }}

Act_ActTrig = MIDDLE_KERNELS_destroy_danger_ast



[Trigger]
nickname = MIDDLE_KERNELS_before_beast_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'destro_ast_test') }}

{{ om13alt_ast_a_lrg01.spawn() }}
{{ om13alt_ast_a_inside_kernel02.spawn() }}
{{ om13alt_ast_a_dmg05.spawn() }}
{{ om13alt_ast_a_dmg06.spawn() }}
Act_ActTrig = MIDDLE_KERNELS_destroy_danger_ast

[Trigger]
nickname = MIDDLE_KERNELS_destroy_danger_ast
Cnd_Timer = 1
Act_Destroy = {{ om13alt_ast_a_lrg01.name }}
Act_ActTrig = MIDDLE_KERNELS_init_super_kernel
{{ script.line(1370) }}

[Trigger]
nickname = MIDDLE_KERNELS_init_super_kernel
Cnd_Timer = 2
Act_LightFuse = {{ om13alt_ast_a_inside_kernel02.name }}, fuse_active_beast_kernel_dmg
{{ inside_kernel02.spawn() }}
{{ nn_kernel2_ast5_wall2.hide() }}
;; some fx
Act_ActTrig = MIDDLE_KERNELS_wait_super_active

[Trigger]
nickname = MIDDLE_KERNELS_wait_super_active
Cnd_Timer = 2
Act_LightFuse = {{ om13alt_ast_a_inside_kernel02.name }}, fuse_active_beast_kernel_blast
Act_ActTrig = BEAST_KERNEL_TWO_move_player_inside

[Trigger]
nickname = BEAST_KERNEL_TWO_move_player_inside
Cnd_Timer = 1
{{ om13alt_ast_a_dmg06.hide() }}
Act_ActTrig = BEAST_KERNEL_TWO_inside
{{ direct.save('chamber02') }}
{{ inside_kernel02.spawn() }}
{{ nag.nag_voice }}
Act_ActTrig = BEAST_KERNEL_TWO_inside

[Trigger]
nickname = BEAST_KERNEL_TWO_inside
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'chamber2_player') }}
{{ direct.spawn_ship('om13_alt', 'chamber2_edison', edison_trent, ol='ol_chamber2_near') }}
Act_ActTrig = FRIEND_setrep
{{ om13alt_ast_a_inside_kernel02.hide() }}
{{ inside_kernel02.invulnerable() }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', inside_kernel02.name) }}
Act_PlayMusic = none, none, none, music_kr_battle
Act_ActTrig = BEAST_KERNEL_TWO_nomads1
Act_ActTrig = BEAST_KERNEL_TWO_nomads2
Act_ActTrig = BEAST_KERNEL_TWO_nomads3
Act_ActTrig = BEAST_KERNEL_TWO_nomads4
Act_ActTrig = BEAST_KERNEL_TWO_nomads5
Act_ActTrig = BEAST_KERNEL_TWO_nomads6
{{ script.dialog(1380, 1510) }}
Act_ActTrig = BEAST_KERNEL_TWO_kill_fighters
Act_PlayerEnemyClamp = 4, 6

{{ chamber2_no_fighter.define_member_respawn(1, 'CHAMBER_setrep', 'chamber2_nf1', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(2, 'CHAMBER_setrep', 'chamber2_nf2', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(3, 'CHAMBER_setrep', 'chamber2_nf3', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(4, 'CHAMBER_setrep', 'chamber2_nf4', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(5, 'CHAMBER_setrep', 'chamber2_nf5', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(6, 'CHAMBER_setrep', 'chamber2_nf6', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(7, 'CHAMBER_setrep', 'chamber2_nf7', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(8, 'CHAMBER_setrep', 'chamber2_nf8', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(9, 'CHAMBER_setrep', 'chamber2_nf9', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(10, 'CHAMBER_setrep', 'chamber2_nf10', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(11, 'CHAMBER_setrep', 'chamber2_nf11', return_back=True) }}
{{ chamber2_no_fighter.define_member_respawn(12, 'CHAMBER_setrep', 'chamber2_nf12', return_back=True) }}

[ObjList]
nickname = ol_chamber2
avoidance = false
StayInRange = {{ direct.pos('om13_alt', 'om13_beast_chamber02') }}, 500

[ObjList]
nickname = ol_chamber2_near
avoidance = false
StayInRange = {{ direct.pos('om13_alt', 'om13_beast_chamber02') }}, 400

[ObjList]
nickname = ol_chamber2_core
SetPriority = ALWAYS_EXECUTE
avoidance = false
GotoVec = goto_no_cruise, {{ direct.pos('om13_alt', 'om13_beast_chamber02') }}, 450, false
StayInRange = {{ direct.pos('om13_alt', 'om13_beast_chamber02') }}, 500

{{ chamber2_no_fighter.define_return_back_all('om13_alt', 'om13_beast_chamber02', 700, 650, 'ol_chamber2_core') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_nomads1
Cnd_Timer = 1
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf1', chamber2_no_fighter.member_obj(1), ol='ol_chamber2') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf2', chamber2_no_fighter.member_obj(2), ol='ol_chamber2') }}
Act_Invulnerable = {{ chamber2_no_fighter.member(1) }}, true, true
Act_Invulnerable = {{ chamber2_no_fighter.member(2) }}, true, true
Act_ActTrig = CHAMBER_setrep
{{ chamber2_no_fighter.turn_member_respawn_on(1) }}
{{ chamber2_no_fighter.turn_member_respawn_on(2) }}
{{ direct.activate_ship_return_back('chamber2_no_fighter1') }}
{{ direct.activate_ship_return_back('chamber2_no_fighter2') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_nomads2
Cnd_Timer = 3
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf3', chamber2_no_fighter.member_obj(3), ol='ol_chamber2') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf4', chamber2_no_fighter.member_obj(4), ol='ol_chamber2') }}
Act_Invulnerable = {{ chamber2_no_fighter.member(3) }}, true, true
Act_Invulnerable = {{ chamber2_no_fighter.member(4) }}, true, true
Act_ActTrig = CHAMBER_setrep
{{ chamber2_no_fighter.turn_member_respawn_on(3) }}
{{ chamber2_no_fighter.turn_member_respawn_on(4) }}
{{ direct.activate_ship_return_back('chamber2_no_fighter3') }}
{{ direct.activate_ship_return_back('chamber2_no_fighter4') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_nomads3
Cnd_Timer = 10
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf9', chamber2_no_fighter.member_obj(9), ol='ol_chamber2') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf10', chamber2_no_fighter.member_obj(10), ol='ol_chamber2') }}
Act_Invulnerable = {{ chamber2_no_fighter.member(9) }}, true, true
Act_Invulnerable = {{ chamber2_no_fighter.member(10) }}, true, true
Act_ActTrig = CHAMBER_setrep
{{ chamber2_no_fighter.turn_member_respawn_on(9) }}
{{ chamber2_no_fighter.turn_member_respawn_on(10) }}
{{ direct.activate_ship_return_back('chamber2_no_fighter9') }}
{{ direct.activate_ship_return_back('chamber2_no_fighter10') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_nomads4
Cnd_Timer = 15
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf11', chamber2_no_fighter.member_obj(11), ol='ol_chamber2') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf12', chamber2_no_fighter.member_obj(12), ol='ol_chamber2') }}
Act_Invulnerable = {{ chamber2_no_fighter.member(11) }}, true, true
Act_Invulnerable = {{ chamber2_no_fighter.member(12) }}, true, true
Act_ActTrig = CHAMBER_setrep
{{ chamber2_no_fighter.turn_member_respawn_on(11) }}
{{ chamber2_no_fighter.turn_member_respawn_on(12) }}
{{ direct.activate_ship_return_back('chamber2_no_fighter11') }}
{{ direct.activate_ship_return_back('chamber2_no_fighter12') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_nomads5
Cnd_Timer = 20
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf5', chamber2_no_fighter.member_obj(5), ol='ol_chamber2') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf6', chamber2_no_fighter.member_obj(6), ol='ol_chamber2') }}
Act_Invulnerable = {{ chamber2_no_fighter.member(5) }}, true, true
Act_Invulnerable = {{ chamber2_no_fighter.member(6) }}, true, true
Act_ActTrig = CHAMBER_setrep
{{ chamber2_no_fighter.turn_member_respawn_on(5) }}
{{ chamber2_no_fighter.turn_member_respawn_on(6) }}
{{ direct.activate_ship_return_back('chamber2_no_fighter5') }}
{{ direct.activate_ship_return_back('chamber2_no_fighter6') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_nomads6
Cnd_Timer = 30
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf7', chamber2_no_fighter.member_obj(7), ol='ol_chamber2') }}
{{ direct.spawn_ship_member('om13_alt', 'chamber2_nf8', chamber2_no_fighter.member_obj(8), ol='ol_chamber2') }}
Act_Invulnerable = {{ chamber2_no_fighter.member(7) }}, true, true
Act_Invulnerable = {{ chamber2_no_fighter.member(8) }}, true, true
Act_ActTrig = CHAMBER_setrep
{{ chamber2_no_fighter.turn_member_respawn_on(7) }}
{{ chamber2_no_fighter.turn_member_respawn_on(8) }}
{{ direct.activate_ship_return_back('chamber2_no_fighter7') }}
{{ direct.activate_ship_return_back('chamber2_no_fighter8') }}

[Trigger]
nickname = BEAST_KERNEL_TWO_clean_up
Cnd_True = no_params
{{ chamber2_no_fighter.stop_return_back_all() }}
{{ chamber2_no_fighter.turn_member_respawn_off() }}
{{ chamber2_no_fighter.hide_all() }}

[Trigger]
nickname = BEAST_KERNEL_TWO_kill_fighters
Cnd_True = no_params
{{ nn_destroy_chamber_elite.set() }}
Act_ActTrig = BEAST_KERNEL_TWO_fighters_destroyed

[Trigger]
nickname = BEAST_KERNEL_TWO_fighters_destroyed
Cnd_Destroyed = chamber_elite, 4, ALL
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', inside_kernel02.name) }}
{{ script.line(1520) }}
{{ inside_kernel02.mark() }}
{{ inside_kernel02.invulnerable(godmode=True, damage_from_player=True) }}
{{ nn_destroy_inside_kernel02.set() }}
Act_ActTrig = BEAST_KERNEL_TWO_destroyed

[Trigger]
nickname = BEAST_KERNEL_TWO_destroyed
Cnd_Destroyed = {{ inside_kernel02.name }}
Act_ActTrig = BEAST_KERNEL_TWO_destroyed_timeout
Act_DeActTrig = BEAST_KERNEL_TWO_nomads1
Act_DeActTrig = BEAST_KERNEL_TWO_nomads2
Act_DeActTrig = BEAST_KERNEL_TWO_nomads3
Act_DeActTrig = BEAST_KERNEL_TWO_nomads4
Act_DeActTrig = BEAST_KERNEL_TWO_nomads5
Act_DeActTrig = BEAST_KERNEL_TWO_nomads6

[Trigger]
nickname = BEAST_KERNEL_TWO_destroyed_timeout
Cnd_Timer = 2
Act_LightFuse = om13_beast_chamber02, fuse_explode_beast_chamber
Act_ActTrig = BEAST_KERNEL_TWO_exit_player

[Trigger]
nickname = BEAST_KERNEL_TWO_exit_player
Cnd_Timer = 1
Act_ActTrig = BEAST_KERNEL_TWO_clean_up
Act_PObjIdle = no_params
Act_ActTrig = BEAST_KERNEL_TWO_exit_player_definetly

[Trigger]
nickname = BEAST_KERNEL_TWO_exit_player_definetly
Cnd_Timer = 0.25
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'after_chamber2_player_init') }}
Act_LightFuse = edison_trent, fuse_edison_trent_engine
Act_Destroy = om13_beast_chamber02, SILENT
{{ nag.nag_off() }}
Act_PlayMusic = none, none, none, music_anticipation_more_forboding

Act_ActTrig = ENGINE_DEATH_kernel_done
{{ om13alt_ast_a_dmg06.spawn() }}
{{ om13alt_ast_a_dmg06.invulnerable() }}

Act_ActTrig = BEAST_KERNEL_TWO_exit_dialog

[Trigger]
nickname = BEAST_KERNEL_TWO_exit_dialog
Cnd_Timer = 0.25
{{ script.dialog(1530, 1550) }}
Act_ActTrig = BEAST_KERNEL_TWO_first_cam

[Trigger]
nickname = BEAST_KERNEL_TWO_first_cam
{{ script.ends(1530) }}
Act_RelocateShip = {{ edison_trent.name }}, {{ direct.pos_orient('om13_alt', 'after_chamber2_edison') }}
{{ thorn_m13_engine_cam2.call() }}
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'after_chamber2_player') }}
Act_ActTrig = BEAST_KERNEL_TWO_stop_again

[Trigger]
nickname = BEAST_KERNEL_TWO_stop_again
Cnd_Timer = 0.1
Act_PObjIdle = no_params


[Trigger]
nickname = ENGINE_DEATH_kernel_done
{{ script.ends(1550) }}
Act_PObjIdle = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'after_chamber2_player') }}
{{ thorn_m13_engine_cam3.call() }}
{{ script.dialog(1560, 1570) }}
Act_ActTRig = ENGINE_DEATH_cam4

[Trigger]
nickname = ENGINE_DEATH_cam4
{{ script.ends(1570) }}
{{ thorn_m13_engine_cam4.call() }}
{{ script.dialog(1580, 1600) }}
Act_ActTRig = ENGINE_DEATH_cam2_two

[Trigger]
nickname = ENGINE_DEATH_cam2_two
{{ script.ends(1590) }}
{{ thorn_m13_engine_cam2.call() }}
{{ script.line(1610) }}
Act_ActTRig = ENGINE_DEATH_cam5

[Trigger]
nickname = ENGINE_DEATH_cam5
{{ script.ends(1610) }}
{{ thorn_m13_engine_cam5.call() }}
{{ script.line(1620) }}
Act_ActTrig = ENGINE_DEATH_talk_ends

[Trigger]
nickname = ENGINE_DEATH_talk_ends
{{ script.ends(1620) }}
Act_RevertCam = no_params
Act_ActTrig = ENGINE_DEATH_talk_ends_timeout
Act_DeActTrig = MIDDLE_KERNELS_roadback_block
Act_ActTrig = ENGINE_DEATH_roadback_block

[Trigger]
nickname = ENGINE_DEATH_roadback_block
{{ direct.inside_pos('om13_alt', 'kernel2_ast5_in', 500) }}
Act_ChangeState = FAIL

[Trigger]
nickname = ENGINE_DEATH_talk_ends_timeout
Cnd_Timer = 1
{{ script.line(1630) }}
Act_SpawnLoot = om13_power_cell
Act_Invulnerable = om13_power_cell, true
Act_MarkObj = om13_power_cell, 1
{{ nn_get_om13_powercell.set() }}
Act_ActTrig = ENGINE_DEATH_powercell_acquired

[Trigger]
nickname = ENGINE_DEATH_powercell_acquired
Cnd_LootAcquired = om13_power_cell, Player
Act_RemoveCargo = om13_power_cell
{{ nn_get_om13_powercell.hide() }}
{{ script.dialog(1640, 1660) }}


{{ om13alt_ast_a_dmg06.mark() }}
{{ nn_om13alt_ast_a_dmg06.set() }}
{{ direct.spawn_ship('om13_alt', 'krieg_far', beast_ship_far) }}
{{ om13alt_ast_a_dmg06.invulnerable(godmode=False) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', om13alt_ast_a_dmg06.name) }}
{{ om13alt_ast_a_dmg06.destroyed() }}
{{ nn_kernel2_ast5_exit.reach() }}
{{ nn_kernel2_ast5_out.reach() }}
Act_ActTrig = EXIT_CHAMBER_init

{{ direct.save('chamber02_after') }}
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'exit_chamber2_player') }}
{{ direct.spawn_ship('om13_alt', 'krieg_far', beast_ship_far) }}
{{ nag.nag_voice }}
Act_ActTrig = EXIT_CHAMBER_init


[ObjList]
nickname = ol_om13_krieg_far
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('om13_alt', 'krieg_far_target') }}, 500, false
;;GotoShip = goto_no_cruise, Player, 100, false

[ObjList]
nickname = ol_om13_krieg_far_near
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('om13_alt', 'krieg_far_target') }}, 500, false
GotoShip = goto_no_cruise, Player, 2, false


[Trigger]
nickname = EXIT_CHAMBER_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'exit_chamber2_player') }}
{#Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'bh_test') }}#}

Act_ActTrig = EXIT_CHAMBER_init

[Trigger]
nickname = EXIT_CHAMBER_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_no_dyson_battle
{#{{ krieg_far.spawn() }}#}
{{ edison_trent.hide_all() }}
{{ beast_ship_far.mark_all() }}
Act_ActTrig = EXIT_CHAMBER_turn_krieg
Act_ActTrig = EXIT_CHAMBER_nomads
Act_ActTrig = EXIT_CHAMBER_krieg_wins
Act_ActTrig = EXIT_CHAMBER_in_BH
Act_ActTrig = EXIT_CHAMBER_in_LAVA
{{ nn_om13alt_bh.set() }}
{{ script.dialog(1800, 1860) }}

[Trigger]
nickname = EXIT_CHAMBER_turn_krieg
Cnd_Timer = 1
Act_GiveObjList = {{ beast_ship_far.name }}, ol_om13_krieg_far

[Trigger]
nickname = EXIT_CHAMBER_nomads
Cnd_True = no_params
{{ direct.spawn_solar_group('OM13_BS1')}}
{{ direct.spawn_solar_group('OM13_BS2')}}
{{ direct.spawn_solar_group('OM13_BS3')}}
Act_ActTrig = EXIT_CHAMBER_no1_zone
Act_ActTrig = EXIT_CHAMBER_no2_zone
Act_ActTrig = EXIT_CHAMBER_no3_zone

[Trigger]
nickname = EXIT_CHAMBER_no_cleanup
Cnd_True = no_params
{{ direct.hide_solar_group('OM13_BS1')}}
{{ direct.hide_solar_group('OM13_BS2')}}
{{ direct.hide_solar_group('OM13_BS3')}}
{{ chaser1.hide_all() }}
{{ chaser2.hide_all() }}
{{ chaser3.hide_all() }}

[Trigger]
nickname = EXIT_CHAMBER_no1_zone
{{ direct.inside_sphere('om13_alt', 'Zone_om13alt_no01_turn') }}
Act_Cloak = OM13_BS1, false
Act_PlaySoundEffect = cloak_no_battleship
{{ chaser1.spawn_all_slide() }}

Act_PlayMusic = none, none, none, music_dangerous_chase
{{ script.dialog(1870, 1880) }}


[Trigger]
nickname = EXIT_CHAMBER_no2_zone
{{ direct.inside_sphere('om13_alt', 'Zone_om13alt_no02_turn') }}
Act_Cloak = OM13_BS2, false
Act_PlaySoundEffect = cloak_no_battleship
{{ chaser2.spawn_all_slide() }}
{{ script.dialog(1890, 1910) }}

[Trigger]
nickname = EXIT_CHAMBER_no3_zone
{{ direct.inside_sphere('om13_alt', 'Zone_om13alt_no03_turn') }}
Act_Cloak = OM13_BS3, false
Act_PlaySoundEffect = cloak_no_battleship
{{ chaser3.spawn_all_slide() }}
{{ script.line(1920) }}

[Trigger]
nickname = EXIT_CHAMBER_krieg_wins
{{ direct.inside_sphere('om13_alt', 'Zone_om13_krieg_Check', obj=beast_ship_far.name) }}
Act_ChangeState = FAIL

[Trigger]
nickname = EXIT_CHAMBER_in_LAVA
{{ direct.inside_sphere('om13_alt', 'Zone_lava') }}
{{ script.dialog(1930, 1940) }}

[Trigger]
nickname = EXIT_CHAMBER_in_BH
{{ direct.inside_sphere('om13_alt', 'Zone_om13alt_bh_active_sphere_alt_excl') }}
Act_DeActTrig = EXIT_CHAMBER_krieg_wins
Act_ActTrig = EXIT_CHAMBER_out_BH
Act_PlayMusic = none, none, none, music_reveal_special_mystery
Act_ActTrig = EXIT_CHAMBER_in_BH_close_far
Act_ActTrig = EXIT_CHAMBER_in_BH_close
{{ script.line(1950) }}
Act_ActTrig = EXIT_CHAMBER_bh_death_timeout

[Trigger]
nickname = EXIT_CHAMBER_bh_death_timeout
Cnd_Timer = 60
Act_Destroy = Player

[Trigger]
nickname = EXIT_CHAMBER_out_BH
{{ direct.outside_sphere('om13_alt', 'Zone_om13alt_bh_active_sphere_alt_excl') }}
Act_ChangeState = FAIL

[Trigger]
nickname = EXIT_CHAMBER_in_BH_close_far
{{ direct.inside_sphere('om13_alt', 'Zone_om13alt_bh_time_stop3') }}
Act_PlayMusic = none, none, none, zone_field_mine

[Trigger]
nickname = EXIT_CHAMBER_in_BH_close
{{ direct.inside_sphere('om13_alt', 'Zone_om13alt_bh_time_stop4') }}
Act_DeActTrig = EXIT_CHAMBER_bh_death_timeout
Act_ActTrig = BH_ENGINE_init

[Trigger]
nickname = EXIT_CHAMBER_BH_enter
{{ direct.inside_pos('om13_alt', 'om13alt_bh', 700) }}
Act_DeActTrig = EXIT_CHAMBER_out_BH
Act_DeActTrig = EXIT_CHAMBER_bh_death_timeout
;; Into BH???


[Trigger]
nickname = BH_ENGINE_demo
Cnd_True = no_params

Act_ActTrig = BH_ENGINE_init

[Trigger]
nickname = BH_ENGINE_init
Cnd_True = no_params
Act_PObjIdle = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'bh_player') }}
{{ direct.spawn_ship('om13_alt', 'krieg_far_near', beast_ship_far_near, ol='ol_om13_krieg_far_near') }}
Act_PlayMusic = none, none, none, zone_field_mine
{{ thorn_m13_bh_cam1.call() }}
Act_PObjIdle = no_params
Act_ActTrig = BH_ENGINE_cam_front1

[Trigger]
nickname = BH_ENGINE_cam_front1
Cnd_Timer = 2
Act_PObjIdle = no_params
{{ script.dialog(2000, 2030) }}
Act_ActTrig = BH_ENGINE_cam_lb1

[Trigger]
nickname = BH_ENGINE_cam_lb1
{{ script.ends(2010) }}
{{ thorn_m13_bh_cam2.call() }}
Act_ActTrig = BH_ENGINE_cam_fr_0

[Trigger]
nickname = BH_ENGINE_cam_fr_0
{{ script.ends(2030) }}
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'bh_player') }}
{{ thorn_m13_bh_cam4.call() }}
Act_ActTrig = BH_ENGINE_cam_fr_0_tm

[Trigger]
nickname = BH_ENGINE_cam_fr_0_tm
Cnd_Timer = 1
{{ script.line(2040) }}
Act_ActTrig = BH_ENGINE_cam_fr_1_ends

[Trigger]
nickname = BH_ENGINE_cam_fr_1_ends
{{ script.ends(2040) }}
{{ thorn_m13_bh_cam3_1.call() }}
Act_ActTrig = BH_ENGINE_cam_fr_1_ends_time

[Trigger]
nickname = BH_ENGINE_cam_fr_1_ends_time
Cnd_Timer = 2
{{ script.line(2050) }}
Act_ActTrig = BH_ENGINE_cam_fr_1_faster_ends

[Trigger]
nickname = BH_ENGINE_cam_fr_1_faster_ends
{{ script.ends(2050) }}
Act_ActTrig = BH_ENGINE_cam_front2

[Trigger]
nickname = BH_ENGINE_cam_front2
Cnd_Timer = 4
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'bh_player') }}
{{ thorn_m13_bh_cam4_1.call() }}
Act_ActTrig = BH_ENGINE_cam_front2_dlg

[Trigger]
nickname = BH_ENGINE_cam_front2_dlg
Cnd_Timer = 1

{{ script.dialog(2060, 2070) }}
Act_ActTrig = BH_ENGINE_cam_front2_dlg_ends

[Trigger]
nickname = BH_ENGINE_cam_front2_dlg_ends
{{ script.ends(2070) }}
Act_ActTrig = BH_ENGINE_cam_back2

[Trigger]
nickname = BH_ENGINE_cam_back2
Cnd_Timer = 1
{{ thorn_m13_bh_cam3_2.call() }}
{{ script.line(2080) }}
Act_ActTrig =  BH_ENGINE_cam_back2_ends

[Trigger]
nickname = BH_ENGINE_cam_back2_ends
{{ script.ends(2080) }}
Act_ActTrig = BH_ENGINE_cam_front3

[Trigger]
nickname = BH_ENGINE_cam_front3
Cnd_Timer = 2
Act_RelocateShip = Player, {{ direct.pos_orient('om13_alt', 'bh_player') }}
{{ thorn_m13_bh_cam4_2.call() }}
Act_ActTrig = BH_ENGINE_cam_front3_dlg

[Trigger]
nickname = BH_ENGINE_cam_front3_dlg
Cnd_Timer = 1
{{ script.line(2090) }}
Act_ActTrig = BH_ENGINE_cam_front3_dlg_ends

[Trigger]
nickname = BH_ENGINE_cam_front3_dlg_ends
{{ script.ends(2090) }}
Act_ActTrig = BH_ENGINE_cam_back4

[Trigger]
nickname = BH_ENGINE_cam_back4
Cnd_Timer = 2
{{ thorn_m13_bh_cam3_3.call() }}
Act_ActTrig = BH_ENGINE_cam_back4_dlg

[Trigger]
nickname = BH_ENGINE_cam_back4_dlg
Cnd_Timer = 1
{{ script.line(2090) }}
Act_ActTrig = BH_ENGINE_cam_back4_dlg_ends

[Trigger]
nickname = BH_ENGINE_cam_back4_dlg_ends
{{ script.ends(2090) }}
Act_ActTrig = BH_ENGINE_cam_front4

[Trigger]
nickname = BH_ENGINE_cam_front4
Cnd_Timer = 1
{{ thorn_m13_bh_cam4.call() }}
Act_ActTrig = BH_ENGINE_cam_front4_dlg

[Trigger]
nickname = BH_ENGINE_cam_front4_dlg
Cnd_Timer = 1
{{ script.line(2090) }}
Act_ActTrig = BH_ENGINE_cam_front4_dlg_ends

[Trigger]
nickname = BH_ENGINE_cam_front4_dlg_ends
{{ script.ends(2090) }}
Act_ActTrig = BH_ENGINE_cam_back5

[Trigger]
nickname = BH_ENGINE_cam_back5
Cnd_Timer = 1
{{ thorn_m13_bh_cam3_4.call() }}
Act_ActTrig = BH_ENGINE_cam_back5_dlg

[Trigger]
nickname = BH_ENGINE_cam_back5_dlg
Cnd_Timer = 1
{{ script.line(2095) }}
Act_ActTrig = BH_ENGINE_cam_back5_dlg_ends

[Trigger]
nickname = BH_ENGINE_cam_back5_dlg_ends
{{ script.ends(2095) }}
Act_ActTrig = BH_ENGINE_cam_back5_dlg_timeout

[Trigger]
nickname = BH_ENGINE_cam_back5_dlg_timeout
Cnd_Timer = 2
{{ script.line(2100) }}
Act_ActTrig = BH_ENGINE_cam_stop

[Trigger]
nickname = BH_ENGINE_cam_stop
{{ script.ends(2100) }}
Act_RevertCam = no_params
Act_ActTrig = BH_ENGINE_turn

[Trigger]
nickname = BH_ENGINE_turn
Cnd_Timer = 1
{{ script.line(2110) }}




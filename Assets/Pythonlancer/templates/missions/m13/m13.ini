[Mission]
npc_ship_file = missions\m13\npcships.ini

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

;--------------------------------

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

;--------------------------

;;;gen msn ships

{{ objects_definitions }}

{{ osiris_arrive1.define() }}

{{ wp1.define() }}
{{ wp2.define() }}
{{ wp3.define() }}
{{ wp4.define() }}
{{ wp5.define() }}
{{ gen1.define() }}
{{ gen2.define() }}
{{ gen3.define() }}

{{ lazer1.define('space_hidden_root', loadout='sph02_laser') }}

{{ krieg1.define('hidden_connect_m13_long', loadout='krieg_static') }}

{{ sph02_door02_open.define('lair_anim_door', loadout='lair_airlock_door_open_forever') }}
{{ sph02_door03_open.define('lair_anim_door', loadout='lair_airlock_door_open_forever') }}
{{ sph02_door03_close.define('lair_anim_door', loadout='lair_airlock_door_close_forever_snd') }}

{{ sph2_core_F01.define() }}
{{ sph2_core_F02.define() }}
{{ sph2_core_F03.define() }}
{{ sph2_core_F04.define() }}
{{ sph2_core_F05.define() }}
{{ sph2_core_F06.define() }}
{{ sph2_core_F07.define() }}
{{ sph2_core_F08.define() }}
{{ sph2_core_G01.define() }}
{{ sph2_core_G02.define() }}
{{ sph2_core_G03.define() }}
{{ sph2_core_G04.define() }}
{{ sph2_core_G05.define() }}
{{ sph2_core_G06.define() }}
{{ sph2_core_G07.define() }}
{{ sph2_core_G08.define() }}

{{ krieg_sleep.define() }}
{{ krieg_opens.define() }}
{{ krieg_collector.define() }}
{{ krieg_opens_force.define() }}

{{ krieg_gen1.define() }}
{{ krieg_gen2.define() }}
{{ krieg_gen3.define() }}
{{ krieg_gen4.define() }}
{{ krieg_gen5.define() }}
{{ krieg_gen6.define() }}

{{ hit_fx.define() }}
{#{{ krieg_fire.define() }}#}


;-------------------------------------
;waypoints

{{ nn_objectives_list }}


[Trigger]
nickname = FRIEND_setrep
Cnd_Timer = 0.1
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}

[Trigger]
nickname = LAZERGEN_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'asf', 'lazergen') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'lazergen') }}

[Trigger]
nickname = SPHERE_init
Cnd_True = no_params
Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM

{{ sph2_core_F01.spawn() }}
{{ sph2_core_F02.spawn() }}
{{ sph2_core_F03.spawn() }}
{{ sph2_core_F04.spawn() }}
{{ sph2_core_F05.spawn() }}
{{ sph2_core_F06.spawn() }}
{{ sph2_core_F07.spawn() }}
{{ sph2_core_F08.spawn() }}
{{ sph2_core_G01.spawn() }}
{{ sph2_core_G02.spawn() }}
{{ sph2_core_G03.spawn() }}
{{ sph2_core_G04.spawn() }}
{{ sph2_core_G05.spawn() }}
{{ sph2_core_G06.spawn() }}
{{ sph2_core_G07.spawn() }}
{{ sph2_core_G08.spawn() }}

{{ krieg_gen1.spawn() }}
{{ krieg_gen2.spawn() }}
{{ krieg_gen3.spawn() }}
{{ krieg_gen4.spawn() }}
{{ krieg_gen5.spawn() }}
{{ krieg_gen6.spawn() }}

{{ krieg_sleep.spawn() }}



{{ sph2_core_F01.invulnerable() }}
{{ sph2_core_F02.invulnerable() }}
{{ sph2_core_F03.invulnerable() }}
{{ sph2_core_F04.invulnerable() }}
{{ sph2_core_F05.invulnerable() }}
{{ sph2_core_F06.invulnerable() }}
{{ sph2_core_F07.invulnerable() }}
{{ sph2_core_F08.invulnerable() }}
{{ sph2_core_G01.invulnerable() }}
{{ sph2_core_G02.invulnerable() }}
{{ sph2_core_G03.invulnerable() }}
{{ sph2_core_G04.invulnerable() }}
{{ sph2_core_G05.invulnerable() }}
{{ sph2_core_G06.invulnerable() }}
{{ sph2_core_G07.invulnerable() }}
{{ sph2_core_G08.invulnerable() }}

{{ krieg_gen1.invulnerable() }}
{{ krieg_gen2.invulnerable() }}
{{ krieg_gen3.invulnerable() }}
{{ krieg_gen4.invulnerable() }}
{{ krieg_gen5.invulnerable() }}
{{ krieg_gen6.invulnerable() }}

{{ krieg_sleep.invulnerable() }}

;{{ krieg_opens.spawn() }}
[;
{{ krieg_opens_force.spawn() }}

[Trigger]
nickname = SPHERE_AWAKEN_init
Cnd_True = no_params
Act_SetRep = Player, fc_n_grp, REP_HOSTILE_MAXIMUM

{{ krieg_opens_force.spawn() }}

{{ krieg_gen1.spawn() }}
{{ krieg_gen2.spawn() }}
{{ krieg_gen3.spawn() }}
{{ krieg_gen4.spawn() }}
{{ krieg_gen5.spawn() }}
{{ krieg_gen6.spawn() }}

{{ krieg_opens_force.invulnerable() }}

Act_Destroy = sphere2_core_box_X10, SILENT
Act_Destroy = sphere2_core_box_X12, SILENT
Act_Destroy = sphere2_core_box_X14, SILENT
Act_Destroy = sphere2_core_box_X16, SILENT
Act_Destroy = sph2_tower05, SILENT
Act_Destroy = sph2_tower06, SILENT
Act_Destroy = sph2_tower07, SILENT
Act_Destroy = sph2_tower08, SILENT

Act_ActTrig = AWAKE_turn_gens_fast

[Trigger]
nickname = LAZERGEN_init
Cnd_True = no_params
{{ gen1.spawn() }}
{{ gen2.spawn() }}
{{ gen3.spawn() }}
{{ wp1.spawn() }}
{{ wp2.spawn() }}
{{ wp3.spawn() }}
{{ wp4.spawn() }}
{{ wp5.spawn() }}
{{ gen1.invulnerable(damage_from_player=True) }}
{{ gen2.invulnerable(damage_from_player=True) }}
{{ gen3.invulnerable(damage_from_player=True) }}



[Trigger]
nickname = initialize_init
InitState = ACTIVE
Cnd_True = no_params
;Act_ChangeState = SUCCEED
Act_ActTrig = tttt


[Trigger]
nickname = tttt
Cnd_Timer = 1
;;Act_ActTrig = CHAMBER01_test
;;Act_ActTrig = KRIEG_TEST
;;Act_ActTrig = LASER_demo
Act_ActTrig = BEAST_REACTOR_demo
;;Act_ActTrig = CATACOMB_demo
;;Act_ActTrig = OSIRIS_HIT_demo



[Trigger]
nickname = DEBUG_force_dock
;;InitState = ACTIVE  ; DEBUG ONLY
Cnd_Timer = 1
Act_ForceLand = sphere2_99_base


[Trigger]
nickname = start_M13
;;InitState = ACTIVE
Cnd_BaseEnter = sphere2_99_base
{{ nag.nag_off() }}
{{ offer.init() }}
{{ rtc.add('captured') }}
Act_ActTrig = SPH2_start_ACCEPT

Act_PlayerCanDock = false
Act_PlayerCanTradelane = false
Act_RandomPop = false


[Trigger]
nickname = SPH2_start_ACCEPT
Cnd_MsnResponse = accept
{{ rtc.remove('captured') }}
{{ offer.accept() }}
{{ nn_launch.set() }}
Act_ActTrig = SPH2_player_launch

[Trigger]
nickname = SPH2_player_launch
Cnd_PlayerLaunch = no_params
Act_SpawnSolar = {{ osiris_arrive1.name }}
Act_ActTrig = SPHERE_inspace
Act_ActTrig = SPHERE_launch_complete

{{ direct.ol_goto('sphere2', 'li_dread_arrive_goto', 'ol_li_dread_arrive', 'goto_no_cruise') }}

[Trigger]
nickname = SPHERE_inspace
Cnd_SpaceEnter = sphere2
{{ direct.spawn_ship('sphere2', 'darcy_start', darcy, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'alaric_start', alaric, no_mark=True) }}
{{ direct.spawn_ship('sphere2', 'hatcher_start', hatcher, no_mark=True) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman01', wingman.member_obj(1)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman02', wingman.member_obj(2)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman03', wingman.member_obj(3)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman04', wingman.member_obj(4)) }}
{{ direct.spawn_ship_member('sphere2', 'start_wingman05', wingman.member_obj(5)) }}
{{ direct.spawn_capital('sphere2', li_dread, 'li_dread_arrive', ol='ol_li_dread_arrive') }}
Act_ActTrig = FRIEND_setrep
{{ wingman.invulnerable() }}
{{ script.line(5) }}

[ObjList]
nickname = ol_trent_wing_follow
SetPriority = ALWAYS_EXECUTE
FollowPlayer = fighter_basic_player_forward, {{ hatcher.name }}, {{ alaric.name }}, {{ darcy.name }}, {{ wingman.member_list() }}

[Trigger]
nickname = SPHERE_launch_complete
Cnd_LaunchComplete = Player
{{ nag.nag_voice }}
Act_GiveObjList = Player, ol_trent_wing_follow
Act_ActTrig = SPHERE_init_obj

[Trigger]
nickname = SPHERE_init_obj
Cnd_Timer = 1
{{ nn_goto_core.set() }}
Act_ActTrig = SPHERE_inside_core
Act_ActTrig = SPHERE_outside_osiris
Act_ActTrig = SPHERE_init

[Trigger]
nickname = SPHERE_outside_osiris
{{ direct.outside_pos('sphere2', 'osiris_arrive1', 1200) }}
{{ script.dialog(10, 120) }}
Act_ActTrig = SPHERE_outside_osiris_comm_continue

[Trigger]
nickname = SPHERE_outside_osiris_comm_continue
{{ script.ends(120) }}
{{ script.dialog(130, 170) }}

[Trigger]
nickname = SPHERE_inside_core
{{ direct.inside_pos('sphere2', 'krieg1', 15000) }}
{{ nn_goto_lazer.set() }}
{{ li_dread.hide() }}
{{ osiris_arrive1.hide() }}
Act_ActTrig = LAZERGEN_init
Act_ActTrig = LAZERGEN_inside

[Trigger]
nickname = LAZERGEN_inside
{{ direct.inside_pos('sphere2', 'sph02_lazergen', 3000) }}
Act_ActTrig = LAZERGEN_setrep
{{ nn_destroy_lazergens.set() }}
{{ gen1.mark() }}
{{ gen2.mark() }}
{{ gen3.mark() }}
Act_ActTrig = LAZERGEN_gen1_destroyed
Act_ActTrig = LAZERGEN_gen2_destroyed
Act_ActTrig = LAZERGEN_gens_all_destroyed
{{ script.dialog(180, 210) }}
Act_ActTrig = respawn_caps_inside
Act_ActTrig = LAZERGEN_inside_close

[Trigger]
nickname = LAZERGEN_inside_close
{{ direct.inside_pos('sphere2', 'sph02_lazergen', 1000) }}
{{ darcy.give_objlist_all('unform') }}
{{ alaric.give_objlist_all('unform') }}
{{ hatcher.give_objlist_all('unform') }}
{{ wingman.give_objlist_all('unform') }}

[Trigger]
nickname = LAZERGEN_gen1_destroyed
Cnd_Destroyed = lazer_generators, 1, ALL
{{ script.dialog(220, 230) }}

[Trigger]
nickname = LAZERGEN_gen2_destroyed
Cnd_Destroyed = lazer_generators, 2, ALL
{{ script.dialog(240, 250) }}

[Trigger]
nickname = LAZERGEN_gens_all_destroyed
Cnd_Destroyed = lazer_generators, -1, ALL
Act_ActTrig = LASER_init
{{ wp1.destroy() }}
{{ wp2.destroy() }}
{{ wp3.destroy() }}
{{ wp4.destroy() }}
{{ wp5.destroy() }}

{{ direct.ol_goto('sphere2', 'li_dread_inside_goto', 'ol_li_dread_inside', 'goto_no_cruise') }}
{{ direct.ol_goto('sphere2', 'osiris_inside_goto', 'ol_osiris_inside', 'goto_no_cruise') }}


[Trigger]
nickname = respawn_caps_inside
Cnd_True = no_params
{{ direct.spawn_capital('sphere2', li_dread, 'li_dread_inside', ol='ol_li_dread_inside') }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_inside', ol='ol_osiris_inside') }}
Act_ActTrig = FRIEND_setrep

[Trigger]
nickname = LASER_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_laser') }}
Act_ActTrig = SPHERE_init
;;Act_ActTrig = LASER_destroy_columns
;;Act_ActTrig = AWAKE_init
Act_ActTrig = LASER_init
;;Act_ActTrig = LI_DREAD_init
;;Act_ActTrig = BOXX_break

[Trigger]
nickname = BOXX_break
Cnd_Timer = 2
Act_ActTRig = BOXX_01_break
Act_ActTRig = BOXX_columns_break

[Trigger]
nickname = BOXX2_break
Cnd_Timer = 20
Act_ActTRig = BOXX_02_break
;
;[Trigger]
;nickname = BOXX_break
;Cnd_Timer = 1
;Act_ActTRig = BOXX_01_break
;Act_ActTRig = BOXX_02_break
;Act_ActTRig = BOXX_03_break
;Act_ActTRig = BOXX_04_break
;Act_ActTRig = BOXX_columns_break

[Trigger]
nickname = BOXX_columns_break
Cnd_Timer = 8
Act_ActTrig = LASER_destroy_columns

[Trigger]
nickname = BOXX_01_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X10, fuse_sphere_ast_death
Act_ActTrig = BOXX_01_crash_laser

[Trigger]
nickname = BOXX_01_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower05, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower06, fuse_sphere_generator_alt2
Act_LightFuse = sphere2_core_box_X12, fuse_sphere_ast_death
Act_ActTrig = BOXX_01_ends
Act_ActTrig = BOXX_01_reaction

[Trigger]
nickname = BOXX_01_reaction
Cnd_Timer = 1
{{ script.dialog(280, 290) }}

[Trigger]
nickname = BOXX_01_ends
Cnd_Timer = 17
Act_ActTrig = BOXX_04_break

[Trigger]
nickname = BOXX_04_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X14, fuse_sphere_ast_death
Act_ActTrig = BOXX_04_crash_laser

[Trigger]
nickname = BOXX_04_crash_laser
Cnd_Timer = 10
Act_LightFuse = sph2_tower07, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower08, fuse_sphere_generator_alt2
Act_LightFuse = sphere2_core_box_X16, fuse_sphere_ast_death

[Trigger]
nickname = BOXX_02_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X02, fuse_sphere_ast_death
Act_ActTrig = BOXX_02_crash_laser

[Trigger]
nickname = BOXX_02_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower01, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower02, fuse_sphere_generator_alt2
Act_ActTrig = BOXX_02_crash_top

[Trigger]
nickname = BOXX_02_crash_top
Cnd_Timer = 10
Act_LightFuse = sphere2_core_box_X04, fuse_sphere_ast_death
Act_ActTrig = BOXX_02_ends

[Trigger]
nickname = BOXX_02_ends
Cnd_Timer = 30
Act_ActTrig = BOXX_03_break

[Trigger]
nickname = BOXX_03_break
Cnd_Timer = 1
Act_LightFuse = sphere2_core_box_X06, fuse_sphere_ast_death
Act_ActTrig = BOXX_03_crash_laser

[Trigger]
nickname = BOXX_03_crash_laser
Cnd_Timer = 6
Act_LightFuse = sph2_tower03, fuse_sphere_generator_alt2
Act_LightFuse = sph2_tower04, fuse_sphere_generator_alt2
Act_ActTrig = BOXX_03_crash_top

[Trigger]
nickname = BOXX_03_crash_top
Cnd_Timer = 10
Act_LightFuse = sphere2_core_box_X08, fuse_sphere_ast_death



[Trigger]
nickname = LASER_init
Cnd_True = no_params

{{ li_dread.hide() }}
{{ osiris.hide() }}
{{ darcy.hide_all() }}
{{ alaric.hide_all() }}
{{ hatcher.hide_all() }}
{{ wingman.hide_all() }}
{{ thorn_m13_laser_fire.call() }}
{{ lazer1.spawn() }}

Act_ActTrig = LASER_hit_fx

[Trigger]
nickname = LASER_hit_fx
Cnd_Timer = 2.7
{{ hit_fx.spawn() }}
Act_ActTrig = LASER_stop_laser

{{ script.line(260) }}

[Trigger]
nickname = LASER_stop_laser
Cnd_Timer = 3
{{ lazer1.hide() }}
Act_PlaySoundEffect = cruise_backfire
Act_ActTrig = LASER_stop_hit

[Trigger]
nickname = LASER_stop_hit
Cnd_Timer = 1
{{ hit_fx.hide() }}
Act_ActTrig = LASER_stop_hit_reaction

[Trigger]
nickname = LASER_stop_hit_reaction
Cnd_Timer = 2
{{ thorn_m13_laser_fire_done.call() }}

{{ script.line(270) }}
Act_ActTrig = LASER_stop_hit_reaction_done

[Trigger]
nickname = LASER_stop_hit_reaction_done
{{ script.ends(270) }}
Act_ActTrig = BOXX_break
;;Act_ActTrig = LASER_destroy_columns

[Trigger]
nickname = destroy_column_1
Cnd_Timer = 4
{{ sph2_core_F01.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G01.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_2
Cnd_Timer = 12.5
{{ sph2_core_F02.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G02.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_3
Cnd_Timer = 9
{{ sph2_core_F03.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G03.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_4
Cnd_Timer = 11.8
{{ sph2_core_F04.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G04.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_5
Cnd_Timer = 11
{{ sph2_core_F05.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G05.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_6
Cnd_Timer = 7
{{ sph2_core_F06.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G06.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_7
Cnd_Timer = 10
{{ sph2_core_F07.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G07.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = destroy_column_8
Cnd_True = no_params
{{ sph2_core_F08.fuse('fuse_sphere_generator_alt') }}
{{ sph2_core_G08.fuse('fuse_sphere_generator_alt') }}

[Trigger]
nickname = LASER_destroy_columns
Cnd_Timer = 1
Act_ActTrig = destroy_column_1
Act_ActTrig = destroy_column_2
Act_ActTrig = destroy_column_3
Act_ActTrig = destroy_column_4
Act_ActTrig = destroy_column_5
Act_ActTrig = destroy_column_6
Act_ActTrig = destroy_column_7
Act_ActTrig = destroy_column_8
Act_ActTrig = LASER_columns_destroyed

[Trigger]
nickname = LASER_columns_destroyed
Cnd_Timer = 11
Act_ActTrig = AWAKE_init

[Trigger]
nickname = LASER_hide_columns
Cnd_True = no_params
{{ sph2_core_F01.hide() }}
{{ sph2_core_F02.hide() }}
{{ sph2_core_F03.hide() }}
{{ sph2_core_F04.hide() }}
{{ sph2_core_F05.hide() }}
{{ sph2_core_F06.hide() }}
{{ sph2_core_F07.hide() }}
{{ sph2_core_F08.hide() }}
{{ sph2_core_G01.hide() }}
{{ sph2_core_G02.hide() }}
{{ sph2_core_G03.hide() }}
{{ sph2_core_G04.hide() }}
{{ sph2_core_G05.hide() }}
{{ sph2_core_G06.hide() }}
{{ sph2_core_G07.hide() }}
{{ sph2_core_G08.hide() }}

[Trigger]
nickname = AWAKE_init
Cnd_Timer = 1
;;Act_ActTrig = LASER_hide_columns
{{ krieg_sleep.hide() }}
Act_ActTrig = AWAKE_turn_gens
Act_ActTrig = AWAKE_respawn_and_open_doors


[Trigger]
nickname = AWAKE_respawn_and_open_doors
Cnd_Timer = 0.01
{{ krieg_opens.spawn() }}
{{ thorn_m13_opens.call() }}
Act_ActTrig = AWAKE_gens_loaded

[Trigger]
nickname = AWAKE_gens_loaded
Cnd_Timer = 1
Act_ACtTrig = LI_DREAD_init

{{ script.dialog(300, 320) }}

{{ direct.ol_goto('sphere2', 'li_dread_death2', 'ol_li_dread_death', 'goto_no_cruise') }}

[Trigger]
nickname = LI_DREAD_init
Cnd_True = no_params
{{ direct.spawn_capital('sphere2', li_dread, 'li_dread_death', ol='ol_li_dread_death', invulnerable=False) }}
Act_Invulnerable = li_dread, false
{{ direct.spawn_capital('sphere2', krieg_fire, 'krieg_fire') }}
Act_ActTrig = LI_DREAD_target
Act_ActTrig = LI_DREAD_target_reaction

[Trigger]
nickname = LI_DREAD_target_reaction
Cnd_Timer = 2
{{ script.line(323) }}

[Trigger]
nickname = LI_DREAD_target
{{ direct.inside_pos('sphere2', 'li_dread_death2', 1700, obj='li_dread') }}
Act_ActTrig = LI_DREAD_do_fire

[Trigger]
nickname = LI_DREAD_do_fire
Cnd_Timer = 0.1
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', 'krieg_fire', 'li_dread') }}
{{ thorn_m13_beast_fire.call() }}
Act_ActTrig = LI_DREAD_hit

[Trigger]
nickname = LI_DREAD_hit
Cnd_ProjHit = li_dread, 1, krieg_fire
{{ krieg_fire.hide() }}
{{ li_dread.fuse('l_dreadnought_fuse_fast') }}

{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'the_krieg') }}

Act_ActTrig = LI_DREAD_damage


[Trigger]
nickname = turn_gen_1
Cnd_True = no_params
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen1.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_2
Cnd_Timer = 2
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen2.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_6
Cnd_Timer = 4
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen6.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_4
Cnd_Timer = 5.5
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen4.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_3
Cnd_Timer = 7
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen3.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = turn_gen_5
Cnd_Timer = 8.5
Act_PlaySoundEffect = s_lightninggun
{{ krieg_gen5.fuse('fuse_beast_gen_turn_on') }}

[Trigger]
nickname = AWAKE_turn_gens
Cnd_Timer = 5
Act_ActTrig = turn_gen_1
Act_ActTrig = turn_gen_2
Act_ActTrig = turn_gen_3
Act_ActTrig = turn_gen_4
Act_ActTrig = turn_gen_5
Act_ActTrig = turn_gen_6

[Trigger]
nickname = AWAKE_turn_gens_fast
Cnd_True = no_params
{{ krieg_gen1.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen2.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen6.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen4.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen3.fuse('fuse_beast_gen_turn_on') }}
{{ krieg_gen5.fuse('fuse_beast_gen_turn_on') }}


[Trigger]
nickname = LASER_destroy_columns
Cnd_Timer = 4
Act_ActTrig = destroy_column_1
Act_ActTrig = destroy_column_2
Act_ActTrig = destroy_column_3
Act_ActTrig = destroy_column_4
Act_ActTrig = destroy_column_5
Act_ActTrig = destroy_column_6
Act_ActTrig = destroy_column_7
Act_ActTrig = destroy_column_8
;;; destroy columns

[Trigger]
nickname = LI_DREAD_damage
Cnd_Timer = 2
{{ script.line(326) }}
Act_ActTrig = LI_DREAD_damage_ends

[Trigger]
nickname = LI_DREAD_damage_ends
Cnd_Timer = 6
Act_ReverCam = no_params
Act_ActTrig = LI_DREAD_dead

[Trigger]
nickname = LI_DREAD_dead
Cnd_Timer = 1
{{ script.dialog(330, 340) }}
Act_ActTrig = LI_DREAD_dead_ends

[Trigger]
nickname = LI_DREAD_dead_ends
{{ script.ends(340) }}
Act_ActTrig = BEAST_REACTOR_init

[Trigger]
nickname = BEAST_REACTOR_setrep
Cnd_Timer = 1
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'asf', 'the_krieg') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'the_krieg') }}

[Trigger]
nickname = BEAST_REACTOR_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_reactor') }}
Act_ActTrig = SPHERE_AWAKEN_init
Act_ActTrig = BEAST_REACTOR_init
Act_ActTrig = BOXX2_break

[Trigger]
nickname = BEAST_REACTOR_init
Cnd_True = no_params
{{ script.dialog(350, 370) }}
Act_ActTrig = BEAST_REACTOR_friends
Act_ActTrig = BEAST_REACTOR_objective
Act_ActTrig = BEAST_REACTOR_setrep
Act_ActTrig = BEAST_REACTOR_all_destroyed
Act_ActTrig = BEAST_REACTOR_talk_enough

[Trigger]
nickname = BEAST_REACTOR_talk_enough
{{ script.ends(370) }}
Act_ActTrig = OSIRIS_SHIELD_init

[Trigger]
nickname = BEAST_REACTOR_objective
{{ script.ends(350) }}

{{ krieg_gen1.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen2.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen3.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen4.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen5.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen6.invulnerable(True, damage_from_player=True) }}
{{ krieg_gen1.mark() }}
{{ krieg_gen2.mark() }}
{{ krieg_gen3.mark() }}
{{ krieg_gen4.mark() }}
{{ krieg_gen5.mark() }}
{{ krieg_gen6.mark() }}
;;Act_ActTrig = BEAST_REACTOR_debug_destroy

[Trigger]
nickname = BEAST_REACTOR_debug_destroy
Cnd_Timer = 2
{{ krieg_gen1.destroy() }}
{{ krieg_gen2.destroy() }}
{{ krieg_gen3.destroy() }}
{{ krieg_gen4.destroy() }}
{{ krieg_gen5.destroy() }}
{{ krieg_gen6.destroy() }}





[ObjList]
nickname = ol_kr_gen1
GotoShip = goto, {{ krieg_gen1.name }}, 500, false

[ObjList]
nickname = ol_kr_gen2
GotoShip = goto, {{ krieg_gen2.name }}, 500, false

[ObjList]
nickname = ol_kr_gen3
GotoShip = goto, {{ krieg_gen3.name }}, 500, false

[ObjList]
nickname = ol_kr_gen4
GotoShip = goto, {{ krieg_gen4.name }}, 500, false

[ObjList]
nickname = ol_kr_gen5
GotoShip = goto, {{ krieg_gen5.name }}, 500, false

[ObjList]
nickname = ol_kr_gen6
GotoShip = goto, {{ krieg_gen6.name }}, 500, false

[ObjList]
nickname = ol_to_osiris_hit
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_hit') }}, 500, false

[ObjList]
nickname = ol_osiris_flee_away
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_flee_away') }}, 500, false

[ObjList]
nickname = ol_reactor_osiris
SetPriority = ALWAYS_EXECUTE
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_reactor2') }}, 500, false
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_reactor3') }}, 500, false
GotoVec = goto_no_cruise, {{ direct.pos('sphere2', 'osiris_hit') }}, 200, false

[Trigger]
nickname = BEAST_REACTOR_friends
Cnd_True = no_params
{{ direct.spawn_ship('sphere2', 'darcy_reactor', darcy, no_mark=True, ol='ol_kr_gen1') }}
{{ direct.spawn_ship('sphere2', 'alaric_reactor', alaric, no_mark=True, ol='ol_kr_gen2') }}
{{ direct.spawn_ship('sphere2', 'hatcher_reactor', hatcher, no_mark=True, ol='ol_kr_gen3') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman01', wingman.member_obj(1), ol='ol_kr_gen4') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman02', wingman.member_obj(2), ol='ol_kr_gen5') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman03', wingman.member_obj(3), ol='ol_kr_gen6') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman04', wingman.member_obj(4), ol='ol_kr_gen1') }}
{{ direct.spawn_ship_member('sphere2', 'reactor_wingman05', wingman.member_obj(5), ol='ol_kr_gen2') }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_reactor', ol='ol_reactor_osiris') }}
Act_ActTrig = FRIEND_setrep
{{ wingman.invulnerable() }}



[Trigger]
nickname = OSIRIS_HIT_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_osiris') }}
{{ direct.spawn_capital('sphere2', osiris, 'osiris_hit') }}
Act_ActTrig = OSIRIS_HIT_init

[Trigger]
nickname = OSIRIS_HIT_init
Cnd_True = no_params
Act_GiveObjList = osiris, force_stop
Act_RelocateShip = osiris, {{ direct.pos_orient('sphere2', 'osiris_hit') }}
Act_ActTrig = OSIRIS_HIT_shield_warning

[Trigger]
nickname = OSIRIS_HIT_shield_warning
Cnd_True = no_params
{{ script.dialog(380, 390) }}
Act_ActTrig = OSIRIS_HIT_shield_warning_done

[Trigger]
nickname = OSIRIS_HIT_shield_warning_done
{{ script.ends(390) }}
Act_ActTrig = OSIRIS_HIT_shield_reload_timeout

[Trigger]
nickname = OSIRIS_HIT_shield_reload_timeout
Cnd_Timer = 3
Act_ActTrig = OSIRIS_HIT_cam

[Trigger]
nickname = OSIRIS_HIT_cam
Cnd_Timer = 1
{{ thorn_m13_osiris_hit.call() }}
Act_Pobjidle = no_params
Act_ActTrig = OSIRIS_HIT_fx

[Trigger]
nickname = OSIRIS_HIT_fx
Cnd_Timer = 0.5
{{ osiris.fuse('osiris_beast_hit') }}
Act_ActTrig = OSIRIS_HIT_revert

[Trigger]
nickname = OSIRIS_HIT_revert
Cnd_Timer = 10
Act_RevertCam = no_params
Act_ActTrig = OSIRIS_hit_reaction

[Trigger]
nickname = OSIRIS_hit_reaction
Cnd_Timer = 1
{{ script.dialog(400, 410) }}
Act_ActTrig = OSIRIS_hit_reaction_done

[Trigger]
nickname = OSIRIS_hit_reaction_done
{{ script.ends(410) }}
Act_ActTrig = OSIRIS_SECOND_HIT_timeout

[Trigger]
nickname = OSIRIS_SECOND_HIT_timeout
Cnd_Timer = 120
{{ script.dialog(420, 430) }}
Act_ActTrig = OSIRIS_SECOND_HIT_warning_ends

[Trigger]
nickname = OSIRIS_SECOND_HIT_warning_ends
{{ script.ends(430) }}
Act_ActTrig = OSIRIS_SECOND_HIT_final_timeout

[Trigger]
nickname = OSIRIS_SECOND_HIT_final_timeout
Cnd_timer = 60
Act_ChangeState = FAIL



[Trigger]
nickname = OSIRIS_SHIELD_init
Cnd_True = no_params
Act_ActTrig = OSIRIS_FIRST_timeout
Act_ActTrig = OSIRIS_FIRST_wait_second_reactor

[Trigger]
nickname = OSIRIS_FIRST_timeout
Cnd_Timer = 120
Act_DeactTrig = OSIRIS_FIRST_wait_second_reactor
Act_ActTrig = OSIRIS_HIT_init

[Trigger]
nickname = OSIRIS_FIRST_wait_second_reactor
Cnd_Destroyed = krieg_the_gen, 2, ALL
Act_DeActTrig = OSIRIS_FIRST_timeout
Act_ActTrig = OSIRIS_FIRST_second_reactor_turn_hit

[Trigger]
nickname = OSIRIS_FIRST_second_reactor_turn_hit
Cnd_Timer = 2
Act_ActTrig = OSIRIS_HIT_init


[Trigger]
nickname = OSIRIS_HIT_disable
Cnd_True = no_params
Act_DeActTrig = OSIRIS_SHIELD_init
Act_DeActTrig = OSIRIS_FIRST_timeout
Act_DeActTrig = OSIRIS_FIRST_wait_second_reactor
Act_DeActTrig = OSIRIS_FIRST_second_reactor_turn_hit
Act_DeActTrig = OSIRIS_hit_reaction
Act_DeActTrig = OSIRIS_hit_reaction_done
Act_DeActTrig = OSIRIS_SECOND_HIT_timeout
Act_DeActTrig = OSIRIS_SECOND_HIT_warning_ends
Act_DeActTrig = OSIRIS_SECOND_HIT_final_timeout

[Trigger]
nickname = BEAST_REACTOR_friends_regroup_near_osiris
Cnd_True = no_params
{{ darcy.give_objlist_all('ol_to_osiris_hit') }}
{{ alaric.give_objlist_all('ol_to_osiris_hit') }}
{{ hatcher.give_objlist_all('ol_to_osiris_hit') }}
{{ wingman.give_objlist_all('ol_to_osiris_hit') }}


[Trigger]
nickname = BEAST_REACTOR_all_destroyed
Cnd_Destroyed = krieg_the_gen, -1, ALL
Act_ActTrig = OSIRIS_HIT_disable
Act_ActTrig = BEAST_REACTOR_friends_regroup_near_osiris
Act_ActTrig = COLLECTOR_init

[Trigger]
nickname = COLLECTOR_init
Cnd_Timer = 1
{{ krieg_opens.hide() }}
{{ krieg_opens_force.hide() }}
Act_ActTrig = COLLECTOR_respawn_beast

[Trigger]
nickname = COLLECTOR_respawn_beast
Cnd_Timer = 0.25
{{ krieg_collector.spawn() }}
Act_ActTrig = COLLECTOR_first_reaction

[Trigger]
nickname = COLLECTOR_first_reaction
Cnd_Timer = 1
{{ script.line(450) }}
Act_ActTrig = COLLECTOR_turn_fx
Act_ActTrig = COLLECTOR_first_reaction_done

[Trigger]
nickname = COLLECTOR_first_reaction_done
{{ script.ends(450) }}

[Trigger]
nickname = COLLECTOR_turn_fx
Cnd_Timer = 20
{{ krieg_collector.fuse('fuse_beast_collecting') }}
Act_ActTrig = COLLECTOR_turn_fx_reaction

[Trigger]
nickname = COLLECTOR_turn_fx_reaction
Cnd_Timer = 1
{{ script.dialog(460, 470) }}
Act_ActTrig = COLLECTOR_turn_fx_reaction_done

[Trigger]
nickname = COLLECTOR_turn_fx_reaction_done
{{ script.ends(470) }}
Act_RevertCam = no_params
Act_ActTrig = COLLECTOR_init_catacomb

[Trigger]
nickname = COLLECTOR_init_catacomb
Cnd_Timer = 1
{{ script.dialog(480, 490) }}
Act_ActTrig = COLLECTOR_catacomb_obj_message_done

[Trigger]
nickname = COLLECTOR_catacomb_obj_message_done
{{ script.ends(490) }}
{{ script.line(500) }}
Act_ActTrig = CATACOMB_init
Act_ActTrig = OSIRIS_LEAVE_init

[Trigger]
nickname = OSIRIS_LEAVE_init
Cnd_Timer = 6
{{ script.dialog(510, 520) }}
Act_GiveObjList = osiris, ol_osiris_flee_away























[Trigger]
nickname = CATACOMB_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('sphere2', 'player_collector') }}
{{ krieg_collector.spawn() }}
{{ krieg_collector.fuse('fuse_beast_collecting') }}



[Trigger]
nickname = CATACOMB_init
Cnd_True = no_params
{{ nn_goto_catacomb.set() }}


Act_ActTrig = CATACOMB_near_obj
Act_ActTrig = TO_INSIDE_near_enter_door

[Trigger]
nickname = CATACOMB_near_obj
{{ direct.inside_pos('sphere2', 'goto_catacomb', 500) }}
{{ nn_goto_catacomb2.set() }}

[Trigger]
nickname = TO_INSIDE_near_enter_door
Cnd_DistVec = inside, Player, {{ sph02_door02.pos }}, 200
Act_Destroy = {{ sph02_door02.name }}, SILENT
{{ sph02_door02_open.spawn() }}
Act_PlaySoundEffect = lair_door_open
;;;Act_SetNNObj = NN_03_enter_the_lair_wp2
Act_PlayerCanDock = false, sph02_to_inside
Act_ActTrig = TO_INSIDE_near_enter_door_ACTIVATE_AIRLOCK

[Trigger]
nickname = TO_INSIDE_near_enter_door_ACTIVATE_AIRLOCK
Cnd_DistVec = inside, Player, {{ sph02_to_inside.pos }}, 250
Act_DockRequest = {{ sph02_to_inside.name }}
Act_ActTrig = THE_INSIDE_welcome

[Trigger]
nickname = THE_INSIDE_welcome
Cnd_SystemEnter = sirius2_inside
{{ nn_goto_catacomb2.hide() }}
Act_ActTrig = THE_INSIDE_allow_exit

[Trigger]
nickname = THE_INSIDE_allow_exit
Cnd_True = no_params
Act_PlayerCanDock = false, sph02_ins_airlock_exit
Act_ActTrig = THE_INSIDE_activate_exit_airlock

[Trigger]
nickname = THE_INSIDE_activate_exit_airlock
Cnd_DistVec = inside, Player, {{ sph02_ins_airlock_exit.pos }}, 250
Act_DockRequest = {{ sph02_ins_airlock_exit.name }}
Act_ActTrig = EXIT_INSIDE_welcome

[Trigger]
nickname = EXIT_INSIDE_welcome
Cnd_SystemEnter = sirius2
;;;Act_SetNNObj = NN_04_go_through_entry_tunnels
Act_ActTrig = EXIT_INSIDE_inside_airlock
Act_ActTrig = LIGHTS_OFF_init

[Trigger]
nickname = EXIT_INSIDE_inside_airlock
Cnd_DistVec = inside, Player, {{ inside_to_sph02.pos }}, 500
Act_Destroy = {{ sph02_door03.name }}, SILENT
Act_PlaySoundEffect = lair_door_open
{{ sph02_door03_open.spawn() }}

Act_ActTrig = EXIT_INSIDE_close_door_back

[Trigger]
nickname = EXIT_INSIDE_close_door_back
Cnd_DistVec = outside, Player, {{ inside_to_sph02.pos }}, 400
Act_Destroy = {{ sph02_door03_open.name }}, SILENT
Act_ActTrig = EXIT_INSIDE_close_door_back_delay

[Trigger]
nickname = EXIT_INSIDE_close_door_back_delay
Cnd_Timer = 0.001
{{ sph02_door03_close.spawn() }}

[Trigger]
nickname = LIGHTS_OFF_init
{{ krieg_collector.spawn() }}







[;



Act_ActTrig = gen_destroyed


#!
[Trigger]
nickname = gen_destroyed
{{ cond.destroyed('generator', -1, 'ALL_IGNORE_LANDING') }}

{{ trigger.delay('init_death_lazer', 2) }}

[Trigger]
nickname = init_death_lazer
Cnd_True = no_params
{{ lazer1.spawn() }}


[Trigger]
nickname = death_lazer_damage
Cnd_True = no_params
Act_ActTrig = destroy_core_lights

{{ trigger.delay('krieg_first_appear', 0.1) }}


[Trigger]
nickname = krieg_first_appear
Cnd_True = no_params


{{ krieg1.spawn() }}




[ObjList]
nickname = ol_CHAMBER01
SetPriority = ALWAYS_EXECUTE
StayInRange = {{ direct.pos('beast01', 'beast01_chamber') }}, 600

[Trigger]
nickname = CHAMBER01_test
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('beast01', 'chamber_player') }}
{{ no_chamber.spawn_all_slide(objlist='ol_CHAMBER01') }}

{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'enemy') }}
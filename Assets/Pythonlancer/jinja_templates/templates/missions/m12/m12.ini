[Mission]
npc_ship_file = missions\m12\npcships.ini

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

;--------------------------------

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

[Trigger]
nickname = team_triggers
Cnd_True = no_params
{{ hatcher.invulnerable() }}
{{ alaric.invulnerable() }}
{{ darcy.invulnerable() }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}

[Trigger]
nickname = hide_team
Cnd_True = no_params
{{ hatcher.hide_all() }}
{{ alaric.hide_all() }}
{{ darcy.hide_all() }}

[Trigger]
nickname = hide_omaha
Cnd_True = no_params
{{ omaha1.destroy('SILENT') }}
{{ omaha2.destroy('SILENT') }}
{{ omaha3.destroy('SILENT') }}




;--------------------------

;;;gen msn ships

{{ ku_miner01.define('rm_roid_miner', 'm13_roid_miner', label='miners') }}
{{ ku_miner02.define('rm_roid_miner', 'm13_roid_miner', label='miners') }}
{{ ku_miner03.define('rm_roid_miner', 'm13_roid_miner', label='miners') }}

{{ fort_bush.define('rmbase_shipyard', 'rmbase_shipyard_m13') }}
{{ fort1.define('rmbase_shipyard', 'rmbase_shipyard_m13') }}
{{ fort2.define('rmbase_shipyard', 'rmbase_shipyard_m13') }}
{{ fort3.define('rmbase_shipyard', 'rmbase_shipyard_m13') }}
{{ fort4.define('rmbase_shipyard', 'rmbase_shipyard_m13') }}
{{ fort5.define('rmbase_shipyard', 'rmbase_shipyard_m13') }}

{{ counter_relative_obj.define('msn5_pod_counter') }}
{{ counter_assault.define('msn5_pod_counter') }}

{{ logos_checker.define('msn5_pod_counter') }}
{{ logos_dmg_90.define('msn5_pod_counter') }}
{{ logos_dmg_80.define('msn5_pod_counter') }}
{{ logos_dmg_70.define('msn5_pod_counter') }}
{{ logos_dmg_60.define('msn5_pod_counter') }}
{{ logos_dmg_50.define('msn5_pod_counter') }}
{{ logos_dmg_40.define('msn5_pod_counter') }}
{{ logos_dmg_30.define('msn5_pod_counter') }}


[MsnSolar]
nickname = prom_osiris
string_id = 096202
system = asf_prom
position = {{ prom_osiris.pos }}
orientation = {{ prom_osiris.orient }}
faction = asf_grp
archetype = o_osiris
loadout = li_battleship_02_cloak
radius = 0

[MsnSolar]
nickname = prom_osiris_emi
string_id = 1
system = asf_prom
position = {{ prom_osiris_emi.pos }}
orientation = {{ prom_osiris_emi.orient }}
faction = fc_uk_grp
archetype = ultra_emi
loadout = m13_ultra_emi
radius = 0

[MsnLoot]
nickname = OSIRIS_EMI
archetype = m13_emp
string_id = 1
rel_pos_obj = Player
rel_pos_offset = 0, -5, 0
velocity = 0, 0, 0
equip_amount = 1
health = 1.000000
Can_Jettison = true



{{ objects_definitions }}

;-------------------------------------
;waypoints

{{ nn_objectives_list }}




[Trigger]
nickname = initialize_init
InitState = ACTIVE
Cnd_True = no_params
;Act_ChangeState = SUCCEED
Act_ActTrig = tttt


[Trigger]
nickname = tttt
Cnd_Timer = 2
;Act_ActTrig = MINERS_init
;Act_ActTrig = ASSAULT_demo
Act_ActTrig = PROMETHEUS_demo




[Trigger]
nickname = MINERS_background_bship
Cnd_True = no_params
{{ direct.spawn_capital('asf_hq', 'm13_asf_hq_ku_ship01', road_ku_bship) }}
{{ direct.spawn_capital('asf_hq', 'm13_asf_hq_li_ship01', road_li_dread) }}

{{ road_ku_bship.invulnerable() }}
{{ road_ku_bship.invulnerable() }}
{{ road_li_dread.invulnerable() }}


{{ trigger.delay_direct('MINERS_bg_bship_delay', 1) }}
{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', 'road_ku_bship', 'road_li_dread') }}
{{ trigger.vibe_ship('REP_FRIEND_MAXIMUM', 'road_li_dread') }}
{{ trigger.vibe_ship('REP_NEUTRAL', 'road_ku_bship') }}


;;;###DESTROYER

{{ direct.ol_goto('asf_hq', 'road_ku_d1_target', 'ol_road_ku_d1_target', 'goto_no_cruise') }}
{{ direct.ol_goto('asf_hq', 'road_ku_d2_target', 'ol_road_ku_d2_target', 'goto_no_cruise') }}

[Trigger]
nickname = MINERS_background_destroyers
{{ direct.inside_pos('asf_hq', 'road_ku_d1', 1500) }}
{{ direct.spawn_capital('asf_hq', 'road_ku_d1', road_ku_destroyer1) }}
{{ direct.spawn_capital('asf_hq', 'road_ku_d2', road_ku_destroyer2) }}
{{ trigger.vibe_label_ship('REP_NEUTRAL', 'ku_destroyer') }}
{{ trigger.vibe_label('REP_NEUTRAL', 'ku_destroyer', 'friend') }}
Act_ActTrig = MINERS_background_destroyers_move

[Trigger]
nickname = MINERS_background_destroyers_move
{{ direct.inside_pos('asf_hq', 'road_ku_d1', 500) }}
Act_GiveObjList = {{ road_ku_destroyer1.name }}, ol_road_ku_d1_target
Act_GiveObjList = {{ road_ku_destroyer2.name }}, ol_road_ku_d2_target


{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'ku_destroyer') }}
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'ku_destroyer', 'friend') }}





;;;;### OMAHA
{{ direct.ol_goto('asf_hq', 'li_cr1_target1', 'ol_li_cr1_target1', 'goto_no_cruise') }}
{{ direct.ol_goto('asf_hq', 'li_cr2_target1', 'ol_li_cr2_target1', 'goto_no_cruise') }}
{{ direct.ol_goto('asf_hq', 'li_cr3_target1', 'ol_li_cr3_target1', 'goto_no_cruise') }}

[Trigger]
nickname = MINERS_omaha
Cnd_True = no_params
{{ direct.spawn_capital('asf_hq', 'li_cr1', omaha1) }}
{{ direct.spawn_capital('asf_hq', 'li_cr2', omaha2) }}
{{ direct.spawn_capital('asf_hq', 'li_cr3', omaha3) }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'omaha') }}  ; player
{{ trigger.vibe_label('REP_NEUTRAL', 'omaha', 'enemy') }}

[Trigger]
nickname = MINERS_omaha_move
Cnd_True = no_params
Act_GiveObjList = {{ omaha1.name }}, ol_li_cr1_target1
Act_GiveObjList = {{ omaha2.name }}, ol_li_cr2_target1
Act_GiveObjList = {{ omaha3.name }}, ol_li_cr3_target1

[Trigger]
nickname = MINERS_clear_init_ships
Cnd_True = no_params
{{ road_ku_bship.destroy('SILENT') }}
{{ road_li_dread.destroy('SILENT') }}
Act_ActTrig = hide_omaha



[Trigger]
nickname = MINERS_init
Cnd_True = no_params

Act_ActTrig = MINERS_background_bship
Act_ActTrig = MINERS_background_destroyers

{{ script.line(500) }}
{{ nn_asf_miner01.set() }}

{{ trigger.next('MINERS_first_end') }}
{{ script.ends(500) }}
{{ script.dialog(510, 520) }}

Act_ActTrig = MINERS_near_OMAHA
Act_ActTrig = MINERS_near_MINERS_far
Act_ActTrig = MINERS_near_MINERS_close
Act_ActTrig = MINERS_near_first_point

[Trigger]
nickname = MINERS_near_first_point
{{ direct.inside_pos('asf_hq', 'asf_miner01', 500) }}
{{ nn_asf_miner02.set() }}
{{ direct.spawn_capital('asf_hq', 'nagato', nagato) }}

Act_ActTrig = MINERS_omaha

[Trigger]
nickname = MINERS_near_OMAHA
{{ direct.inside_pos('asf_hq', 'li_cr3', 400) }}
{{ script.dialog(530, 540) }}
Act_ActTrig = MINERS_omaha_move

[ObjList]
nickname = ol_MINER_battle
StayInRange = {{ direct.pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere01') }}, 1500

[Trigger]
nickname = MINERS_near_MINERS_far
{{ direct.inside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere01', 1800) }}
{{ nagato.invulnerable }}

{{ ku_miner_defence.spawn_all_slide('ol_MINER_battle') }}

{{ ku_miner01.spawn() }}
{{ ku_miner02.spawn() }}
{{ ku_miner03.spawn() }}

{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'enemy') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'miner_defence') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'miners') }}


{{ ku_miner01.invulnerable(damage_from_player=True) }}
{{ ku_miner02.invulnerable(damage_from_player=True) }}
{{ ku_miner03.invulnerable(damage_from_player=True) }}


Act_ActTrig = MINERS_clear_init_ships
Act_ActTrig = MINERS_they_destroyed

[Trigger]
nickname = MINERS_restrict_leave
{{ direct.outside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere01', 3500) }}
Act_ChangeState = FAIL, 1





[Trigger]
nickname = MINERS_near_MINERS_close
{{ direct.inside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere01', 1000) }}
{{ script.line(550) }}
Act_PlayerEnemyClamp = 2, 4

{{ nn_destroy_miners.set() }}

{{ ku_miner01.mark() }}
{{ ku_miner02.mark() }}
{{ ku_miner03.mark() }}

{{ direct.spawn_ship('asf_hq', 'hatcher_miner', hatcher, ol='ol_MINER_battle') }}
{{ direct.spawn_ship('asf_hq', 'alaric_miner', alaric, ol='ol_MINER_battle') }}
{{ direct.spawn_ship('asf_hq', 'darcy_miner', darcy, ol='ol_MINER_battle') }}


{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'miner_defence', 'trent_wing') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_MAXIMUM', 'trent_wing', nagato.name) }}

Act_ActTrig = team_triggers




Act_ActTrig = MINERS_restrict_leave
Act_ActTrig = MINERS_they_destroyed

[Trigger]
nickname = TOBUSH_cleanup_miners
{{ direct.outside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere01', 5000) }}
Act_ActTrig = hide_team
Act_ActTrig = hide_omaha
{{ nagato.destroy('SILENT') }}
{{ road_ku_destroyer1.destroy('SILENT') }}
{{ road_ku_destroyer2.destroy('SILENT') }}
{{ ku_miner_defence.hide_all() }}
{{ li_miner_help.hide_all() }}

[Trigger]
nickname = MINERS_they_destroyed
Cnd_Destroyed = miners, -1, ALL_IGNORE_LANDING
Act_DeactTrig = MINERS_restrict_leave
Act_PlayerEnemyClamp = 1, 2

{{ li_miner_help.spawn_all_slide('ol_MINER_battle') }}
{{ direct.spawn_capital('asf_hq', 'li_cr1_miner', omaha1) }}
{{ direct.spawn_capital('asf_hq', 'li_cr2_miner', omaha2) }}
{{ direct.spawn_capital('asf_hq', 'li_cr3_miner', omaha3) }}

{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'enemy', 'asf') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'asf') }}

{{ script.line(600) }}

{{ trigger.next('BUSH_alert') }}
{{ script.ends(600) }}
{{ script.line(610) }}

{{ trigger.next('BUSH_init') }}
{{ script.ends(610) }}
{{ script.line(620) }}

Act_ActTrig = TOBUSH_background_battleships
Act_ActTrig = TOBUSH_cleanup_miners

{{ nn_to_bush01.set() }}
{{ direct.next_cond_inside_pos('asf_hq', 'to_bush01', 500) }}
{{ nn_to_bush02.set() }}
{{ direct.next_cond_inside_pos('asf_hq', 'to_bush02', 1000) }}

{{ script.line(630) }}

{{ nn_to_bush03.set() }}
{{ direct.next_cond_inside_pos('asf_hq', 'to_bush03', 500) }}
{{ nn_to_bush04.set() }}
{{ direct.next_cond_inside_pos('asf_hq', 'to_bush04', 500) }}
{{ nn_to_bush05.set() }}
Act_ActTrig = TOBUSH_prepare_entrance
{{ direct.next_cond_inside_pos('asf_hq', 'to_bush05', 500) }}
{{ nn_to_bush06.set() }}
Act_ActTrig = TOBUSH_exit_mines


[Trigger]
nickname = TOBUSH_background_battleships
{{ direct.inside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere03', 6000) }}
{{ direct.spawn_capital('asf_hq', 'm13_asf_hq_ku_prepares01', to_bush_ku_bship) }}
{{ direct.spawn_capital('asf_hq', 'm13_asf_hq_li_def01', to_bush_li_dread) }}

{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', 'to_bush_ku_bship', 'to_bush_li_dread') }}
{{ trigger.vibe_ship('REP_FRIEND_MAXIMUM', 'to_bush_li_dread') }}
{{ trigger.vibe_ship('REP_NEUTRAL', 'to_bush_ku_bship') }}

Act_ActTrig = TOBUSH_background_battleships_close

[Trigger]
nickname = TOBUSH_background_battleships_close
{{ direct.inside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere03', 4000) }}
{# {{ to_bush_li_dread.fuse('l_dreadnought_fuse') }} #}

Act_ActTrig = TOBUSH_background_battleships_outside

[Trigger]
nickname = TOBUSH_background_battleships_outside
{{ direct.outside_pos('asf_hq', 'Zone_m13_asf_hq_excl_sphere03', 5000) }}
{{ to_bush_ku_bship.destroy('SILENT') }}
{{ to_bush_li_dread.destroy('SILENT') }}



[Trigger]
nickname = TOBUSH_prepare_entrance
Cnd_True = no_params
Act_ActTrig = FORT_BUSH_spawn
Act_ActTrig = ASSAULT_spawn_bship


[Trigger]
nickname = FORT_BUSH_spawn
Cnd_True = no_params
{{ fort_bush.spawn() }}
{{ fort1.spawn() }}
{{ fort2.spawn() }}
{{ fort3.spawn() }}
{{ fort4.spawn() }}
{{ fort5.spawn() }}

[Trigger]
nickname = TOBUSH_exit_mines
{{ direct.inside_pos('asf_hq', 'Zone_m13_asf_hq_CORE_exclusion', 9000) }}
Act_ActTrig = ASSAULT_init
Act_ActTrig = TOBUSH_destroy

[Trigger]
nickname = TOBUSH_destroy
Cnd_True = no_params

{{ fort_bush.fuse('fuse_rmbase_xlarge') }}
Act_ActTrig = TOBUSH_destroyed

{{ trigger.delay_direct('TOBUSH_death_alarm', 3) }}
{{ script.line(700) }}

[Trigger]
nickname = TOBUSH_destroy_fast
Cnd_True = no_params

Act_ActTrig = TOBUSH_destroyed_reaction
{{ fort_bush.destroy() }}

[Trigger]
nickname = TOBUSH_destroyed
Cnd_Destroyed = {{ fort_bush.name }}
Act_ActTrig = TOBUSH_destroyed_reaction

[Trigger]
nickname = TOBUSH_destroyed_reaction
Cnd_True = no_params
{{ trigger.delay('TOBUSH_destroyed_delay', 1) }}
{{ script.dialog(710, 730) }}
{{ trigger.next('TOBUSH_assault_rush') }}
{{ script.ends(710) }}
Act_ActTrig = ASSAULT_begin


{{ trigger.next('ASSAULT_mission_asked') }}
{{ script.ends(730) }}

{{ trigger.delay_direct('ASSAULT_osiris_ask', 10) }}
{{ script.dialog(800, 830) }}





{{ direct.ol_goto('asf_hq', 'ku_assault1_target1', 'ol_ka1_target1', 'goto_no_cruise', near=50) }}
{{ direct.ol_goto('asf_hq', 'ku_assault2_target1', 'ol_ka2_target1', 'goto_no_cruise', near=50) }}
{{ direct.ol_goto('asf_hq', 'ku_assault3_target1', 'ol_ka3_target1', 'goto_no_cruise', near=50) }}

[Trigger]
nickname = ASSAULT_demo
Cnd_True = no_params
Act_RelocateShip = Player, {{ direct.pos_orient('asf_hq', 'player_assault_demo') }}
Act_ActTrig = ASSAULT_init
Act_ActTrig = FORT_BUSH_spawn
Act_ActTrig = ASSAULT_spawn_bship
{{ trigger.delay('TOBUSH_destroy_fast', 1) }}

[Trigger]
nickname = ASSAULT_init
Cnd_True = no_params
Act_ActTrig = ASSAULT_spawn_ships
{{ trigger.delay('ASSAULT_ship_setrep', 1) }}


[Trigger]
nickname = ASSAULT_begin
Cnd_True = no_params
{{ trigger.delay('ASSAULT_turn_bship', 1) }}
{{ nn_stop_assault_battleships.set() }}
{{ ku_assault1.mark() }}
{{ ku_assault2.mark() }}
{{ ku_assault3.mark() }}
{{ counter_assault.spawn() }}

Act_ActTrig = ASSAULT_completed



[Trigger]
nickname = ASSAULT_spawn_bship
Cnd_True = no_params
{{ direct.spawn_capital('asf_hq', 'ku_assault1', ku_assault1) }}
{{ direct.spawn_capital('asf_hq', 'ku_assault2', ku_assault2) }}
{{ direct.spawn_capital('asf_hq', 'ku_assault3', ku_assault3) }}
Act_ActTrig = ASSAULT_ku_assault1_lost_engines
Act_ActTrig = ASSAULT_ku_assault2_lost_engines
Act_ActTrig = ASSAULT_ku_assault3_lost_engines
{{ ku_assault1.invulnerable(damage_from_player=True) }}
{{ ku_assault2.invulnerable(damage_from_player=True) }}
{{ ku_assault3.invulnerable(damage_from_player=True) }}
Act_ActTrig = ASSAULT_ku_assault1_reach_final
Act_ActTrig = ASSAULT_ku_assault2_reach_final
Act_ActTrig = ASSAULT_ku_assault3_reach_final

{{ direct.spawn_capital('asf_hq', 'osiris1', osiris_on_assault) }}

[Trigger]
nickname = ASSAULT_spawn_ships
Cnd_True = no_params


{{ direct.spawn_capital('asf_hq', 'ku_cr_assault1', ku_cr_assault1) }}
{{ direct.spawn_capital('asf_hq', 'ku_cr_assault2', ku_cr_assault2) }}
{{ direct.spawn_capital('asf_hq', 'ku_cr_assault3', ku_cr_assault3) }}
{{ direct.spawn_capital('asf_hq', 'ku_cr_assault4', ku_cr_assault4) }}

{{ ku_f_assault1.spawn_all_slide() }}
{{ ku_f_assault2.spawn_all_slide() }}


{{ direct.spawn_capital('asf_hq', 'li_cr_defend1', li_cr_defend1) }}
{{ direct.spawn_capital('asf_hq', 'li_cr_defend2', li_cr_defend2) }}

{{ li_f_defend1.spawn_all_slide() }}
{{ li_f_defend2.spawn_all_slide() }}

Act_PlayerEnemyClamp = 1, 3


[Trigger]
nickname = ASSAULT_turn_bship
Cnd_True = no_params
Act_GiveObjList = {{ ku_assault1.name }}, ol_ka1_target1
Act_GiveObjList = {{ ku_assault2.name }}, ol_ka2_target1
Act_GiveObjList = {{ ku_assault3.name }}, ol_ka3_target1

[Trigger]
nickname = ASSAULT_ship_setrep
Cnd_True = no_params
{{ trigger.vibe_label_ship('REP_HOSTILE_THRESHOLD', 'ku_bship_assault') }}
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'li_fighter', 'enemy_fighter') }}
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'li_cruiser', 'ku_bship_assault') }}
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'li_cruiser', 'ku_destroyer') }}
{{ trigger.vibe_label_ship('REP_FRIEND_MAXIMUM', 'friend') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_THRESHOLD', 'ku_destroyer') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_THRESHOLD', 'enemy_fighter') }}
{{ trigger.vibe_label_ship('REP_HOSTILE_THRESHOLD', 'enemy') }}




[Trigger]
nickname = ASSAULT_ku_assault1_lost_engines
Cnd_HealthDec = {{ ku_assault1.name }}, 0.25
Act_GiveObjList = {{ ku_assault1.name }}, force_stop
Act_ActTrig = ASSAULT_counter_hit

[Trigger]
nickname = ASSAULT_ku_assault2_lost_engines
Cnd_HealthDec = {{ ku_assault2.name }}, 0.25
Act_GiveObjList = {{ ku_assault2.name }}, force_stop
Act_ActTrig = ASSAULT_counter_hit

[Trigger]
nickname = ASSAULT_ku_assault3_lost_engines
Cnd_HealthDec = {{ ku_assault3.name }}, 0.25
Act_GiveObjList = {{ ku_assault3.name }}, force_stop
Act_ActTrig = ASSAULT_counter_hit


[Trigger]
nickname = ASSAULT_ku_assault1_reach_final
{{ direct.inside_pos('asf_hq', 'ku_assault1_target1', 200, obj=ku_assault1.name) }}
Act_ActTrig = ASSAULT_reached_final

[Trigger]
nickname = ASSAULT_ku_assault2_reach_final
{{ direct.inside_pos('asf_hq', 'ku_assault2_target1', 200, obj=ku_assault2.name) }}
Act_ActTrig = ASSAULT_reached_final

[Trigger]
nickname = ASSAULT_ku_assault3_reach_final
{{ direct.inside_pos('asf_hq', 'ku_assault3_target1', 200, obj=ku_assault3.name) }}
Act_ActTrig = ASSAULT_reached_final

[Trigger]
nickname = ASSAULT_reached_final
Cnd_True = no_params
Act_ChangeState = FAIL, 1



[Trigger]
nickname = ASSAULT_counter_hit
Cnd_True = no_params
Act_AdjHealth = counter_assault, -0.4

[Trigger]
nickname = ASSAULT_completed
Cnd_Destroyed = counter_assault
{{ ku_assault1.unmark() }}
{{ ku_assault2.unmark() }}
{{ ku_assault3.unmark() }}

{{ script.dialog(850, 920) }}




[ObjList]
nickname = ol_prom_B
StayInRange = {{ direct.pos('asf_prom', 'prom_zone_b') }}, 2000




[Trigger]
nickname = PROMETHEUS_demo
Cnd_True = no_params
;Act_RelocateShip = Player, {{ direct.pos_orient('asf_prom', 'prom_player') }}
Act_RelocateShip = Player, {{ direct.pos_orient('asf_prom', 'prom_player_near1') }}
Act_ActTrig = PROM_spawn_caps
;Act_ActTrig = PROM_spawn_ships_A
;Act_ActTrig = PROM_spawn_ships_B
;Act_ActTrig = PROM_init

Act_ActTrig = PROM_the_osiris
;;Act_ActTrig = LOGOS_shield_down

[Trigger]
nickname = PROM_init
Cnd_Timer = 1
Act_ActTrig = PROM_near_logos
;Act_ActTrig = PROM_destroy_all

[Trigger]
nickname = PROM_spawn_caps
Cnd_True = no_params
{{ direct.spawn_capital_group('asf_prom', 'PROM_ORDER', damage_from_player=False) }}
{{ direct.spawn_capital_group('asf_prom', 'PROM_ASF') }}

[Trigger]
nickname = PROM_spawn_ships_A
{{ direct.inside_pos('asf_prom', 'prom_zone_a', 4000) }}
{{ or_prom_A.spawn_all_slide() }}
{{ asf_prom_A.spawn_all_slide() }}
Act_ActTrig = PROM_vibe

[Trigger]
nickname = PROM_spawn_ships_B
{{ direct.inside_pos('asf_prom', 'prom_zone_b', 3300) }}
{{ or_prom_B1.spawn_all_slide('ol_prom_B') }}
{{ asf_prom_B1.spawn_all_slide('ol_prom_B') }}
Act_ActTrig = PROM_vibe

[Trigger]
nickname = PROM_destroy_all
Cnd_Timer = 7
{{ direct.fuse_capital_group('PROM_ORDER', 'o_osiris_fuse') }}
{{ direct.fuse_capital_group('PROM_ASF', 'l_dreadnought_fuse') }}

{{ direct.ol_goto('asf_prom', 'prom_B_asf_01b', 'ol_prom_dread_B1', 'goto_no_cruise', near=200) }}
{{ direct.ol_goto('asf_prom', 'prom_B_asf_02b', 'ol_prom_dread_B2', 'goto_no_cruise', near=200) }}

[Trigger]
nickname = PROM_turn_dread_B
Cnd_Timer = 2
Act_GiveObjList = {{ prom_B_asf_01.name }}, ol_prom_dread_B1
Act_GiveObjList = {{ prom_B_asf_02.name }}, ol_prom_dread_B2

[Trigger]
nickname = PROM_vibe
Cnd_True = no_params
{{ trigger.vibe_label('REP_NEUTRAL', 'or_a', 'asf_b') }}
{{ trigger.vibe_label('REP_NEUTRAL', 'or_b', 'asf_a') }}
{{ trigger.vibe_label('REP_HOSTILE_MAXIMUM', 'or_a', 'asf_a') }}

[Trigger]
nickname = PROM_near_logos
{{ direct.inside_pos('asf_prom', 'prom_zone_b', 1500) }}
Act_ActTrig = PROM_turn_dread_B

[Trigger]
nickname = PROM_the_osiris
Cnd_True = no_params
Act_SpawnSolar = prom_osiris
Act_Invulnerable = prom_osiris, True
Act_Cloak = prom_osiris, true
Act_ActTrig = PROM_cloak_osiris

[Trigger]
nickname = PROM_cloak_osiris
Cnd_Timer = 2
Act_Cloak = prom_osiris, false
Act_ActTrig = PROM_turn_emi

[Trigger]
nickname = PROM_turn_emi
Cnd_Timer = 0.5
{{ trigger.delay_direct('PROM_emi_fx', 5) }}
{{ prom_osiris_emi.spawn() }}
{{ trigger.delay_direct('PROM_emi_load', 3) }}
Act_SpawnLoot = OSIRIS_EMI
{{ trigger.delay_direct('PROM_emi_bang', 0.1) }}
Act_Destroy = OSIRIS_EMI, EXPLODE
{{ trigger.delay_direct('PROM_emi_hide', 2) }}
{{ prom_osiris_emi.destroy() }}
Act_ActTrig = LOGOS_shield_down



[Trigger]
nickname = LOGOS_shield_down
Cnd_Timer = 1
{{ direct.fuse_capital_group('PROM_ORDER', 'logos_shield_down_fuse') }}

{{ trigger.vibe_ship('REP_HOSTILE_MAXIMUM', 'logos') }}

{{ direct.invulnerable_capital_group('PROM_ORDER', godmode=True, damage_from_player=True) }}

Act_ActTrig = LOGOS_destroy_shieldgen

{{ logos_checker.spawn() }}
{{ logos_dmg_90.spawn() }}
{{ logos_dmg_80.spawn() }}
{{ logos_dmg_70.spawn() }}
{{ logos_dmg_60.spawn() }}
{{ logos_dmg_50.spawn() }}
{{ logos_dmg_40.spawn() }}
{{ logos_dmg_30.spawn() }}

Act_ActTrig = LOGOS_damage_90
Act_ActTrig = LOGOS_damage_80
Act_ActTrig = LOGOS_damage_70
Act_ActTrig = LOGOS_damage_60
Act_ActTrig = LOGOS_damage_50
Act_ActTrig = LOGOS_damage_40
Act_ActTrig = LOGOS_damage_30

[Trigger]
nickname = LOGOS_damage_90
Cnd_HealthDec = {{ logos.name }}, 0.901
{{ logos_dmg_90.destroy('SILENT') }}

[Trigger]
nickname = LOGOS_damage_80
Cnd_HealthDec = {{ logos.name }}, 0.801
{{ logos_dmg_80.destroy('SILENT') }}

[Trigger]
nickname = LOGOS_damage_70
Cnd_HealthDec = {{ logos.name }}, 0.701
{{ logos_dmg_70.destroy('SILENT') }}

[Trigger]
nickname = LOGOS_damage_60
Cnd_HealthDec = {{ logos.name }}, 0.601
{{ logos_dmg_60.destroy('SILENT') }}

[Trigger]
nickname = LOGOS_damage_50
Cnd_HealthDec = {{ logos.name }}, 0.501
{{ logos_dmg_50.destroy('SILENT') }}

[Trigger]
nickname = LOGOS_damage_40
Cnd_HealthDec = {{ logos.name }}, 0.401
{{ logos_dmg_40.destroy('SILENT') }}

[Trigger]
nickname = LOGOS_damage_30
Cnd_HealthDec = {{ logos.name }}, 0.301
{{ logos_dmg_30.destroy('SILENT') }}



[Trigger]
nickname = LOGOS_destroy_shieldgen
Cnd_True = no_params
Act_ActTrig = LOGOS_shieldgen_destroyed

[Trigger]
nickname = LOGOS_shieldgen_destroyed
{{ logos_dmg_90.cond_destroyed() }}
Act_ActTrig = LOGOS_shieldgen_watch_reactor
Act_ActTrig = LOGOS_shieldgen_wait_for_watch

[Trigger]
nickname = LOGOS_shieldgen_watch_reactor
Cnd_DistShip = inside, {{ logos_checker.name }}, {{ logos_dmg_80.name }}, 1000
Act_DeactTrig = LOGOS_shieldgen_wait_for_watch
Act_ActTrig = LOGOS_destroy_reactor

[Trigger]
nickname = LOGOS_shieldgen_wait_for_watch
Cnd_Timer = 0.1
Act_ActTrig = LOGOS_shieldgen_failed_by_reactor

[Trigger]
nickname = LOGOS_destroy_reactor
Cnd_True = no_params
Act_ActTrig = LOGOS_reactor_destroyed

[Trigger]
nickname = LOGOS_reactor_destroyed
{{ logos_dmg_70.cond_destroyed() }}
Act_ActTrig = LOGOS_reactor_watch_tower
Act_ActTrig = LOGOS_reactor_wait_for_watch

[Trigger]
nickname = LOGOS_reactor_watch_tower
Cnd_DistShip = inside, {{ logos_checker.name }}, {{ logos_dmg_60.name }}, 1000
Act_DeactTrig = LOGOS_reactor_wait_for_watch
Act_ActTrig = LOGOS_destroy_tower

[Trigger]
nickname = LOGOS_reactor_wait_for_watch
Cnd_Timer = 0.1
Act_ActTrig = LOGOS_reactor_failed_by_tower

[Trigger]
nickname = LOGOS_destroy_tower
Cnd_True = no_params
Act_ActTrig = LOGOS_tower_destroyed

[Trigger]
nickname = LOGOS_tower_destroyed
{{ logos_dmg_30.cond_destroyed() }}
Act_ActTrig = LOGOS_init_landing








[Trigger]
nickname = LOGOS_shieldgen_failed_by_reactor
Cnd_True = no_params
Act_ChangeState = FAIL, 1

[Trigger]
nickname = LOGOS_reactor_failed_by_tower
Cnd_True = no_params
Act_ChangeState = FAIL, 1

[Trigger]
nickname = LOGOS_init_landing
Cnd_True = no_params
Act_Destroy = Player



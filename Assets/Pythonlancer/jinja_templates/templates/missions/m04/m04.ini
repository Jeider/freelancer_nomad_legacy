[Mission]
npc_ship_file = missions\m04\npcships.ini

;--------------------------------

[NPC]
nickname = npc_nnvoice
affiliation = li_n_grp
npc_ship_arch = nnvoice_shiparch
space_costume = , robot_body_E
individual_name = 089999
voice = nn_mod

[MsnShip]
nickname = nag_voice
NPC = npc_nnvoice
jumper = false
label = the_nnvoice
position = 0,-50000,0

[ObjList]
nickname = force_stop
Idle = no_params

[ObjList]
nickname = unform
BreakFormation = no_params

[ObjList]
nickname = unform_n_stop
BreakFormation = no_params
Idle = no_params

[ObjList]
nickname = follow_player
SetPriority = ALWAYS_EXECUTE
follow = Player

[Trigger]
nickname = Jacobo_Armor
Cnd_Timer = 1
Act_Invulnerable = jacobo, true, false, 0.500000

[Trigger]
nickname = Friend_Armor
Cnd_Timer = 1
Act_Invulnerable = jacobo, true, false, 0.500000
Act_Invulnerable = hassler, true, false, 0.500000
Act_Invulnerable = alaric, true, false, 0.500000

[Trigger]
nickname = Friend_Setrep
Cnd_Timer = 0.1
Act_SetVibeLblToShip = ally, Player, REP_FRIEND_MAXIMUM
Act_SetVibeShipToLbl = Player, ally, REP_FRIEND_MAXIMUM

;--------------------------------

[NNObjective]
nickname = ms4_0_dock_on_munchen_planet
state = HIDDEN
type = rep_inst, rh_mnh, 094001, 094001, 37600, 0, -27400, rh_mnh_01_dock

[NNObjective]
nickname = ms4_00_find_vendor_in_bar
state = HIDDEN
type = ids, 094002

[NNObjective]
nickname = ms4_01_launch_to_space
state = HIDDEN
type = ids, 094003

[NNObjective]
nickname = ms4_02_find_jacobo_in_space
state = HIDDEN
type = ids, 094004

[NNObjective]
nickname = ms4_03_goto_waypoint
state = HIDDEN
type = navmarker, rh_mnh, 094024, 094024, 30000, 0, 0

[NNObjective]
nickname = ms4_03_goto_rh_biz
state = HIDDEN
type = rep_inst, rh_mnh, 094005, 094005, 43000, 2000, 12000, mnh_to_biz

[NNObjective]
nickname = ms4_04_jumpto_rh_biz
state = HIDDEN
type = rep_inst, rh_mnh, 094006, 094006, 43000, 2000, 12000, mnh_to_biz

[NNObjective]
nickname = ms4_05_join_rh_officer_formation
state = HIDDEN
type = ids, 094007

[NNObjective]
nickname = ms4_05_follow_rh_officer
state = HIDDEN
type = ids, 094008

[NNObjective]
nickname = ms4_06_destroy_enemy_and_save_jacobo
state = HIDDEN
type = ids, 094009

[NNObjective]
nickname = ms4_07_destroy_battleship_reactor
state = HIDDEN
type = rep_inst, rh_biz, 094010, 094010, -14762, -25, -23543, battleship_reactor
;type = navmarker, rh_biz, 021924, 021924, -14760, 2500, -23500

[NNObjective]
nickname = ms4_08_fly_to_sig8
state = HIDDEN
type = rep_inst, rh_biz, 094011, 094011, -10000, 0, -100000, biz_to_sig8_alt

[NNObjective]
nickname = ms4_09_jump_to_sig8
state = HIDDEN
type = rep_inst, rh_biz, 094012, 094012, -10000, 0, -100000, biz_to_sig8_alt

[NNObjective]
nickname = ms4_09_out_of_nebula_waypoint
state = HIDDEN
type = navmarker, sig8, 094015, 094015, -55000, 0, -10000

[NNObjective]
nickname = ms4_10_defend_vendor
state = HIDDEN
type = ids, 094013

[NNObjective]
nickname = ms4_11_destroy_fighters
state = HIDDEN
type = ids, 094014


[NNObjective]
nickname = ms4_12_go_to_outpost_waypoint
state = HIDDEN
type = navmarker, sig8, 094015, 094015, -10000, 0, 15000

[NNObjective]
nickname = ms4_12_go_to_forbes_waypoint
state = HIDDEN
type = navmarker, sig8, 094015, 094015, 12000, 0, 14000

[NNObjective]
nickname = ms4_13_destroy_corsairs
state = HIDDEN
type = ids, 094016

[NNObjective]
nickname = ms4_14_go_to_forbes_jumphole
state = HIDDEN
type = rep_inst, sig8, 094017, 094017, 40000, 0, 40000, sig8_to_for

[NNObjective]
nickname = ms4_15_wait_for_activation
state = HIDDEN
type = ids, 094018

[NNObjective]
nickname = ms4_16_be_near_jumphole
state = HIDDEN
type = rep_inst, sig8, 094019, 094019, 40000, 0, 40000, sig8_to_for

[NNObjective]
nickname = ms4_16_use_jumphole
state = HIDDEN
type = rep_inst, sig8, 094019, 094019, 40000, 0, 40000, sig8_to_for

[NNObjective]
nickname = ms4_17_go_to_shipyard
state = HIDDEN
type = rep_inst, li_for, 094020, 094020, 25000, -18000, 44000, li_for_03

[NNObjective]
nickname = ms4_18_use_tradelane
state = HIDDEN
type = rep_inst, li_for, 094021, 094021, 25187, -18208, 40695, LI_FOR_F_Trade_Lane_Ring_L2_06

[NNObjective]
nickname = ms4_19_dock_on_planet_forbes
state = HIDDEN
type = rep_inst, li_for, 094022, 094022, 31888, 0, -24814, li_for_dock_ring

[NNObjective]
nickname = ms4_20_meet_hatcher_in_bar
state = HIDDEN
type = ids, 094023

;--------------------------------

[Trigger]
nickname = init_ms4
Cnd_True = no_params
InitState = ACTIVE
Act_ActTrig = init_objective
Act_ActTrig = ms4_create_vendor

Act_ActTrig = first_message_not_in_space
Act_ActTrig = first_message_in_space
Act_ActTrig = first_message_on_planet
Act_ActTrig = vendorbase_open_forever


[Trigger]
nickname = first_message_not_in_space
Cnd_InSpace = false
Act_DeActTrig = first_message_in_space

[Trigger]
nickname = first_message_in_space
Cnd_InSpace = true
Act_ActTrig = first_message_init_message
Act_DeActTrig = first_message_on_planet

[Trigger]
nickname = first_message_on_planet
Cnd_LaunchComplete = Player
Act_ActTrig = first_message_wait_and_call

[Trigger]
nickname = first_message_wait_and_call
Cnd_Timer = 1
Act_ActTrig = first_message_init_message

[Trigger]
nickname = first_message_init_message
Cnd_True = no_params
Act_ActTrig = vendor_message

[Trigger]
nickname = vendorbase_open_forever
Cnd_True = no_params
repeatable = true
Act_SetVibeOfferBaseHack = rh_mnh_01_dock

[Trigger]
nickname = vendor_message
Cnd_Timer = 2
;Vendor: Greetings, Freelancer
Act_EtherComm = echo_m04, 094501, Player, DX_M04_0000_jacobo, -1, pl_male1_head, pi_pirate2_body
Act_NNIds = 094801, HISTORY



[Trigger]
nickname = init_objective
Cnd_True = no_params
Act_NNPath = 094001, 094001, rh_mnh_01_dock, rh_mnh

[Trigger]
nickname = ms4_create_vendor
system = rh_mnh
Cnd_LocEnter = Bar, rh_mnh_01_base
Act_AddRTC = missions\m04\vendor_msn.ini
Act_ActTrig = ms4_do_accept
repeatable = true

[Trigger]
nickname = ms4_do_accept
system = rh_mnh
Cnd_MsnResponse = accept
Act_DeactTrig = ms4_create_vendor
Act_RemoveRTC = missions\m04\vendor_msn.ini
Act_PlayerCanDock = false
Act_RandomPop = false

Act_DeActTrig = first_message_in_space
Act_DeActTrig = first_message_not_in_space
Act_DeActTrig = first_message_on_planet
Act_DeActTrig = vendorbase_open_forever

Act_SetNNObj = ms4_01_launch_to_space
Act_SetTitle = 094301
Act_SetOffer = 094302
Act_ActTrig = ms4_launch

Act_ActTrig = MSN_REP_BEFORE

;debug
;Act_SetShipAndLoadout = rh_fighter, lod_m04_player

;------------ NPCS

[NPC]
nickname = npc_outcast
affiliation = fc_uk_grp
npc_ship_arch = ms4_outcast_ship
space_costume = pl_male1_head, pi_pirate2_body, comm_ge_generic2
individual_name = 094206
voice = pilot_f_mil_m01

[MsnShip]
nickname = jacobo
NPC = npc_outcast
jumper = true
label = ally

[NPC]
nickname = npc_hassler
affiliation = fc_uk_grp
npc_ship_arch = ms4_hassler_ship
individual_name = 094204
voice = pilot_f_mil_m01

[MsnShip]
nickname = hassler
NPC = npc_hassler
jumper = true
label = ally
label = ally_fighter

[NPC]
nickname = npc_alaric
affiliation = fc_uk_grp
npc_ship_arch = ms4_alaric_ship
space_costume = rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
individual_name = 094203
voice = pilot_f_mil_m01

[MsnShip]
nickname = alaric
NPC = npc_alaric
jumper = true
label = ally
label = ally_fighter

;-----------------

[Trigger]
nickname = ms4_launch
Cnd_InSpace = true
Act_SpawnShip = jacobo, no_ol, 37000, 0, -26600, 0.7, 0, -0.3, 0
Act_ActTrig = ms4_launch_complete

[Trigger]
nickname = ms4_launch_complete
Cnd_LaunchComplete = Player
Act_MarkObj = jacobo, 1
Act_ActTrig = Jacobo_Armor
Act_ActTrig = Friend_Setrep
Act_SetNNObj = ms4_02_find_jacobo_in_space
Act_ActTrig = ms4_space_msg_hello
Act_EnableManeuver = formation, false

[Trigger]
nickname = ms4_space_msg_hello
Cnd_Timer = 2
;Trent: Dromader? Are you insane?
Act_EtherComm = echo_m04_player, 094502, Player, DX_M04_0010_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094802, HISTORY
Act_ActTrig = jacobo_join_munchen_player_formation

[Trigger]
nickname = jacobo_join_munchen_player_formation
Cnd_CommComplete = DX_M04_0010_trent
Act_GiveObjList = jacobo, follow_player
Act_SetNNObj = ms4_03_goto_waypoint
Act_ActTrig = munchen_careful_dialog

[Trigger]
nickname = munchen_careful_dialog
Cnd_True = no_params
;Jacobo: This is best ship
Act_EtherComm = echo_m04, 094503, Player, DX_M04_0020_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094803, HISTORY
;Trent: You can die
Act_EtherComm = echo_m04_player, 094504, Player, DX_M04_0030_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094804, HISTORY
;Jacobo: Ok, we need to create a copy
Act_EtherComm = echo_m04, 094505, Player, DX_M04_0040_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094805, HISTORY
Act_ActTrig = munchen_careful_dialog_done

[Trigger]
nickname = munchen_careful_dialog_done
Cnd_CommComplete = DX_M04_0040_jacobo
Act_ActTrig = munchen_making_copy_done

[Trigger]
nickname = munchen_making_copy_done
Cnd_Timer = 5
;Trent: Done. How we get to Liberty?
Act_EtherComm = echo_m04_player, 094506, Player, DX_M04_0050_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094806, HISTORY
;Jacobo: Not from Kusari
Act_EtherComm = echo_m04, 094507, Player, DX_M04_0060_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094807, HISTORY
;Jacobo: We need going to Bizmark
Act_EtherComm = echo_m04, 094508, Player, DX_M04_0070_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094808, HISTORY
Act_ActTrig = munchen_road_to_bizmark

[Trigger]
nickname = munchen_road_to_bizmark
Cnd_CommComplete = DX_M04_0070_jacobo
Act_SetNNObj = ms4_03_goto_rh_biz
Act_ActTrig = around_bizmark_gate
Act_NagDistTowards = OBJ, goto_bizmark_gate, nag_voice, MNH_TO_BIZ, 090001, 3000, NAG_ALWAYS
Act_ActTrig = munchen_last_dialog

[Trigger]
nickname = munchen_last_dialog
Cnd_Timer = 1
;Trent: That's not logical
Act_EtherComm = echo_m04_player, 094509, Player, DX_M04_0080_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094809, HISTORY
;Jacobo: Another ideas?
Act_EtherComm = echo_m04, 094510, Player, DX_M04_0090_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094810, HISTORY
;Trent: No one
Act_EtherComm = echo_m04_player, 094511, Player, DX_M04_0100_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094811, HISTORY

[Trigger]
nickname = around_bizmark_gate
Cnd_DistShip = inside, Player, mnh_to_biz, 3000
Act_NagOff = goto_bizmark_gate
Act_NagDistLeaving = jumpin_bizmark, nag_voice, MNH_TO_BIZ, 090003, 1, 10, NAG_ALWAYS
Act_SetNNObj = ms4_04_jumpto_rh_biz
Act_PlayerCanDock = False, MNH_TO_BIZ
Act_ActTrig = welcome_to_bizmark
;---


[Trigger]
nickname = welcome_to_bizmark
Cnd_NPCSystemEnter = rh_biz, jacobo
Act_NagOff = jumpin_bizmark
Act_ActTrig = bizmark_welcome_complete
Act_RandomPop = False
Act_ActTrig = Jump_biz_complete

[Trigger]
nickname = bizmark_welcome_complete
Cnd_Timer = 1
Act_ActTrig = OFFICER_SCENE
Act_GiveObjList = jacobo, unform_n_stop

[Trigger]
nickname = Jump_biz_complete
Cnd_JumpInComplete = Player
Act_ActTrig = OFFICER_SCENE
Act_DeActTrig = bizmark_welcome_complete

[Trigger]
nickname = OFFICER_SCENE
Cnd_Timer = 0.1
Act_PlayMusic = none, none, none, music_danger
Act_ActTrig = BEGIN_OFFICER_SCENE

;-----------RH_FLEET_POINT_1------------



[NPC]
nickname = npc_rh_officer
affiliation = rh_grp
npc_ship_arch = ms4_rh_elite_ship
space_costume = rh_captain_head, rh_male_elite_body, comm_rh_elite
individual_name = 094205
voice = pilot_f_mil_m01

[NPC]
nickname = npc_rh_elite
affiliation = rh_grp
npc_ship_arch = ms4_rh_elite_ship
voice = pilot_f_mil_m01

[NPC]
nickname = npc_rh_fighter
affiliation = rh_grp
npc_ship_arch = ms4_rh_fighter_ship
voice = pilot_f_mil_m01

[MsnShip]
nickname = p1_rh_elite_1
NPC = npc_rh_officer
label = officer

[MsnShip]
nickname = p1_rh_elite_2
NPC = npc_rh_elite
label = officer
random_name = true

[MsnShip]
nickname = p1_rh_elite_3
NPC = npc_rh_elite
label = point1
random_name = true

[MsnShip]
nickname = p1_rh_elite_4
NPC = npc_rh_elite
label = officer
random_name = true

[MsnShip]
nickname = p1_rh_elite_5
NPC = npc_rh_elite
label = officer
random_name = true

[MsnFormation]
nickname = ms4_bizgate_formation
formation = ms4_officer_wing
ship = p1_rh_elite_1
ship = p1_rh_elite_2
ship = p1_rh_elite_3
ship = p1_rh_elite_4
ship = p1_rh_elite_5

[ObjList]
nickname = officer_goto_player
avoidance = false
GotoVec = goto_no_cruise, -44200, 0, -29800, 100, false

[ObjList]
nickname = officer_goto_player_real
avoidance = false
GotoShip = goto_no_cruise, Player, 100, false

[Trigger]
nickname = officer_scene_setrep
Cnd_True = no_params
Act_SetVibeLbl = ally, officer, REP_NEUTRAL
Act_SetVibeLbl = officer, ally, REP_NEUTRAL
Act_SetVibeLblToShip = officer, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, officer, REP_NEUTRAL

[Trigger]
nickname = officer_scene_setrep_enemy
Cnd_True = no_params
Act_SetVibeLbl = ally, officer, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = officer, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = officer, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, officer, REP_HOSTILE_MAXIMUM

;-------======================---------

[Trigger]
nickname = BEGIN_OFFICER_SCENE
Cnd_True = no_params
Act_Pobjidle = no_params
Act_SpawnFormation = ms4_bizgate_formation, -43000, 0, -29590, 0.55, 0, 0.45, 0
Act_CallThorn = scripts\mod\m04_officer_scene01.thn, p1_rh_elite_1
Act_GiveObjList = jacobo, unform_n_stop
Act_GiveObjList = Player, force_stop
Act_GiveObjList = p1_rh_elite_1, officer_goto_player
Act_ActTrig = officer_scene_setrep
Act_ActTrig = OFFICER_DIALOG_BEFORE_CHOICE
Act_ActTrig = BIZ_JUMP_PLAYER_POINT
Act_EnableManeuver = formation, false

[Trigger]
nickname = BIZ_JUMP_PLAYER_POINT
Cnd_Timer = 1
Act_Pobjidle = no_params
Act_RelocateShip = Player, -44200, 0, -29800, 0.45, 0, -0.55, 0
Act_RelocateShip = jacobo, -44240, 0, -29830, 0.45, 0, -0.55, 0
Act_GiveObjList = p1_rh_elite_1, officer_goto_player_real
Act_ActTrig = OFFICER_SCENE_WRONG_LEAVING

[Trigger]
nickname = OFFICER_SCENE_WRONG_LEAVING
Cnd_DistVec = outside, Player, -44200, 0, -29800, 2000
Act_ChangeState = FAIL, 094101 ; going away failure


[Trigger]
nickname = OFFICER_DIALOG_BEFORE_CHOICE
Cnd_Timer = 12
Act_CallThorn = scripts\mod\m04_officer_scene02.thn, p1_rh_elite_1
;Officer: Stay on your positions! Right now!
Act_EtherComm = echo_m04, 094512, Player, DX_M04_0110_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094812, HISTORY
;Officer: (2)
Act_EtherComm = echo_m04, 094513, Player, DX_M04_0120_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094813, HISTORY

Act_ActTrig = OFFICER_DIALOG_DONE

[Trigger]
nickname = OFFICER_DIALOG_DONE
Cnd_CommComplete = DX_M04_0120_officer
Act_ActTrig = INIT_TRAP_CHOICE

[Trigger]
nickname = INIT_TRAP_CHOICE
Cnd_Timer = 1
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_SetNNObj = ms4_05_join_rh_officer_formation
Act_MarkObj = p1_rh_elite_1, 1
Act_ActTrig = TRAP_CHOICE_TIMER_SOFT
Act_ActTrig = TRAP_CHOICE_FORMATION
Act_EnableManeuver = formation, true

[Trigger]
nickname = TRAP_CHOICE_TIMER_SOFT
Cnd_Timer = 10
;Officer: Do objective!
Act_EtherComm = echo_m04, 094650, Player, DX_M04_9100_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094950, HISTORY
Act_ActTrig = TRAP_CHOICE_TIMER_HARD

[Trigger]
nickname = TRAP_CHOICE_TIMER_HARD
Cnd_Timer = 15
Act_ChangeState = FAIL, 094102 ; Formation not created

[Trigger]
nickname = TRAP_CHOICE_FORMATION
Cnd_PlayerManeuver = Formation, p1_rh_elite_1
Act_LockManeuvers = True
Act_MarkObj = p1_rh_elite_1, 0
Act_SetNNObj = ms4_05_follow_rh_officer
Act_GiveObjList = jacobo, follow_player
Act_DeActTrig = OFFICER_SCENE_WRONG_LEAVING
Act_DeActTrig = TRAP_CHOICE_TIMER_SOFT
Act_DeActTrig = TRAP_CHOICE_TIMER_HARD
Act_ActTrig = TRAP_LETSGO_DIALOG

[Trigger]
nickname = TRAP_LETSGO_DIALOG
Cnd_True = no_params
;Trent: Ok. We surrender
Act_EtherComm = echo_m04_player, 094514, Player, DX_M04_0130_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094814, HISTORY
Act_ActTrig = ROAD_TO_KELN

;-------======================---------

[ObjList]
nickname = officer_goto_keln_first_point
SetPriority = ALWAYS_EXECUTE
avoidance = false
GotoVec = goto_cruise, -16500, 0, -23100, 100, false

[ObjList]
nickname = officer_goto_keln_second_point
SetPriority = ALWAYS_EXECUTE
avoidance = false
GotoVec = goto_no_cruise, -15100, 0, -23100, 100, false


[NPC]
nickname = npc_rh_cruiser
affiliation = rh_grp
npc_ship_arch = ms4_rh_cruiser_ship
individual_name = 094207
voice = pilot_f_mil_m02

[NPC]
nickname = npc_rh_bship
affiliation = rh_grp
npc_ship_arch = ms4_rh_battleship_ship
individual_name = 094202
voice = pilot_f_mil_m02

[NPC]
nickname = npc_rh_gunboat
affiliation = rh_grp
npc_ship_arch = ms4_rh_gunboat_ship
individual_name = 094208
voice = pilot_f_mil_m02

[MsnShip]
nickname = rh_gunboat_1
NPC = npc_rh_gunboat
label = keln_capship

[MsnShip]
nickname = rh_gunboat_2
NPC = npc_rh_gunboat
label = keln_capship

[MsnShip]
nickname = rh_gunboat_3
NPC = npc_rh_gunboat
label = keln_capship

[MsnShip]
nickname = rh_cruiser_1
NPC = npc_rh_cruiser
label = keln_capship

[MsnShip]
nickname = rh_cruiser_2
NPC = npc_rh_cruiser
label = keln_capship


[MsnSolar]
nickname = rh_battleship_1
string_id = 094202
system = rh_biz
position = -15000, 0, -23600
orientation = 0.5, 0, 0.5, 0
faction = rh_grp
archetype = rh_battleship_ms4_solar
loadout = rh_battleship_01_no_guns
label = keln_capship
radius = 0




[MsnShip]
nickname = rh_battleship_1_old
NPC = npc_rh_bship
label = keln_capship

[Trigger]
nickname = SPAWN_KELN_SHIPS
Cnd_True = no_params
Act_SpawnSolar = rh_battleship_1
Act_SpawnShip = rh_cruiser_1, no_ol, -14600, 0, -23000, 1, 0, 0, 0
Act_SpawnShip = rh_cruiser_2, no_ol, -14500, 0, -23400, 1, 0, 0, 0
Act_SpawnShip = rh_gunboat_1, no_ol, -14800, 0, -22900, 1, 0, 0, 0
Act_SpawnShip = rh_gunboat_2, no_ol, -15000, 0, -22900, 1, 0, 0, 0
Act_SpawnShip = rh_gunboat_3, no_ol, -15200, 0, -22900, 1, 0, 0, 0

[Trigger]
nickname = keln_ships_setrep
Cnd_Timer = 0.1
Act_SetVibeLbl = ally, keln, REP_NEUTRAL
Act_SetVibeLbl = keln, ally, REP_NEUTRAL
Act_SetVibeLblToShip = keln, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, keln, REP_NEUTRAL
Act_SetVibeLblToShip = keln_capship, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, keln_capship, REP_NEUTRAL

[Trigger]
nickname = keln_ships_setrep_enemy
Cnd_Timer = 0.1
Act_SetVibeLbl = ally, keln, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = keln, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = keln, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, keln, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = keln_capship, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, keln_capship, REP_HOSTILE_MAXIMUM
;-------======================---------


[Trigger]
nickname = ROAD_TO_KELN
Cnd_CommComplete = DX_M04_0130_trent
Act_GiveObjList = p1_rh_elite_1, officer_goto_keln_first_point
Act_ActTrig = ROAD_TO_KELN_DIALOG
Act_ActTrig = NEAR_KELN_POINT_1
Act_ActTrig = NEAR_KELN_POINT_2
Act_ActTrig = NEAR_KELN_SPAWN_SHIPS

[Trigger]
nickname = NEAR_KELN_SPAWN_SHIPS
Cnd_Timer = 5
Act_ActTrig = SPAWN_KELN_SHIPS
Act_ActTrig = keln_ships_setrep

[Trigger]
nickname = ROAD_TO_KELN_DIALOG
Cnd_Timer = 2
;Officer: Go with us to Keln station
Act_EtherComm = echo_m04, 094515, Player, DX_M04_0140_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094815, HISTORY
;Jacobo: That's impossible!
Act_EtherComm = echo_m04, 094516, Player, DX_M04_0150_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094816, HISTORY
;Officer: You want to die?
Act_EtherComm = echo_m04, 094517, Player, DX_M04_0160_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094817, HISTORY
;Trent: Calm down, Jacobo
Act_EtherComm = echo_m04_player, 094518, Player, DX_M04_0170_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094818, HISTORY

[Trigger]
nickname = NEAR_KELN_POINT_1
Cnd_DistVec = inside, p1_rh_elite_1, -16500, 0, -23100, 500
Act_GiveObjList = p1_rh_elite_1, officer_goto_keln_second_point

[Trigger]
nickname = NEAR_KELN_POINT_2
Cnd_DistVec = inside, p1_rh_elite_1, -15300, 0, -23100, 500
Act_ActTrig = NEAR_KELN_DIALOG
Act_ActTrig = NEAR_KELN

;SAVE THERE

[Trigger]
nickname = NEAR_KELN
Cnd_True = no_params
Act_GiveObjList = pl_rh_elite_1, force_stop

[Trigger]
nickname = NEAR_KELN_DIALOG
Cnd_Timer = 1
;Reichman: Good job, officer
Act_EtherComm = echo_m04, 094519, Player, DX_M04_0180_reichman, -1, rh_reichman_head, rh_reichman_body, prop_neuralnet_A_right
Act_NNIds = 094819, HISTORY
;Reichman: Destroy the Freelancer
Act_EtherComm = echo_m04, 094520, Player, DX_M04_0190_reichman, -1, rh_reichman_head, rh_reichman_body, prop_neuralnet_A_right
Act_NNIds = 094820, HISTORY
;Officer: Why?...
Act_EtherComm = echo_m04, 094521, Player, DX_M04_0200_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094821, HISTORY
;Reichman: Do it NOW!
Act_EtherComm = echo_m04, 094522, Player, DX_M04_0210_reichman, -1, rh_reichman_head, rh_reichman_body, prop_neuralnet_A_right
Act_NNIds = 094822, HISTORY
Act_ActTrig = BEFORE_KELN_BATTLE

[Trigger]
nickname = BEFORE_KELN_BATTLE
Cnd_CommComplete = DX_M04_0210_reichman
Act_Save = KELN_BATTLE_SAVE, 094303
Act_ActTrig = INIT_KELN_BATTLE

[Trigger]
nickname = KELN_BATTLE_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = KELN_BATTLE_SAVE_spawn_units

[MsnSolar]
nickname = battleship_reactor
string_id = 094201
system = rh_biz
position = -14762, -25, -23545
orientation = 0.5, 0, 0.5, 0
archetype = msn4_rh_battleship_shield
reputation = rh_grp
radius = 0


[Trigger]
nickname = KELN_BATTLE_SAVE_spawn_units
Cnd_Timer = 0.1
Act_RelocateShip = Player, -15400, 30, -23100, 0.5, 0, -0.5, 0
Act_SpawnShip = jacobo, no_ol, -15400, 30, -23150, 0.5, 0, -0.5, 0
Act_SpawnShip = nag_voice
Act_ActTrig = Jacobo_Armor
Act_SpawnFormation = ms4_bizgate_formation, -15300, 0, -23100, 0.5, 0, -0.5, 0
Act_ActTrig = SPAWN_KELN_SHIPS
Act_ActTrig = officer_scene_setrep
Act_ActTrig = keln_ships_setrep
Act_ActTrig = INIT_KELN_BATTLE

[Trigger]
nickname = INIT_KELN_BATTLE
Cnd_Timer = 0.1
Act_SpawnShip = hassler, ol_KELN_BATTLE_join_player, -12200, 100, -23500, 0.4, 0, 0.6, 0
Act_SpawnShip = alaric, ol_KELN_BATTLE_join_player, -12250, 110, -23500, 0.4, 0, 0.6, 0
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_MarkObj = hassler, 1
Act_MarkObj = alaric, 1
Act_MarkObj = jacobo, 1
Act_ActTrig = FRIEND_ARRIVE
Act_GiveObjList = p1_rh_elite_1, unform
Act_GiveObjList = p1_rh_elite_2, unform
Act_GiveObjList = p1_rh_elite_3, unform
Act_GiveObjList = p1_rh_elite_4, unform
Act_GiveObjList = p1_rh_elite_5, unform
Act_GiveObjList = Player, unform
Act_LockManeuvers = False
Act_EnableManeuver = formation, false
Act_ActTrig = KELN_BATTLE_jacobo_reform
Act_PlayMusic = none, none, none, music_danger

[Trigger]
nickname = KELN_BATTLE_jacobo_reform
Cnd_Timer = 0.1
Act_GiveObjList = Jacobo, follow_player

[Trigger]
nickname = FRIEND_ARRIVE
Cnd_Timer = 1
Act_PlayMusic = none, none, none, music_reveal_enemy_position_of_strength
Act_CallThorn = scripts\mod\m04_friends_arrive_hassler.thn, hassler
Act_ActTrig = FRIEND_ARRIVE_hassler_dialog

Act_Pobjidle = no_params
Act_RelocateShip = Player, -15400, 30, -23100, 0.5, 0, -0.5, 0
Act_RelocateShip = jacobo, -15400, 30, -23150, 0.5, 0, -0.5, 0

[Trigger]
nickname = FRIEND_ARRIVE_hassler_dialog
Cnd_Timer = 1
;Hassler: Stop it right now!
Act_EtherComm = echo_m04, 094519, Player, DX_M04_0220_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094819, HISTORY
Act_ActTrig = FRIEND_ARRIVE_hassler_dialog_done

[Trigger]
nickname = FRIEND_ARRIVE_hassler_dialog_done
Cnd_CommComplete = DX_M04_0220_hassler
Act_ActTrig = FRIEND_ARRIVE_alaric_dialog

[Trigger]
nickname = FRIEND_ARRIVE_alaric_dialog
Cnd_Timer = 1
Act_CallThorn = scripts\mod\m04_friends_arrive_alaric.thn, alaric
;Alaric: Launch torpedoes
Act_EtherComm = echo_m04, 094524, Player, DX_M04_0230_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094824, HISTORY
Act_ActTrig = FRIEND_ARRIVE_alaric_dialog_done

[Trigger]
nickname = FRIEND_ARRIVE_alaric_dialog_done
Cnd_CommComplete = DX_M04_0230_alaric
Act_ActTrig = FRIEND_ARRIVE_torpedo_launched
Act_PlaySoundEffect = fire_torpedo
Act_LightFuse = alaric, fuse_msn4_alaric_torpedo_Fire

[Trigger]
nickname = FRIEND_ARRIVE_torpedo_launched
Cnd_Timer = 1
Act_ActTrig = FRIEND_ARRIVE_Camera_Force_Revert

[Trigger]
nickname = FRIEND_ARRIVE_Camera_Force_Revert
Cnd_True = no_params
Act_RevertCam = no_params
Act_Invulnerable = Player, false
Act_ActTrig = KELN_BATTLE_first_dialog
Act_ActTrig = DESTROY_BIZ_CRUISERS
Act_ActTrig = Hassler_understanding_the_hit
Act_SetVibeLbl = ally_fighter, keln, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = ally_fighter, officer, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = Hassler_understanding_the_hit
Cnd_Timer = 1
Act_SetVibeLbl = keln, ally_fighter, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = officer, ally_fighter, REP_HOSTILE_MAXIMUM
Act_GiveObjList = p1_rh_elite_1, unform
Act_GiveObjList = p1_rh_elite_2, unform
Act_GiveObjList = p1_rh_elite_3, unform
Act_GiveObjList = p1_rh_elite_4, unform
Act_GiveObjList = p1_rh_elite_5, unform

[Trigger]
nickname = DESTROY_BIZ_CRUISERS
Cnd_True = no_params
Act_LightFuse = rh_cruiser_2, rh_cruiser_body_fuse
Act_ActTrig = DESTROY_BIZ_CRUISER_2

[Trigger]
nickname = DESTROY_BIZ_CRUISER_2
Cnd_Timer = 1
Act_LightFuse = rh_cruiser_1, rh_cruiser_body_fuse

[ObjList]
nickname = ol_KELN_BATTLE_join_player
avoidance = false
GotoShip = goto_no_cruise, Player, 500, true

[Trigger]
nickname = KELN_BATTLE_first_dialog
Cnd_Timer = 1
Act_NagDistLeaving = keln_battle, nag_voice, hassler, 090002, 6000, NAG_ALWAYS

;Reichman: Alarm!
Act_EtherComm = echo_m04, 094525, Player, DX_M04_0240_reichman, -1, rh_reichman_head, rh_reichman_body, prop_neuralnet_A_right
Act_NNIds = 094825, HISTORY
;Officer: Attack!
Act_EtherComm = echo_m04, 094526, Player, DX_M04_0250_officer, -1, rh_captain_head, rh_male_elite_body, comm_rh_elite
Act_NNIds = 094826, HISTORY

Act_ActTrig = KELN_BATTLE_invite_trent

[Trigger]
nickname = KELN_BATTLE_invite_trent
Cnd_CommComplete = DX_M04_0250_officer
Act_SetNNObj = ms4_06_destroy_enemy_and_save_jacobo
Act_ActTrig = keln_ships_setrep_enemy
Act_ActTrig = officer_scene_setrep_enemy
Act_ActTrig = KELN_BATTLE_learn_objectives
Act_ActTrig = KELN_BATTLE_generator_boom
Act_ActTrig = KELN_BATTLE_reinforce

[Trigger]
nickname = KELN_BATTLE_reinforce
Cnd_Destroyed = officer, -1, ALL_IGNORE_LANDING
Act_SpawnShip = keln_reinforce_f1
Act_SpawnShip = keln_reinforce_f2
Act_SpawnShip = keln_reinforce_f3
Act_SpawnShip = keln_reinforce_f4
Act_SpawnShip = keln_reinforce_f5
Act_SpawnShip = keln_reinforce_f6
Act_ActTrig = keln_ships_setrep_enemy
Act_ActTrig = officer_scene_setrep_enemy

[Trigger]
nickname = KELN_BATTLE_learn_objectives
Cnd_Timer = 10
;Trent: Let's leave
Act_EtherComm = echo_m04_player, 094527, Player, DX_M04_0260_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094827, HISTORY
;Hassler: We can't
Act_EtherComm = echo_m04, 094528, Player, DX_M04_0270_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094828, HISTORY
;Hassler: We can't
Act_EtherComm = echo_m04, 094529, Player, DX_M04_0280_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094829, HISTORY
Act_ActTrig = KELN_BATTLE_jacobo_warnings_end

[Trigger]
nickname = KELN_BATTLE_jacobo_warnings_end
Cnd_CommComplete = DX_M04_0280_hassler
Act_ActTrig = KELN_BATTLE_init_REACTOR

[Trigger]
nickname = KELN_BATTLE_init_REACTOR
Cnd_Timer = 5
Act_ActTrig = REACTOR_init

;----------------------



[MsnShip]
nickname = keln_reinforce_f1
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 30, Player, 1000

[MsnShip]
nickname = keln_reinforce_f2
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 90, Player, 1000

[MsnShip]
nickname = keln_reinforce_f3
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 150, Player, 1000

[MsnShip]
nickname = keln_reinforce_f4
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 200, Player, 1000

[MsnShip]
nickname = keln_reinforce_f5
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 250, Player, 1000

[MsnShip]
nickname = keln_reinforce_f6
NPC = npc_rh_fighter
label = keln
random_name = true
rel_pos = 310, Player, 1000

;----------------------


[Trigger]
nickname = REACTOR_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_dangerous_chase
Act_CallThorn = scripts\mod\m04_reactor_fx.thn, Player
Act_SpawnSolar = battleship_reactor
Act_Invulnerable = battleship_reactor, true
Act_LightFuse = rh_battleship_1, rbs_port_shield_damage_silent
Act_SetVibe = battleship_reactor, Player, REP_HOSTILE_MAXIMUM
Act_SetVibe = Player, battleship_reactor, REP_HOSTILE_MAXIMUM
Act_ActTrig = REACTOR_THE_MISSILE

[Trigger]
nickname = REACTOR_THE_MISSILE
Cnd_True = no_params
Act_LightFuse = rh_battleship_1, rbs_star_shield_missile
Act_PlaySoundEffect = mod_impact_torpedo
Act_ActTrig = REACTOR_THE_BOOM

[Trigger]
nickname = REACTOR_THE_BOOM
Cnd_Timer = 0.3
Act_LightFuse = rh_battleship_1, rbs_star_shield_damage
Act_PlaySoundEffect = csx_large02
Act_ActTrig = REACTOR_init_mission

[Trigger]
nickname = REACTOR_init_mission
Cnd_Timer = 4
Act_RevertCam = no_params
Act_Invulnerable = battleship_reactor, false
Act_ActTrig = REACTOR_after_boom_dialog
Act_ActTrig = REACTOR_destroyed

[Trigger]
nickname = REACTOR_after_boom_dialog
Cnd_Timer = 0.5
;Hassler: I hit BS
Act_EtherComm = echo_m04, 094530, Player, DX_M04_0290_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094830, HISTORY
Act_ActTrig = REACTOR_init_objective

[Trigger]
nickname = REACTOR_init_objective
Cnd_CommComplete = DX_M04_0290_hassler
;Hassler: I hit BS (2)
Act_EtherComm = echo_m04, 094531, Player, DX_M04_0300_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094831, HISTORY
Act_SetNNObj = ms4_07_destroy_battleship_reactor

[Trigger]
nickname = REACTOR_destroyed
Cnd_Destroyed = battleship_reactor
Act_LightFuse = rh_battleship_1, r_battleship_body_fuse
Act_ActTrig = REACTOR_finally_destroyed

[Trigger]
nickname = REACTOR_finally_destroyed
Cnd_Destroyed = rh_battleship_1
Act_NagOff = keln_battle

;Hassler: We need to leave
Act_EtherComm = echo_m04, 094532, Player, DX_M04_0310_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094832, HISTORY
;Alaric: Go!
Act_EtherComm = echo_m04, 094533, Player, DX_M04_0320_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094833, HISTORY

Act_ActTrig = REACTOR_complete_dialog
Act_ActTrig = init_FLY_TO_SIG8

[Trigger]
nickname = init_FLY_TO_SIG8
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_anticipation_more_forboding
Act_ActTrig = officer_scene_setrep
Act_ActTrig = keln_ships_setrep
Act_SetNNObj = ms4_08_fly_to_sig8
Act_NagDistTowards = OBJ, goto_jump_sig8, nag_voice, biz_to_sig8_alt, 090001, 4000
Act_GiveObjList = Player, command_follow_player
Act_ActTrig = FLY_TO_SIG8_make_enemy_again
Act_ActTrig = FLY_TO_SIG8_remove_keln_enemy
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog
Act_DeActTrig = KELN_BATTLE_reinforce

[ObjList]
nickname = command_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic, jacobo, hassler, alaric

[Trigger]
nickname = FLY_TO_SIG8_make_enemy_again
Cnd_Timer = 30
Act_ActTrig = keln_ships_setrep_enemy
Act_ActTrig = officer_scene_setrep_enemy

[Trigger]
nickname = FLY_TO_SIG8_remove_keln_enemy
Cnd_DistShip = outside, Player, rh_biz_05, 10000
Act_Destroy = keln_reinforce_f1, SILENT
Act_Destroy = keln_reinforce_f2, SILENT
Act_Destroy = keln_reinforce_f3, SILENT
Act_Destroy = keln_reinforce_f4, SILENT
Act_Destroy = keln_reinforce_f5, SILENT
Act_Destroy = keln_reinforce_f6, SILENT
Act_Destroy = p1_rh_elite_1, SILENT
Act_Destroy = p1_rh_elite_2, SILENT
Act_Destroy = p1_rh_elite_3, SILENT
Act_Destroy = p1_rh_elite_4, SILENT
Act_Destroy = p1_rh_elite_5, SILENT
Act_Destroy = rh_battleship_1, SILENT
Act_Destroy = rh_cruiser_1, SILENT
Act_Destroy = rh_cruiser_2, SILENT
Act_Destroy = rh_gunboat_1, SILENT
Act_Destroy = rh_gunboat_2, SILENT
Act_Destroy = rh_gunboat_3, SILENT


[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog
Cnd_DistShip = outside, Player, rh_biz_05, 3500
;Trent:
Act_EtherComm = echo_m04_player, 094534, Player, DX_M04_0330_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094834, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094535, Player, DX_M04_0340_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094835, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094536, Player, DX_M04_0350_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094836, HISTORY
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog2


[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog2
Cnd_CommComplete = DX_M04_0350_trent
;Hassler:
Act_EtherComm = echo_m04, 094537, Player, DX_M04_0360_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094837, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094538, Player, DX_M04_0370_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094838, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094539, Player, DX_M04_0380_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094839, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094540, Player, DX_M04_0390_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094840, HISTORY
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog3

[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog3
Cnd_CommComplete = DX_M04_0390_hassler
;Trent:
Act_EtherComm = echo_m04_player, 094541, Player, DX_M04_0400_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094841, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094542, Player, DX_M04_0410_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094842, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094543, Player, DX_M04_0420_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094843, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094544, Player, DX_M04_0430_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094844, HISTORY
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog4

[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog4
Cnd_CommComplete = DX_M04_0430_trent
;Hassler:
Act_EtherComm = echo_m04, 094545, Player, DX_M04_0440_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094845, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094546, Player, DX_M04_0450_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094846, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094547, Player, DX_M04_0460_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094847, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094548, Player, DX_M04_0470_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094848, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094549, Player, DX_M04_0480_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094849, HISTORY
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog5

[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog5
Cnd_CommComplete = DX_M04_0480_hassler
;Trent:
Act_EtherComm = echo_m04_player, 094550, Player, DX_M04_0490_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094850, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094551, Player, DX_M04_0500_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094851, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094552, Player, DX_M04_0510_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094852, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094553, Player, DX_M04_0520_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094853, HISTORY
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog6

[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog6
Cnd_CommComplete = DX_M04_0520_hassler
;Trent:
Act_EtherComm = echo_m04_player, 094554, Player, DX_M04_0530_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094854, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094555, Player, DX_M04_0540_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094855, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094556, Player, DX_M04_0550_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094856, HISTORY
Act_ActTrig = FLY_TO_SIG8_fly_away_dialog_done

[Trigger]
nickname = FLY_TO_SIG8_fly_away_dialog_done
Cnd_CommComplete = DX_M04_0550_hassler
Act_ActTrig = around_SIG8_gate

[Trigger]
nickname = around_SIG8_gate
Cnd_DistShip = inside, Player, biz_to_sig8_alt, 3000
Act_NagOff = goto_jump_sig8
Act_NagDistLeaving = jumpin_sig8, nag_voice, biz_to_sig8_alt, 090003, 1, 10, NAG_ALWAYS
Act_SetNNObj = ms4_09_jump_to_sig8
Act_PlayerCanDock = False, biz_to_sig8_alt
Act_ActTrig = welcome_to_sig8

;---

[MsnShip]
nickname = fleet_cruiser_1
NPC = npc_rh_cruiser
label = fleet

[MsnShip]
nickname = fleet_cruiser_2
NPC = npc_rh_cruiser
label = fleet

[MsnShip]
nickname = fleet_elite_1
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_elite_2
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_elite_3
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_elite_4
NPC = npc_rh_elite
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_1
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_2
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_3
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_4
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_5
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[MsnShip]
nickname = fleet_fighter_6
NPC = npc_rh_fighter
label = fleet
label = fleet_fighter
random_name = true

[ObjList]
nickname = follow_hassler
SetPriority = ALWAYS_EXECUTE
follow = hassler

;---


[Trigger]
nickname = welcome_to_sig8
Cnd_SystemEnter = sig8
Act_NagOff = jumpin_sig8
Act_ActTrig = sig8_wait_for_team
Act_RandomPop = False

[Trigger]
nickname = sig8_wait_for_team
Cnd_NPCSystemEnter = sig8, jacobo, hassler, alaric
Act_SpawnShip = nag_voice
Act_ActTRig = OUT_OF_NEBULA_init

[Trigger]
nickname = OUT_OF_NEBULA_init
Cnd_True = no_params
Act_SetNNObj = ms4_09_out_of_nebula_waypoint
Act_GiveObjList = Player, command_follow_player
Act_ActTrig = INSIDE_NEBULA_dialog
Act_ActTrig = OUT_OF_NEBULA_nebula_exited

[Trigger]
nickname = INSIDE_NEBULA_dialog
Cnd_True = no_params

;Hassler:
Act_EtherComm = echo_m04, 094557, Player, DX_M04_0560_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094857, HISTORY
;Jacobo:
Act_EtherComm = echo_m04, 094558, Player, DX_M04_0570_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094858, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094559, Player, DX_M04_0580_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094859, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094560, Player, DX_M04_0590_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094860, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094561, Player, DX_M04_0600_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094861, HISTORY
;Jacobo:
Act_EtherComm = echo_m04, 094562, Player, DX_M04_0610_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094862, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094563, Player, DX_M04_0620_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094863, HISTORY



[Trigger]
nickname = OUT_OF_NEBULA_nebula_exited
Cnd_InZone = false, Player, NEBULA_ZONE
Act_ActTrig = OUT_OF_NEBULA_wrong_zone
Act_ActTrig = OUT_OF_NEBULA_true_leaving
Act_ActTRig = OUT_OF_NEBULA_prepare_enemy_ships

[Trigger]
nickname = OUT_OF_NEBULA_wrong_zone
Cnd_DistVec = outside, Player, -55000, 0, -10000, 7000
Act_ChangeState = FAIL

[Trigger]
nickname = OUT_OF_NEBULA_true_leaving
Cnd_Timer = 0.1
Act_DeActTrig = OUT_OF_NEBULA_wrong_zone
Act_ActTrig = OUT_OF_NEBULA_done

[Trigger]
nickname = OUT_OF_NEBULA_prepare_enemy_ships
Cnd_DistVec = inside, Player, -55000, 0, -10000, 7000
Act_ActTrig = sig8_spawn_enemy_fleet
Act_ActTrig = sigma8_welcome_setrep_neutral

[Trigger]
nickname = OUT_OF_NEBULA_done
Cnd_True = no_params
Act_Save = SIG8_BATTLE_SAVE, 094304
Act_ActTrig = SIG8_BATTLE_init

[Trigger]
nickname = SIG8_BATTLE_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = SIG8_BATTLE_spawn_units

[Trigger]
nickname = SIG8_BATTLE_spawn_units
Cnd_Timer = 0.1
Act_SpawnShip = nag_voice
Act_RelocateShip = Player, -55500, 0, -10150, 0.5, 0, -0.5, 0
Act_SpawnShip = alaric, no_ol, -55500, 0, -10050, 0.5, 0, -0.5, 0
Act_SpawnShip = hassler, no_ol, -55500, 0, -10250, 0.5, 0, -0.5, 0
Act_SpawnShip = jacobo, follow_player, -55600, 60, -10150, 0.5, 0, -0.5, 0
Act_MarkObj = alaric, 1
Act_MarkObj = hassler, 1
Act_MarkObj = jacobo, 1
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_ActTrig = sig8_spawn_enemy_fleet
Act_ActTrig = SIG8_BATTLE_before_init

[Trigger]
nickname = SIG8_BATTLE_before_init
Cnd_Timer = 0.2
Act_ActTrig = SIG8_BATTLE_init

[Trigger]
nickname = SIG8_BATTLE_init
Cnd_True = no_params
Act_PlayMusic = none, none, none, music_rh_battle
Act_NagDistLeaving = sig8_welcome_battle, nag_voice, hassler, 090002, 6000, NAG_ALWAYS
Act_GiveObjList = fleet_cruiser_1, goto_player
Act_GiveObjList = fleet_cruiser_2, goto_player
Act_ActTrig = sigma8_welcome_setrep_enemy
Act_SetNNObj = ms4_11_destroy_fighters
Act_Pobjidle = no_params
Act_GiveObjList = hassler, unform
Act_GiveObjList = alaric, unform
Act_ActTRig = SIG8_BATTLE_alaric_return_to_hassler
Act_GiveObjList = jacobo, follow_player
Act_MarkObj = jacobo, 1
Act_MarkObj = hassler, 1
Act_MarkObj = alaric, 1
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_ActTrig = SIG8_BATTLE_dialog
Act_PlayerEnemyClamp = 2, 4

[ObjList]
nickname = alaric_goto_hassler
avoidance = false
GotoShip = goto_no_cruise, hassler, 300, false

[Trigger]
nickname = SIG8_BATTLE_alaric_return_to_hassler
Cnd_DistShip = outside, alaric, hassler, 2000
Act_GiveObjList = alaric, alaric_goto_hassler
Act_ActTrig = SIG8_BATTLE_alaric_return_to_hassler_reset

[Trigger]
nickname = SIG8_BATTLE_alaric_return_to_hassler_reset
Cnd_DistShip = inside, alaric, hassler, 1800
Act_ActTrig = SIG8_BATTLE_alaric_return_to_hassler

[Trigger]
nickname = SIG8_BATTLE_alaric_return_to_hassler_turn_off
Cnd_True = no_params
Act_DeActTrig = SIG8_BATTLE_alaric_return_to_hassler
Act_DeActTrig = SIG8_BATTLE_alaric_return_to_hassler_reset


[Trigger]
nickname = sig8_spawn_enemy_fleet
Cnd_True = no_params
Act_SpawnShip = fleet_cruiser_1, no_ol, -54000, 0, -10200, 1, 0, 0, 0
Act_SpawnShip = fleet_cruiser_2, no_ol, -53900, 0, -9600, 1, 0, 0, 0
Act_SpawnShip = fleet_elite_1, no_ol, -54100, -60, -10250, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_elite_2, no_ol, -54100, -60, -10150, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_elite_3, no_ol, -54100, -60, -10050, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_elite_4, no_ol, -54100, -60, -9950, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_fighter_1, no_ol, -54000, 0, -10400, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_fighter_2, no_ol, -54000, 0, -10500, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_fighter_3, no_ol, -54000, 0, -10600, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_fighter_4, no_ol, -54000, -50, -9800, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_fighter_5, no_ol, -54000, -50, -9700, 0.5, 0, 0.5, 0
Act_SpawnShip = fleet_fighter_6, no_ol, -54000, -50, -9600, 0.5, 0, 0.5, 0
Act_MarkObj = fleet_elite_1, 1
Act_MarkObj = fleet_elite_2, 1
Act_MarkObj = fleet_elite_3, 1
Act_MarkObj = fleet_elite_4, 1
Act_MarkObj = fleet_fighter_1, 1
Act_MarkObj = fleet_fighter_2, 1
Act_MarkObj = fleet_fighter_3, 1
Act_MarkObj = fleet_fighter_4, 1
Act_MarkObj = fleet_fighter_5, 1
Act_MarkObj = fleet_fighter_6, 1
Act_ActTrig = sigma8_welcome_setrep_neutral

[Trigger]
nickname = SIG8_BATTLE_dialog
Cnd_Timer = 0.5
;Hassler: How they did find us
Act_EtherComm = echo_m04, 094564, Player, DX_M04_0630_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094864, HISTORY
;Commander: Stay on your positions! Right now!
Act_EtherComm = echo_m04, 094660, Player, DX_M04_9200_cruiser, -1, rh_sales_head, rh_male_guard_body, prop_neuralnet_d
Act_NNIds = 094960, HISTORY
Act_ActTrig = SIG8_JACOBO_DESTROYING

[Trigger]
nickname = SIG8_JACOBO_DESTROYING
Cnd_CommComplete = DX_M04_0630_hassler
Act_ActTrig = SIG8_JACOBO_DESTROYING_dialog

[Trigger]
nickname = SIG8_JACOBO_DESTROYING_dialog
Cnd_Timer = 20
Act_GiveObjList = jacobo, jacobo_goto_sun
;Jacobo: I am damaged!
Act_EtherComm = echo_m04, 094565, Player, DX_M04_0640_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094865, HISTORY
Act_LightFuse = jacobo, intermed_damage_smallship01
Act_LightFuse = jacobo, intermed_damage_smallship02
Act_LightFuse = jacobo, intermed_damage_smallship03
Act_ActTrig = SIG8_JACOBO_DESTROYING_scene

[Trigger]
nickname = SIG8_JACOBO_DESTROYING_scene
Cnd_CommComplete = DX_M04_0640_jacobo
Act_LightFuse = jacobo, intermed_damage_smallship01
Act_LightFuse = jacobo, intermed_damage_smallship02
Act_LightFuse = jacobo, intermed_damage_smallship03
Act_ActTrig = SIG_JACOBO_DESTROYING_wait

[Trigger]
nickname = SIG_JACOBO_DESTROYING_wait
Cnd_Timer = 2
Act_CallThorn = scripts\mod\m04_jacobo_death.thn, jacobo
Act_ActTrig = SIG8_JACOBO_THE_DESTROY
Act_ActTrig = SIG8_JACOBO_death_sound

[Trigger]
nickname = SIG8_JACOBO_death_sound
Cnd_Timer = 1.5
;Jacobo: Aarrrgghhhh....
Act_EtherComm = echo_m04, 094566, Player, DX_M04_0650_jacobo, -1, pl_male1_head, pi_pirate2_body, prop_neuralnet_b
Act_NNIds = 094866, HISTORY

[Trigger]
nickname = SIG8_JACOBO_THE_DESTROY
Cnd_Timer = 2
Act_Destroy = jacobo
Act_PlayMusic = none, none, none, music_solemn_and_grave
Act_ActTrig = SIG8_JACOBO_scene_ends
Act_ActTrig = SIG8_JACOBO_scene_change_music

[Trigger]
nickname = SIG8_JACOBO_scene_change_music
Cnd_Timer = 21
Act_PlayMusic = none, none, none, music_rh_battle

[Trigger]
nickname = SIG8_JACOBO_scene_ends
Cnd_Timer = 2
Act_RevertCam = no_params
Act_ActTrig = SIG8_FIGHTERS_DEFEATED
Act_ActTrig = SIG8_JACOBO_dead_sad_dialog

[ObjList]
nickname = jacobo_goto_sun
BreakFormation = no_params
GotoShip = goto_no_cruise, sig8_sun, 200, false

[Trigger]
nickname = sigma8_welcome_setrep_neutral
Cnd_True = no_params
Act_SetVibeLbl = ally, fleet, REP_NEUTRAL
Act_SetVibeLbl = fleet, ally, REP_NEUTRAL
Act_SetVibeLblToShip = fleet, Player, REP_NEUTRAL
Act_SetVibeShipToLbl = Player, fleet, REP_NEUTRAL

[Trigger]
nickname = sigma8_welcome_setrep_enemy
Cnd_True = no_params
Act_SetVibeLbl = ally, fleet, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = fleet, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = fleet, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, fleet, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = SIG8_JACOBO_dead_sad_dialog
Cnd_Timer = 2
;Trent: Damn!
Act_EtherComm = echo_m04_player, 094567, Player, DX_M04_0660_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094867, HISTORY

[Trigger]
nickname = SIG8_FIGHTERS_DEFEATED
Cnd_Destroyed = fleet_fighter, -1, ALL_IGNORE_LANDING
;Hassler: Completed! Go to waypoint
Act_EtherComm = echo_m04, 094670, Player, DX_M04_9300_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094970, HISTORY
Act_NagOff = sig8_welcome_battle
Act_ActTrig = sigma8_welcome_setrep_neutral
Act_ActTrig = SIG8_BATTLE_alaric_return_to_hassler_turn_off
Act_ActTrig = SIG8_FLY_init

[ObjList]
nickname = small_command_follow_player
SetPriority = NORMAL
FollowPlayer = fighter_basic, hassler, alaric

[Trigger]
nickname = SIG8_FLY_init
Cnd_True = no_params
Act_SetNNObj = ms4_12_go_to_outpost_waypoint
Act_NagDistTowards = POS, sig8_outpost_wp, nag_voice, -10000, 0, 15000, 090001, 2000
Act_PlayMusic = none, none, none, music_reveal_and_exposition
Act_GiveObjList = Player, small_command_follow_player
Act_ActTrig = SIG8_OUTPOST_WP_make_cruiser_enemy_again
Act_ActTrig = SIG8_OUTPOST_WP_remove_cruisers
Act_ActTrig = SIG8_OUTPOST_WP_progress_dialog
Act_ActTrig = SIG8_OUTPOST_WP_around_waypoint

[Trigger]
nickname = SIG8_OUTPOST_WP_make_cruiser_enemy_again
Cnd_Timer = 20
Act_ActTrig = sigma8_welcome_setrep_enemy

[Trigger]
nickname = SIG8_OUTPOST_WP_remove_cruisers
Cnd_DistVec = outside, Player, -55000, 0, -10000, 10000
Act_Destroy = fleet_cruiser_1, SILENT
Act_Destroy = fleet_cruiser_2, SILENT

[Trigger]
nickname = SIG8_OUTPOST_WP_progress_dialog
Cnd_Timer = 5
;Hassler:
Act_EtherComm = echo_m04, 094568, Player, DX_M04_0670_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094868, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094569, Player, DX_M04_0680_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094869, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094570, Player, DX_M04_0690_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094870, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094571, Player, DX_M04_0700_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094871, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094572, Player, DX_M04_0710_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094872, HISTORY
Act_ActTrig = SIG8_OUTPOST_WP_progress_dialog_pack2

[Trigger]
nickname = SIG8_OUTPOST_WP_progress_dialog_pack2
Cnd_CommComplete = DX_M04_0710_trent
;Hassler:
Act_EtherComm = echo_m04, 094573, Player, DX_M04_0720_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094873, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094574, Player, DX_M04_0730_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094874, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094575, Player, DX_M04_0740_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094875, HISTORY
;Alaric:
Act_EtherComm = echo_m04, 094576, Player, DX_M04_0750_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094876, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094577, Player, DX_M04_0760_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094877, HISTORY
Act_ActTrig = SIG8_OUTPOST_WP_progress_dialog_pack3

[Trigger]
nickname = SIG8_OUTPOST_WP_progress_dialog_pack3
Cnd_CommComplete = DX_M04_0760_hassler
;Trent:
Act_EtherComm = echo_m04_player, 094578, Player, DX_M04_0770_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094878, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094579, Player, DX_M04_0780_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094879, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094580, Player, DX_M04_0790_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094880, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094581, Player, DX_M04_0800_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094881, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094582, Player, DX_M04_0810_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094882, HISTORY
Act_ActTrig = SIG8_OUTPOST_WP_progress_dialog_pack4

[Trigger]
nickname = SIG8_OUTPOST_WP_progress_dialog_pack4
Cnd_CommComplete = DX_M04_0810_trent
;Hassler:
Act_EtherComm = echo_m04, 094583, Player, DX_M04_0820_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094883, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094584, Player, DX_M04_0830_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094884, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094585, Player, DX_M04_0840_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094885, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094586, Player, DX_M04_0850_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094886, HISTORY

[Trigger]
nickname = SIG8_OUTPOST_WP_around_waypoint
Cnd_DistVec = inside, Player, -10000, 0, 15000, 5000
Act_NagOff = sig8_outpost_wp
Act_ActTrig = SIG8_FORBES_WP_init

[Trigger]
nickname = SIG8_FORBES_WP_init
Cnd_True = no_params
Act_NagDistTowards = POS, sig8_forbes_wp, nag_voice, 12000, 0, 14000, 090001, 2000
Act_SetNNObj = ms4_12_go_to_forbes_waypoint
Act_ActTrig = SIG8_FORBES_WP_around_waypoint
Act_ActTrig = SIG8_FORBES_WP_outpost_dialog

[Trigger]
nickname = SIG8_FORBES_WP_outpost_dialog
Cnd_Timer = 5
;Outpost:
Act_EtherComm = echo_m04_female, 094592, Player, DX_M04_0900_outpost, -1, rh_newscaster_head_gen, rh_female_elite_body, prop_neuralnet_f
Act_NNIds = 094892, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094593, Player, DX_M04_0910_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094893, HISTORY
;Outpost:
Act_EtherComm = echo_m04_female, 094594, Player, DX_M04_0920_outpost, -1, rh_newscaster_head_gen, rh_female_elite_body, prop_neuralnet_f
Act_NNIds = 094894, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094595, Player, DX_M04_0930_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094895, HISTORY
;Alaric:
Act_EtherComm = echo_m04, 094596, Player, DX_M04_0940_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094896, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094597, Player, DX_M04_0950_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094897, HISTORY

[Trigger]
nickname = SIG8_FORBES_WP_around_waypoint
Cnd_DistVec = inside, Player, 12000, 0, 14000, 5000
Act_NagOff = sig8_forbes_wp
Act_ActTrig = SIG8_GOTO_JUMP_init

[Trigger]
nickname = SIG8_GOTO_JUMP_init
Cnd_True = no_params
Act_NagDistTowards = OBJ, sig8_goto_jump, nag_voice, SIG8_TO_FOR, 090001, 3000, NAG_ALWAYS
Act_SetNNObj = ms4_14_go_to_forbes_jumphole
Act_ActTrig = SIG8_GOTO_JUMP_around_HOLE
Act_ActTrig = SIG8_FORBES_OBJECTIVE_dialog

[Trigger]
nickname = SIG8_FORBES_OBJECTIVE_dialog
Cnd_Timer = 10
;Hassler:
Act_EtherComm = echo_m04, 094587, Player, DX_M04_0860_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094887, HISTORY
;Alaric:
Act_EtherComm = echo_m04, 094588, Player, DX_M04_0870_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094888, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094589, Player, DX_M04_0875_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094889, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094590, Player, DX_M04_0880_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094890, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094591, Player, DX_M04_0890_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094891, HISTORY

[Trigger]
nickname = SIG8_GOTO_JUMP_around_HOLE
Cnd_DistShip = inside, Player, SIG8_TO_FOR, 1000
Act_NagOff = sig8_goto_jump
Act_Pobjidle = no_params
Act_Save = FORBES_JUMPHOLE_SAVE, 094305
Act_ActTrig = INIT_JUMPHOLE_activation

[Trigger]
nickname = FORBES_JUMPHOLE_SAVE
Cnd_SpaceEnter = no_params
Act_RevertCam = no_params
Act_ActTrig = FORBES_JUMPHOLE_spawn_units

[Trigger]
nickname = FORBES_JUMPHOLE_spawn_units
Cnd_Timer = 0.1
Act_RelocateShip = Player, 38960, 0, 40000, 1, 0, -0.9, 0
Act_SpawnShip = alaric, no_ol, 39020, 0, 39950, 1, 0, -0.9, 0
Act_SpawnShip = hassler, no_ol, 39030, 0, 40050, 1, 0, -0.9, 0
Act_SpawnShip = nag_voice
Act_MarkObj = alaric, 1
Act_MarkObj = hassler, 1
Act_ActTrig = Friend_Armor
Act_ActTrig = Friend_Setrep
Act_ActTrig = INIT_JUMPHOLE_activation

[Trigger]
nickname = INIT_JUMPHOLE_activation
Cnd_Timer = 0.2
Act_PlayMusic = no_params
;Hassler: We are there. Beginning activation...
Act_EtherComm = echo_m04, 094598, Player, DX_M04_0960_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094898, HISTORY
Act_NagDistLeaving = forjump_activation, nag_voice, hassler, 090002, 6000, NAG_ALWAYS
Act_SetNNObj = ms4_15_wait_for_activation
Act_Jumper = hassler, false
Act_GiveObjList = hassler, unform
Act_GiveObjList = alaric, unform
Act_GiveObjList = Player, unform
Act_ActTrig = INIT_JUMPHOLE_first_waiting

[Trigger]
nickname = INIT_JUMPHOLE_first_waiting
Cnd_CommComplete = DX_M04_0960_hassler
Act_ActTrig = INIT_JUMPHOLE_the_corsairs

[Trigger]
nickname = INIT_JUMPHOLE_spawn_corsairs
Cnd_True = no_params
Act_SpawnShip = co_fighter_1
Act_SpawnShip = co_fighter_2
Act_SpawnShip = co_fighter_3
Act_SpawnShip = co_fighter_4
Act_SpawnShip = co_fighter_5
Act_SpawnShip = co_fighter_6

[Trigger]
nickname = corsairs_setrep_enemy
Cnd_True = no_params
Act_SetVibeLbl = ally, corsair, REP_HOSTILE_MAXIMUM
Act_SetVibeLbl = corsair, ally, REP_HOSTILE_MAXIMUM
Act_SetVibeLblToShip = corsair, Player, REP_HOSTILE_MAXIMUM
Act_SetVibeShipToLbl = Player, corsair, REP_HOSTILE_MAXIMUM

[Trigger]
nickname = INIT_JUMPHOLE_the_corsairs
Cnd_Timer = 2
Act_ActTrig = INIT_JUMPHOLE_spawn_corsairs
;Alaric:
Act_EtherComm = echo_m04, 094599, Player, DX_M04_0970_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094899, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094600, Player, DX_M04_0980_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094900, HISTORY
Act_ActTrig = INIT_JUMPHOLE_corsairs_destroyed
Act_ActTrig = INIT_JUMPHOLE_set_nn_kill_corsairs

[Trigger]
nickname = INIT_JUMPHOLE_set_nn_kill_corsairs
Cnd_CommComplete = DX_M04_0970_alaric
Act_ActTrig = corsairs_setrep_enemy
Act_SetNNObj = ms4_13_destroy_corsairs
Act_MarkObj = co_fighter_1, 1
Act_MarkObj = co_fighter_2, 1
Act_MarkObj = co_fighter_3, 1
Act_MarkObj = co_fighter_4, 1
Act_MarkObj = co_fighter_5, 1
Act_MarkObj = co_fighter_6, 1

[Trigger]
nickname = INIT_JUMPHOLE_corsairs_destroyed
Cnd_Destroyed = corsair, -1, ALL
;Hassler: Trying again
Act_EtherComm = echo_m04, 094601, Player, DX_M04_0990_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094901, HISTORY
Act_GiveObjList = alaric, goto_forbes_jumphole
Act_GiveObjList = hassler, goto_forbes_jumphole
Act_ActTrig = JUMPHOLE_ACTIVATED

[Trigger]
nickname = JUMPHOLE_ACTIVATED
Cnd_CommComplete = DX_M04_0990_hassler
Act_CallThorn = scripts\mod\m04_jumphole.thn, SIG8_TO_FOR
Act_LightFuse = SIG8_TO_FOR, msn03_jumphole_init
Act_ActTrig = JUMPHOLE_ACTIVATED_revert_camera

[Trigger]
nickname = JUMPHOLE_ACTIVATED_revert_camera
Cnd_Timer = 4
Act_RevertCam = no_params
Act_ActTrig = JUMPHOLE_ACTIVATED_init_mission

[Trigger]
nickname = JUMPHOLE_ACTIVATED_init_mission
Cnd_Timer = 1
Act_NagOff = forjump_activation
Act_ActTrig = JUMPHOLE_ACTIVATED_bye_bye


[Trigger]
nickname = JUMPHOLE_ACTIVATED_bye_bye
Cnd_True = no_params
Act_SetNNObj = ms4_16_be_near_jumphole
;Hassler: Jumphole activated!
Act_EtherComm = echo_m04, 094602, Player, DX_M04_0995_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094902, HISTORY
;Alaric:
Act_EtherComm = echo_m04, 094603, Player, DX_M04_1000_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094903, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094604, Player, DX_M04_1010_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094904, HISTORY
;Hassler:
Act_EtherComm = echo_m04, 094605, Player, DX_M04_1020_hassler, -1, rh_hassler_head, rh_male_elite_body, comm_rh_reichman
Act_NNIds = 094905, HISTORY
Act_ActTrig = JUMPHOLE_ACTIVATED_alaric_dock
Act_ActTrig = JUMPHOLE_ACTIVATED_bye_bye_ends

[Trigger]
nickname = JUMPHOLE_ACTIVATED_alaric_dock
Cnd_CommComplete = DX_M04_1000_alaric
Act_GiveObjList = alaric, do_forbes_jump

[Trigger]
nickname = JUMPHOLE_ACTIVATED_bye_bye_ends
Cnd_CommComplete = DX_M04_1020_hassler
Act_ActTrig = JUMPHOLE_ACTIVATED_timelimit
Act_ActTrig = JUMPHOLE_ACTIVATED_timelimit_off
;TODO: nagdist
;Act_SetNNObj = ms4_16_use_jumphole
Act_LockDock = Player, SIG8_TO_FOR, unlock
Act_PlayerCanDock = false, SIG8_TO_FOR
Act_EnableManeuver = dock, true
Act_ActTrig = welcome_to_forbes

[Trigger]
nickname = JUMPHOLE_ACTIVATED_timelimit
Cnd_Timer = 200
Act_ChangeState = FAIL, 094103 ; not activated jumphole failure

[Trigger]
nickname = JUMPHOLE_ACTIVATED_timelimit_off
Cnd_SystemExit = sig8
Act_DeActTrig = JUMPHOLE_ACTIVATED_timelimit


;---

[ObjList]
nickname = goto_forbes_jumphole
SetPriority = ALWAYS_EXECUTE
GotoShip = goto_no_cruise, SIG8_TO_FOR, 300, false

[ObjList]
nickname = do_forbes_jump
SetPriority = ALWAYS_EXECUTE
Dock = sig8_to_for

[NPC]
nickname = npc_co_fighter
affiliation = co_grp
npc_ship_arch = ms4_co_fighter_ship
voice = pilot_f_ill_m01

[MsnShip]
nickname = co_fighter_1
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 50, Player, 2500

[MsnShip]
nickname = co_fighter_2
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 80, Player, 2500

[MsnShip]
nickname = co_fighter_3
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 120, Player, 2500

[MsnShip]
nickname = co_fighter_4
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 170, Player, 2500

[MsnShip]
nickname = co_fighter_5
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 230, Player, 2500

[MsnShip]
nickname = co_fighter_6
NPC = npc_co_fighter
label = corsair
random_name = true
rel_pos = 270, Player, 2500



;----

[Trigger]
nickname = welcome_to_forbes
Cnd_NPCSystemEnter = li_for, alaric, Player
Act_SpawnShip = nag_voice
Act_GiveObjList = alaric, follow_player

;Alaric:
Act_EtherComm = echo_m04, 094606, Player, DX_M04_1030_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094906, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094607, Player, DX_M04_1040_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094907, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094608, Player, DX_M04_1050_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094908, HISTORY
;Alaric:
Act_EtherComm = echo_m04, 094609, Player, DX_M04_1060_alaric, -1, rh_alaric_head_hat, pi_pirate6_body, comm_rh_alaric
Act_NNIds = 094909, HISTORY
Act_ActTrig = FORBES_LETS_GO

[Trigger]
nickname = FORBES_LETS_GO
Cnd_CommComplete = DX_M04_1050_trent
Act_SetNNObj = ms4_17_go_to_shipyard
Act_NagDistTowards = OBJ, goto_shipyard, nag_voice, li_for_03, 090001, 3000, NAG_ALWAYS
Act_ActTrig = HATCHER_FIRST_MESSAGES

[Trigger]
nickname = HATCHER_FIRST_MESSAGES
Cnd_DistShip = outside, Player, FOR_TO_SIG8, 3000
;Hatcher:
Act_EtherComm = echo_m04_female, 094610, Player, DX_M04_1070_hatcher, -1, li_hatcher_head, li_hatcher_body
Act_NNIds = 094910, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094611, Player, DX_M04_1080_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094911, HISTORY
;Hatcher:
Act_EtherComm = echo_m04_female, 094612, Player, DX_M04_1090_hatcher, -1, li_hatcher_head, li_hatcher_body
Act_NNIds = 094912, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094613, Player, DX_M04_1100_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094913, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094614, Player, DX_M04_1110_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094914, HISTORY
;Hatcher:
Act_EtherComm = echo_m04_female, 094615, Player, DX_M04_1120_hatcher, -1, li_hatcher_head, li_hatcher_body
Act_NNIds = 094915, HISTORY
;Trent:
Act_EtherComm = echo_m04_player, 094616, Player, DX_M04_1130_trent, -1, pi_pirate5_head, player_body, player_commhelmet
Act_NNIds = 094916, HISTORY
;Hatcher:
Act_EtherComm = echo_m04_female, 094617, Player, DX_M04_1140_hatcher, -1, li_hatcher_head, li_hatcher_body
Act_NNIds = 094917, HISTORY
Act_ActTrig = GOTO_PLANET_init

[Trigger]
nickname = GOTO_PLANET_init
Cnd_CommComplete = DX_M04_1130_trent
Act_ActTrig = GOTO_PLANET_around_shipyard

[Trigger]
nickname = GOTO_PLANET_around_shipyard
Cnd_DistShip = inside, Player, li_for_03, 2000
Act_PlayerCanTradelane = false, LI_FOR_F_Trade_Lane_Ring_L2_06, LI_FOR_F_Trade_Lane_Ring_L2_05
Act_SetNNObj = ms4_18_use_tradelane
Act_NagOff = goto_shipyard
Act_NagDistLeaving = forbes_tlr, nag_voice, LI_FOR_F_Trade_Lane_Ring_L2_06, 090000, 100, NAG_ALWAYS
Act_ActTrig = GOTO_PLANET_in_TLR

[Trigger]
nickname = GOTO_PLANET_in_TLR
Cnd_TLEntered = Player, LI_FOR_F_Trade_Lane_Ring_L2_06, LI_FOR_F_Trade_Lane_Ring_L2_05
Act_NagOff = forbes_tlr
Act_SetNNObj = null, OBJECTIVE_HISTORY
Act_LockManeuvers = true
Act_ActTrig = TLR_EXIT

[Trigger]
nickname = TLR_EXIT
Cnd_TLExited = Player, LI_FOR_F_Trade_Lane_Ring_L2_01
Act_LockManeuvers = false
Act_SetNNObj = ms4_19_dock_on_planet_forbes
Act_PlayerCanDock = false, Li_for_dock_ring
Act_ActTrig = player_on_planet_forbes
Act_ActTrig = TLR_EXIT_alaric_dock_on_forbes
Act_NagDistLeaving = forbes_planet, nag_voice, Li_for_dock_ring, 040101, 100, NAG_ALWAYS

[Trigger]
nickname = TLR_EXIT_alaric_dock_on_forbes
Cnd_Timer = 2
Act_GiveObjList = alaric, dock_on_forbes


;----
[ObjList]
nickname = dock_on_forbes
BreakFormation = no_params
Dock = Li_for_dock_ring
;----

[Trigger]
nickname = player_on_planet_forbes
system = li_for
Cnd_BaseEnter = li_for_01_base
Act_AddRTC = missions\m04\hatcher_bar_rtc.ini
Act_ActTrig = loc_enter_Cityscape
Act_NagOff = forbes_planet
repeatable = true

[Trigger]
nickname = loc_enter_Cityscape
Cnd_LocEnter = Cityscape, li_for_01_base
Act_AdjAcct = 17500
Act_AddRTC = missions\m04\cityscape_rtc.ini
Act_ActTrig = final_cutscene_done
repeatable = true

[Trigger]
nickname = final_cutscene_done
Cnd_RTCDone = missions\m04\cityscape_rtc.ini
Act_ActTrig = MSN_REP_AFTER
Act_ChangeState = SUCCEED



;----

[Trigger]
nickname = MSN_REP_BEFORE
Cnd_True = no_params
Act_SetRep = Player, rh_grp, 0
Act_SetRep = Player, rc_grp, 0
Act_SetRep = Player, rx_grp, -0.3
Act_SetRep = Player, co_grp, -0.9
Act_ActTrig = REP_HOTFIX

[Trigger]
nickname = MSN_REP_AFTER
Cnd_True = no_params
Act_SetRep = Player, rh_grp, -0.65
Act_SetRep = Player, rc_grp, -0.65
Act_SetRep = Player, rx_grp, -0.65
Act_SetRep = Player, bh_grp, 0
Act_SetRep = Player, li_grp, 0.3
Act_SetRep = Player, lc_grp, 0.3
Act_SetRep = Player, lx_grp, -0.3
Act_ActTrig = REP_HOTFIX

[Trigger]
nickname = REP_HOTFIX
Cnd_True = no_params
Act_SetRep = Player, fc_lr_grp, -0.8

